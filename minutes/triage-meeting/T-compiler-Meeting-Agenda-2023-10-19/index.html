<!doctype html><html lang=en><head><meta http-equiv=refresh content="0; url=https://forge.rust-lang.org/compiler/index.html"></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://rust-lang.github.io/compiler-team/>Rust Lang - Compiler Team</a></h2><style>nav ul a[href$=\2f compiler-team\2fminutes\2ftriage-meeting\2fT-compiler-Meeting-Agenda-2023-10-19\2f ]{color:#004ed0}</style><ul><li><p><strong>About</strong></p><ul><li><a href=/compiler-team/about/CODE_OF_CONDUCT/>Code of Conduct</a></li><li><a href=/compiler-team/about/chat-platform/>Chat Platform</a></li><li><a href=/compiler-team/about/steering-meeting/>Steering Meeting</a></li><li><a href=/compiler-team/about/triage-meeting/>Triage Meeting</a></li></ul></li><li><p><strong>Minutes</strong></p><ul><li><a href=/compiler-team/minutes/design-meeting/>Design Meetings</a></li><li><a href=/compiler-team/minutes/steering-meeting/>Steering Meetings</a></li><li><a href=/compiler-team/minutes/triage-meeting/>Triage Meetings</a></li></ul></li><li><p><strong>Procedures</strong></p><ul><li><a href=/compiler-team/procedures/>Documentation</a></li><li><a href=/compiler-team/procedures/crates/>Crates</a></li><li><a href=/compiler-team/procedures/call-for-participation/>Call for participation</a></li><li><a href=/compiler-team/procedures/form-new-working-group/>Form new working group</a></li></ul></li><li><p><a href=/compiler-team/working-groups/><strong>Working Groups</strong></a></p><ul><li><a href=/compiler-team/working-groups/async-await/>Async Await</a></li><li><a href=/compiler-team/working-groups/debugging/>Debugging</a></li><li><a href=/compiler-team/working-groups/diagnostics/>Diagnostics</a></li><li><a href=/compiler-team/working-groups/rustc-dev-guide/>Rustc Dev Guide</a></li><li><a href=/compiler-team/working-groups/llvm/>LLVM</a></li><li><a href=/compiler-team/working-groups/meta/>Meta</a></li><li><a href=/compiler-team/working-groups/mir-opt/>MIR-opt</a></li><li><a href=/compiler-team/working-groups/nll/>NLL</a></li><li><a href=/compiler-team/working-groups/parallel-rustc/>parallel rustc</a></li><li><a href=/compiler-team/working-groups/pgo/>PGO</a></li><li><a href=/compiler-team/working-groups/pipelining/>pipelining</a></li><li><a href=/compiler-team/working-groups/polonius/>polonius</a></li><li><a href=/compiler-team/working-groups/polymorphization/>polymorphization</a></li><li><a href=/compiler-team/working-groups/prioritization/>Prioritization</a></li><li><a href=/compiler-team/working-groups/rfc-2229/>rfc-2229</a></li><li><a href=/compiler-team/working-groups/rls-2.0/>rls-2.0</a></li><li><a href=/compiler-team/working-groups/self-profile/>Self Profile</a></li><li><a href=/compiler-team/working-groups/traits/>Traits</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/compiler-team/svg/menu.svg alt=Menu>
</label><strong>T Compiler Meeting Agenda 2023 10 19</strong></header><article class=markdown><h1 id=t-compiler-meeting-agenda-2023-10-19>T-compiler Meeting Agenda 2023-10-19</h1><h2 id=announcements>Announcements</h2><ul><li><a href="https://www.google.com/calendar/event?eid=MDJyYnJ1cGFtdWR1c2lnNjFmcHJ2b3JlODFfMjAyMzEwMjBUMTQwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Compiler Team Planning meeting</a> at <a href=time:2023-10-20T10:00:00-04:00>time:2023-10-20T10:00:00-04:00</a></li><li>@<strong>apiraino</strong> proposal to rename the <em>WG-prioritization</em> to <em>T-compiler/ops</em> team (<a href=https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/Rename.20.22WG-prioritization.22.20to.20.22T-compiler.2Fops.22>Zulip thread</a>). Happy to receive feedback!</li><li>Reminder: if you see a PR/issue that seems like there might be legal implications due to copyright/IP/etc, please let us know (or at least message @<em><strong>davidtwco</strong> or @</em><strong>Wesley Wiser</strong> so we can pass it along).</li></ul><h3 id=other-wg-meetings-calendar-linkhttpscalendargooglecomcalendarembedsrc6u5rrtce6lrtv07pfi3damgjus40groupcalendargooglecom>Other WG meetings (<a href="https://calendar.google.com/calendar/embed?src=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com">calendar link</a>)</h3><ul><li><a href="https://www.google.com/calendar/event?eid=N2VsaWszdm9rY3NhdDF1MjdyMjVqajNpcWVfMjAyMzEwMTlUMjAwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">AFIT/RPITIT Impl Triage</a> at <a href=time:2023-10-19T16:00:00-04:00>time:2023-10-19T16:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=MTg3MDhpdTc3YXBqMGMzbnNxanUwdWZnazhfMjAyMzEwMjNUMTQwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Types team meeting</a> at <a href=time:2023-10-23T10:00:00-04:00>time:2023-10-23T10:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=N2NxOWxzYWYxb3NicWNzbGsxYzdxcG9ydTJfMjAyMzEwMjNUMTUwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">wg-rls-2.0 steering meeting</a> at <a href=time:2023-10-23T11:00:00-04:00>time:2023-10-23T11:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=N29vMXZqbGZ1MDIxbzllMDI3dGhocWhhZmNfMjAyMzEwMjNUMTUwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">[Types] Rotating new solver / formality / polonius deep dive</a> at <a href=time:2023-10-23T11:00:00-04:00>time:2023-10-23T11:00:00-04:00</a></li></ul><h2 id=mcpsfcps>MCPs/FCPs</h2><ul><li>New MCPs (take a look, see if you like them!)<ul><li>No new proposals this time.</li></ul></li><li>Old MCPs (stale MCP might be closed as per <a href=https://forge.rust-lang.org/compiler/mcp.html#when-should-major-change-proposals-be-closed>MCP procedure</a>)<ul><li>None at this time</li></ul></li><li>Old MCPs (not seconded, take a look)<ul><li>&ldquo;Consistently use &ldquo;region&rdquo; terminology in later stages of the compiler&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/634>compiler-team#634</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Consistently.20use.20.22region.22.20terminology.20in.20.E2.80.A6.20compiler-team.23634>Zulip</a>) (last review activity: 4 months ago)</li><li>&ldquo;Add a new <code>--build-id</code> flag to rustc&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/635>compiler-team#635</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20new.20.60--build-id.60.20flag.20to.20rustc.20compiler-team.23635>Zulip</a>) (last review activity: 4 months ago)</li><li>&ldquo;Add support for visionOS targets&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/642>compiler-team#642</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20support.20for.20visionOS.20targets.20compiler-team.23642>Zulip</a>) (last review activity: about 47 days ago)</li><li>&ldquo;Match the behavior of <code>strip</code> and <code>split-debuginfo</code> across platforms&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/669>compiler-team#669</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Match.20the.20behavior.20of.20.60strip.60.20and.20.60split-.E2.80.A6.20compiler-team.23669>Zulip</a>) (last review activity: about 44 days ago)</li></ul></li><li>Pending FCP requests (check your boxes!)<ul><li>&ldquo;Retire the mailing list and make all decisions on zulip&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/649>compiler-team#649</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Retire.20the.20mailing.20list.20and.20make.20all.20deci.E2.80.A6.20compiler-team.23649>Zulip</a>)</li><li>&ldquo;Add <code>$message_type</code> field to distinguish json diagnostic outputs&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/673>compiler-team#673</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/.20Add.20.60type.60.20field.20to.20json.20diagnostic.20outp.E2.80.A6.20compiler-team.23673>Zulip</a>)</li><li>&ldquo;Stabilize <code>--json=unused-externs(-silent)</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/674>compiler-team#674</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Stabilize.20.60--json.3Dunused-externs.28-silent.29.60.20compiler-team.23674>Zulip</a>)</li><li>&ldquo;Tracking issue for dyn upcasting coercion&rdquo; <a href=https://github.com/rust-lang/rust/issues/65991>rust#65991</a></li><li>&ldquo;Support overriding <code>warnings</code> level for a specific lint via command line&rdquo; <a href=https://github.com/rust-lang/rust/pull/113307>rust#113307</a></li><li>&ldquo;Update Windows platform support&rdquo; <a href=https://github.com/rust-lang/rust/pull/115141>rust#115141</a></li><li>&ldquo;make soft_unstable show up in future breakage reports&rdquo; <a href=https://github.com/rust-lang/rust/pull/116274>rust#116274</a></li><li>&ldquo;Remove support for compiler plugins.&rdquo; <a href=https://github.com/rust-lang/rust/pull/116412>rust#116412</a></li></ul></li><li>Things in FCP (make sure you&rsquo;re good with it)<ul><li>&ldquo;Add a blanket flag to enable/disable codegen UB checks&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/625>compiler-team#625</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20blanket.20flag.20to.20enable.2Fdisable.20code.E2.80.A6.20compiler-team.23625>Zulip</a>)</li><li>&ldquo;Report all lints, even if other errors already occurred.&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/633>compiler-team#633</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Report.20all.20lints.2C.20even.20if.20other.20errors.20al.E2.80.A6.20compiler-team.23633>Zulip</a>)</li><li>&ldquo;Add infrastructure to &ldquo;compute the ABI of a Rust type, described as a C type&rdquo;&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/672>compiler-team#672</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20infrastructure.20to.20.22compute.20the.20ABI.20of.E2.80.A6.20compiler-team.23672>Zulip</a>)</li><li>&ldquo;Stabilize <code>--json=unused-externs(-silent)</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/674>compiler-team#674</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Stabilize.20.60--json.3Dunused-externs.28-silent.29.60.20compiler-team.23674>Zulip</a>)</li><li>&ldquo;Have <code>rustc</code> produce a local log of execution metrics&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/679>compiler-team#679</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Have.20.60rustc.60.20produce.20a.20local.20log.20of.20execu.E2.80.A6.20compiler-team.23679>Zulip</a>)</li><li>&ldquo;Enable Parallel Rustc Front End In Nightly Builds&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/681>compiler-team#681</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Enable.20Parallel.20Rustc.20Front.20End.20In.20Nightl.E2.80.A6.20compiler-team.23681>Zulip</a>)</li></ul></li><li>Accepted MCPs<ul><li>&ldquo;Simplify and improve explicitness of the check-cfg syntax&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/636>compiler-team#636</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Simplify.20and.20improve.20explicitness.20of.20the.20.E2.80.A6.20compiler-team.23636>Zulip</a>)</li></ul></li><li>Finalized FCPs (disposition merge)<ul><li>&ldquo;rustdoc: hide <code>#[repr(transparent)]</code> if it isn&rsquo;t part of the public ABI&rdquo; <a href=https://github.com/rust-lang/rust/pull/115439>rust#115439</a></li><li>&ldquo;const-eval: make misalignment a hard error&rdquo; <a href=https://github.com/rust-lang/rust/pull/115524>rust#115524</a></li><li>&ldquo;const_eval: allow function pointer signatures containing &amp;mut T in const contexts&rdquo; <a href=https://github.com/rust-lang/rust/pull/116015>rust#116015</a></li><li>&ldquo;Bump <code>COINDUCTIVE_OVERLAP_IN_COHERENCE</code> to deny + warn in deps&rdquo; <a href=https://github.com/rust-lang/rust/pull/116493>rust#116493</a></li></ul></li></ul><h3 id=wg-checkins>WG checkins</h3><ul><li>@<em><em>T-rust-analyzer</em> by @</em><strong>Lukas Wirth</strong> (<a href=https://hackmd.io/CG_A-TBVTBqsH_mfID3Fvg#WG-checkins>https://hackmd.io/CG_A-TBVTBqsH_mfID3Fvg#WG-checkins</a>)<blockquote><p>taking some time off</p></blockquote></li></ul><h2 id=backport-nominations>Backport nominations</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-compiler">T-compiler stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-compiler">T-compiler beta</a></p><ul><li>:beta: &ldquo;Fix a performance regression in obligation deduplication.&rdquo; <a href=https://github.com/rust-lang/rust/pull/116826>rust#116826</a><ul><li>authored by @<strong>nnethercote</strong></li><li>Fixes #116780 #116797, noteworthy perf. regressions</li></ul></li></ul><ul><li>:beta: &ldquo;Make <code>#[repr(Rust)]</code> and <code>#[repr(C)]</code> incompatible with one another&rdquo; <a href=https://github.com/rust-lang/rust/pull/116829>rust#116829</a><ul><li>authored by @<strong>León Orell Liehr (fmease)</strong></li><li>Fixes <a href=https://github.com/rust-lang/rust/issues/116825>#116825</a>, where rustc didn&rsquo;t reject an incorrect <code>[repr(C, Rust)]</code> block.</li><li>T-lang ok&rsquo;d these changes (<a href=https://github.com/rust-lang/rust/pull/116829#issuecomment-1768618240>comment</a>)</li></ul></li></ul><ul><li>:beta: &ldquo;Update to LLVM 17.0.3&rdquo; <a href=https://github.com/rust-lang/rust/pull/116840>rust#116840</a><ul><li>authored by @<strong>Nikita Popov</strong></li><li>Fixes <a href=https://github.com/rust-lang/rust/issues/116582>#116582</a> (unsoundness) and <a href=https://github.com/rust-lang/rust/issues/104862>#104862</a> (miscompilation), introduced with LLVM 17 upgrade</li></ul></li></ul><ul><li>:beta: &ldquo;Disable effects in libcore again&rdquo; <a href=https://github.com/rust-lang/rust/pull/116856>rust#116856</a><ul><li>authored by @<strong>oli</strong></li><li>reverts <a href=https://github.com/rust-lang/rust/pull/114776>#114776</a>, accidentally enabled libcore without feature gate</li></ul></li></ul><ul><li>:beta: &ldquo;revert #114586&rdquo; <a href=https://github.com/rust-lang/rust/pull/116879>rust#116879</a><ul><li>authored by @<strong>aliemjay</strong></li><li>reverts <a href=https://github.com/rust-lang/rust/pull/114586>rust#114586</a></li><li>fixes <a href=https://github.com/rust-lang/rust/issues/116877>rust#116877</a>, #116684 fixes #114586 (<a href=https://github.com/rust-lang/rust/pull/114586#issuecomment-1751967321>comment</a>), (all pretty high prio. regressions)</li></ul></li></ul><ul><li>No stable nominations for <code>T-compiler</code> this time.</li></ul><h2 id=prs-s-waiting-on-team>PRs S-waiting-on-team</h2><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p><ul><li>Other issues <a href=https://hackmd.io/XYr1BrOWSiqCrl8RCWXRaQ>in progress or waiting on other teams</a></li></ul><h2 id=issues-of-note>Issues of Note</h2><h3 id=short-summary>Short Summary</h3><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical">0 T-compiler P-critical issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical+no%3Aassignee">0 of those are unassigned</a></li></ul></li><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high">60 T-compiler P-high issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high+no%3Aassignee">33 of those are unassigned</a></li></ul></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-beta>0 P-critical, 0 P-high, 1 P-medium, 1 P-low regression-from-stable-to-beta</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-nightly>1 P-critical, 1 P-high, 2 P-medium, 2 P-low regression-from-stable-to-nightly</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-stable>0 P-critical, 40 P-high, 100 P-medium, 19 P-low regression-from-stable-to-stable</a></li></ul><h3 id=p-critical>P-critical</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-compiler">T-compiler</a></p><ul><li>No <code>P-critical</code> issues for <code>T-compiler</code> this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-types">T-types</a></p><ul><li>&ldquo;regression when relating two opaque types in canonical queries&rdquo; <a href=https://github.com/rust-lang/rust/issues/116877>rust#116877</a><ul><li>That will be closed by the beta backport of #116879</li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-rustdoc">T-rustdoc</a></p><ul><li>No <code>P-critical</code> issues for <code>T-rustdoc</code> this time.</li></ul><h3 id=p-high-regressions>P-high regressions</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-beta+label%3AP-high+-label%3AT-infra+-label%3AT-libs+-label%3AT-libs-api+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">P-high beta regressions</a></p><ul><li>No <code>P-high</code> beta regressions this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-nightly+label%3AP-high+no%3Aassignee+-label%3AT-infra+-label%3AT-libs+-label%3AT-libs-api+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core+">Unassigned P-high nightly regressions</a></p><ul><li>No unassigned <code>P-high</code> nightly regressions this time.</li></ul><h2 id=performance-logs>Performance logs</h2><blockquote><p><a href=https://github.com/rust-lang/rustc-perf/blob/master/triage/2023-10-18.md>triage logs for 2023-10-18</a></p></blockquote><p>Overall an interesting week performance wise, with small improvements to a vast
number of benchmarks seeming to outweigh an isolated set of (slightly) larger
regressions. It included a number of PRs regressed instruction counts but did
not matter for cycle times, plus one mysterious regression to <code>check_match</code> and
<code>mir_borrowck</code> from reworking constructor splitting (see report on PR 116391 for
details), and an awesome broad set of improvements from automatically inlining
small functions across crates (see report on PR 116505 for details).</p><p>Triage done by <strong>@pnkfelix</strong>.
Revision range: <a href="https://perf.rust-lang.org/?start=84d44dd1d8ec1e98fff94272ba4f96b2a1f044ca&amp;end=b9832e72c9223f4e96049aa5911effd258b92591&amp;absolute=false&amp;stat=instructions%3Au">84d44dd1..b9832e72</a></p><p><strong>Summary</strong>:</p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>3.0%</td><td style=text-align:center>[0.3%, 12.2%]</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.3%, 1.2%]</td><td style=text-align:center>15</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-1.1%</td><td style=text-align:center>[-17.9%, -0.2%]</td><td style=text-align:center>131</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-2.4%</td><td style=text-align:center>[-39.6%, -0.2%]</td><td style=text-align:center>121</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.9%</td><td style=text-align:center>[-17.9%, 12.2%]</td><td style=text-align:center>138</td></tr></tbody></table><p>4 Regressions, 1 Improvements, 4 Mixed; 3 of them in rollups
84 artifact comparisons made in total
30 Untriaged Pull Requests</p><h4 id=regressions>Regressions</h4><p>Rollup of 7 pull requests <a href=https://github.com/rust-lang/rust/pull/116605>#116605</a> <a href="https://perf.rust-lang.org/compare.html?start=5b88d659f8c2428536589d4bd36b9099d53a6815&amp;end=c30b28bdc17f1da73515afa0886f0d4f55c76e1f&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>[0.2%, 0.6%]</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.3%, 0.4%]</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>[0.2%, 0.6%]</td><td style=text-align:center>7</td></tr></tbody></table><ul><li>solely rustdoc regression</li><li>believed to be caused by <a href=https://github.com/rust-lang/rust/pull/109422>PR 109422</a> &ldquo;rustdoc-search: add impl disambiguator to duplicate assoc items&rdquo;</li><li>already marked as triaged</li></ul><p>Optimize <code>librustc_driver.so</code> with BOLT <a href=https://github.com/rust-lang/rust/pull/116352>#116352</a> <a href="https://perf.rust-lang.org/compare.html?start=ee8c9d3c34719a129f280cd91ba5d324017bb02b&amp;end=c543b6f3516767150af84d94c14a27b19d4b0291&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>2.3%</td><td style=text-align:center>[0.2%, 5.7%]</td><td style=text-align:center>10</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>1.9%</td><td style=text-align:center>[0.3%, 5.0%]</td><td style=text-align:center>60</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.3%, -0.3%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>2.3%</td><td style=text-align:center>[0.2%, 5.7%]</td><td style=text-align:center>10</td></tr></tbody></table><ul><li>primary instruction-count regressions were restricted to helloworld and html5ever</li><li>As noted in comment by Kobzol, the instruction counts regressed for many benchmarks, but the <a href="https://perf.rust-lang.org/compare.html?start=ee8c9d3c34719a129f280cd91ba5d324017bb02b&amp;end=c543b6f3516767150af84d94c14a27b19d4b0291&amp;stat=cycles:u">cycle counts</a> solely improved, significantly so, and bootstrap time improved (628.052s -> 623.517s (-0.72%)).</li><li>already marked as triaged</li></ul><p>Rollup of 3 pull requests <a href=https://github.com/rust-lang/rust/pull/116742>#116742</a> <a href="https://perf.rust-lang.org/compare.html?start=c543b6f3516767150af84d94c14a27b19d4b0291&amp;end=e292fec36880f48101bda4054be37097312e73c0&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.3%, 0.4%]</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.3%, 0.4%]</td><td style=text-align:center>3</td></tr></tbody></table><ul><li>Regressions are solely to bitmaps full scenarios.</li><li>Looks like a blip (i.e. noise) based on the graph over time.</li><li>marking as triaged.</li></ul><p>don&rsquo;t UB on dangling ptr deref, instead check inbounds on projections <a href=https://github.com/rust-lang/rust/pull/114330>#114330</a> <a href="https://perf.rust-lang.org/compare.html?start=a00c09e9d80b763fb29206b47b04e1d99c3ace96&amp;end=e7bdc5f9f869219e8d20060b42a09ea10a837851&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.5%, 1.0%]</td><td style=text-align:center>17</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr></tbody></table><ul><li>From skimming the PR, one can see that the PR author (RalfJung) iterated on this to identify a solution that would minimize regressions.</li><li>As noted by the PR author, only secondary benchmarks were affected.</li><li>Also, while instruction-counts regressed, the <a href="https://perf.rust-lang.org/compare.html?start=a00c09e9d80b763fb29206b47b04e1d99c3ace96&amp;end=e7bdc5f9f869219e8d20060b42a09ea10a837851&amp;stat=cycles%3Au">cycle-counts</a>
did not, at least not enough to pass our noise threshold.</li><li>marking as triaged.</li></ul><h4 id=improvements>Improvements</h4><p>optimize zipping over array iterators <a href=https://github.com/rust-lang/rust/pull/115515>#115515</a> <a href="https://perf.rust-lang.org/compare.html?start=e292fec36880f48101bda4054be37097312e73c0&amp;end=0d410be23c45e2f3567a6ec35985f690473f9176&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.4%, -0.2%]</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.4%, -0.2%]</td><td style=text-align:center>3</td></tr></tbody></table><ul><li>A small win from a PR addressing user-filed performance regression, namely <a href=https://github.com/rust-lang/rust/issues/115339>issue #115339</a>, &ldquo;Performance regression of array::IntoIter vs slice::Iter&rdquo;</li></ul><h4 id=mixed>Mixed</h4><p>Also consider call and yield as MIR SSA. <a href=https://github.com/rust-lang/rust/pull/113915>#113915</a> <a href="https://perf.rust-lang.org/compare.html?start=c30b28bdc17f1da73515afa0886f0d4f55c76e1f&amp;end=d627cf07ce46d230a93732a4714d16f00df9466b&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>3.9%</td><td style=text-align:center>[3.9%, 3.9%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.1%</td><td style=text-align:center>[0.1%, 0.1%]</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.9%, -0.2%]</td><td style=text-align:center>26</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.6%, -0.3%]</td><td style=text-align:center>5</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.2%</td><td style=text-align:center>[-0.9%, 3.9%]</td><td style=text-align:center>27</td></tr></tbody></table><ul><li>The try perf run had sole primary regression of unicode-normalization-0.1.19 opt-full (1.19%), while the perf run against master had sole primary regression of exa-0.10.1 opt-full (3.90%).</li><li>The exa regression has persisted forward (i.e. it is not transient noise).</li><li>It was already been marked as triaged, as the performance changes were deemed a wash, apart from object code sizes which saw &ldquo;small but clear&rdquo; improvement.</li></ul><p>Rollup of 5 pull requests <a href=https://github.com/rust-lang/rust/pull/116640>#116640</a> <a href="https://perf.rust-lang.org/compare.html?start=c1691db366c0f2e2341c60377c248ca2d9335076&amp;end=475c71da0710fd1d40c046f9cee04b733b5b2b51&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>1.1%</td><td style=text-align:center>[1.1%, 1.1%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.4%, -0.2%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.5%, -0.4%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.4%, -0.2%]</td><td style=text-align:center>4</td></tr></tbody></table><ul><li>sole regression was to secondary benchmark coercions debug incr-patched: add static arr item</li><li>Looks like a blip (i.e. noise) based on the graph over time.</li><li>marking as triaged</li></ul><p>exhaustiveness: Rework constructor splitting <a href=https://github.com/rust-lang/rust/pull/116391>#116391</a> <a href="https://perf.rust-lang.org/compare.html?start=df4379b4eb5357263f0cf75475953f9b5c48c31f&amp;end=e20cb7702117f1ad8127a16406ba9edd230c4f65&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[0.2%, 0.3%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>3.9%</td><td style=text-align:center>[0.5%, 5.8%]</td><td style=text-align:center>9</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.4%, -0.4%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.1%</td><td style=text-align:center>[-0.4%, 0.3%]</td><td style=text-align:center>5</td></tr></tbody></table><ul><li>the primary regressions were to cranelift-codegen-0.82.1 and cargo-0.60.0 in various incremental settings (mostly check builds)</li><li>the large (>5%) secondary regressions are all to match-stress.</li><li>the above cases were regressions for instruction-counts, but the cycle-counts didn&rsquo;t get marked as regressed in <em>any</em> of the same cases.</li><li>in all cases, the performance loss from these regressions was subsequently recovered (or masked) by <a href=https://github.com/rust-lang/rust/pull/116505>PR 116505</a> &ldquo;Automatically enable cross-crate inlining for small functions&rdquo;.
(I don&rsquo;t know if that&rsquo;s actually related or just an awesome change that bought so much performance that it masked this problem).</li><li>Since the match-stress one was relatively large, I looked at the
self-profile results in the <a href="https://perf.rust-lang.org/detailed-query.html?commit=e20cb7702117f1ad8127a16406ba9edd230c4f65&amp;benchmark=match-stress-check&amp;scenario=full&amp;base_commit=df4379b4eb5357263f0cf75475953f9b5c48c31f">details</a>
which indicates a change in the delta(time) for match-stress might be due to new overheads in <code>check_match</code> and <code>mir_borrowck</code>.</li><li>But this is strange; I cannot tell how this PR could have affected codegen, which would be the only way I could imagine those functions being impacted.</li><li>Not marking as triaged for now; this mystery might be worth looking into a bit more. (But then again, the only significant regression was to a secondary stress test, so maybe its not worth spending time on.)</li></ul><p>Automatically enable cross-crate inlining for small functions <a href=https://github.com/rust-lang/rust/pull/116505>#116505</a> <a href="https://perf.rust-lang.org/compare.html?start=ca89f732ec0f910fc92111a45dd7e6829baa9d4b&amp;end=5d5edf0248d967baa6ac5cbea09b91c7c9947942&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>2.3%</td><td style=text-align:center>[0.3%, 13.0%]</td><td style=text-align:center>8</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>[0.2%, 0.8%]</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-1.2%</td><td style=text-align:center>[-18.1%, -0.1%]</td><td style=text-align:center>148</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-2.2%</td><td style=text-align:center>[-39.8%, -0.2%]</td><td style=text-align:center>209</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-1.0%</td><td style=text-align:center>[-18.1%, 13.0%]</td><td style=text-align:center>156</td></tr></tbody></table><ul><li>Already marked as triaged</li><li>This was clearly awesome and amazing (all the more amazing if you review the history)</li><li>&lsquo;Nuff said.</li></ul><h2 id=nominated-issues>Nominated Issues</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-compiler-nominated">T-compiler</a></p><ul><li>&ldquo;Code no longer compiles after -Zdrop-tracking-mir was enabled by default&rdquo; <a href=https://github.com/rust-lang/rust/issues/116242>rust#116242</a><ul><li>waiting for the crater run results. See <a href=https://github.com/rust-lang/rust/issues/116242#issuecomment-1759715052>comment</a></li><li>(@<strong>apiraino</strong> looked for the results but didn&rsquo;t find them)</li></ul></li></ul><p><a href="https://github.com/rust-lang/rfcs/issues?q=is%3Aopen+label%3AI-compiler-nominated">RFC</a></p><ul><li>No I-compiler-nominated RFCs this time.</li></ul><h3 id=oldest-prs-waiting-for-review>Oldest PRs waiting for review</h3><ul><li>&ldquo;Save liveness results for DestinationPropagation&rdquo; <a href=https://github.com/rust-lang/rust/pull/115291>rust#115291</a><ul><li>cc @<strong>Jak{e,ob} Degen</strong></li></ul></li><li>&ldquo;Fix duplicated crate keyword in suggested path&rdquo; <a href=https://github.com/rust-lang/rust/pull/115876>rust#115876</a> (last review activity: about 28 days ago)<ul><li>cc @<strong>Esteban Küber</strong>, roll this one off your dish?</li></ul></li><li>&ldquo;Introduce <code>-C instrument-coverage=branch</code> to gate branch coverage&rdquo; <a href=https://github.com/rust-lang/rust/pull/116094>rust#116094</a> (last review activity: about 25 days ago)<ul><li>cc @<strong>Wesley Wiser</strong>, roll this one off your dish?</li></ul></li></ul><h2 id=next-weeks-wg-checkins>Next week&rsquo;s WG checkins</h2><ul><li>@_<em>WG-diagnostics</em> by @<strong>Esteban Küber</strong> and @<strong>oli</strong></li><li>@_<em>WG-rustc-dev-guide</em> by @<strong>Santiago Pastorino</strong> and @<strong>Yuki Okushi|217081</strong></li></ul><p>Next meetings&rsquo; agenda draft: <a href=https://hackmd.io/I7BHh5YMReC2jAyhFwUwSQ>hackmd link</a></p></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#announcements>Announcements</a><ul><li><a href=#other-wg-meetings-calendar-linkhttpscalendargooglecomcalendarembedsrc6u5rrtce6lrtv07pfi3damgjus40groupcalendargooglecom>Other WG meetings (<a href="https://calendar.google.com/calendar/embed?src=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com">calendar link</a>)</a></li></ul></li><li><a href=#mcpsfcps>MCPs/FCPs</a><ul><li><a href=#wg-checkins>WG checkins</a></li></ul></li><li><a href=#backport-nominations>Backport nominations</a></li><li><a href=#prs-s-waiting-on-team>PRs S-waiting-on-team</a></li><li><a href=#issues-of-note>Issues of Note</a><ul><li><a href=#short-summary>Short Summary</a></li><li><a href=#p-critical>P-critical</a></li><li><a href=#p-high-regressions>P-high regressions</a></li></ul></li><li><a href=#performance-logs>Performance logs</a><ul><li></li></ul></li><li><a href=#nominated-issues>Nominated Issues</a><ul><li><a href=#oldest-prs-waiting-for-review>Oldest PRs waiting for review</a></li></ul></li><li><a href=#next-weeks-wg-checkins>Next week&rsquo;s WG checkins</a></li></ul></nav></aside></main></body></html>