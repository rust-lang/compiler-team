<!doctype html><html lang=en><head><meta http-equiv=refresh content="0; url=https://forge.rust-lang.org/compiler/index.html"></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://rust-lang.github.io/compiler-team/>Rust Lang - Compiler Team</a></h2><style>nav ul a[href$=\2f compiler-team\2fminutes\2ftriage-meeting\2fT-compiler-Meeting-Agenda-2023-06-08\2f ]{color:#004ed0}</style><ul><li><p><strong>About</strong></p><ul><li><a href=/compiler-team/about/CODE_OF_CONDUCT/>Code of Conduct</a></li><li><a href=/compiler-team/about/chat-platform/>Chat Platform</a></li><li><a href=/compiler-team/about/steering-meeting/>Steering Meeting</a></li><li><a href=/compiler-team/about/triage-meeting/>Triage Meeting</a></li></ul></li><li><p><strong>Minutes</strong></p><ul><li><a href=/compiler-team/minutes/design-meeting/>Design Meetings</a></li><li><a href=/compiler-team/minutes/steering-meeting/>Steering Meetings</a></li><li><a href=/compiler-team/minutes/triage-meeting/>Triage Meetings</a></li></ul></li><li><p><strong>Procedures</strong></p><ul><li><a href=/compiler-team/procedures/>Documentation</a></li><li><a href=/compiler-team/procedures/crates/>Crates</a></li><li><a href=/compiler-team/procedures/call-for-participation/>Call for participation</a></li><li><a href=/compiler-team/procedures/form-new-working-group/>Form new working group</a></li></ul></li><li><p><a href=/compiler-team/working-groups/><strong>Working Groups</strong></a></p><ul><li><a href=/compiler-team/working-groups/async-await/>Async Await</a></li><li><a href=/compiler-team/working-groups/debugging/>Debugging</a></li><li><a href=/compiler-team/working-groups/diagnostics/>Diagnostics</a></li><li><a href=/compiler-team/working-groups/rustc-dev-guide/>Rustc Dev Guide</a></li><li><a href=/compiler-team/working-groups/llvm/>LLVM</a></li><li><a href=/compiler-team/working-groups/meta/>Meta</a></li><li><a href=/compiler-team/working-groups/mir-opt/>MIR-opt</a></li><li><a href=/compiler-team/working-groups/nll/>NLL</a></li><li><a href=/compiler-team/working-groups/parallel-rustc/>parallel rustc</a></li><li><a href=/compiler-team/working-groups/pgo/>PGO</a></li><li><a href=/compiler-team/working-groups/pipelining/>pipelining</a></li><li><a href=/compiler-team/working-groups/polonius/>polonius</a></li><li><a href=/compiler-team/working-groups/polymorphization/>polymorphization</a></li><li><a href=/compiler-team/working-groups/prioritization/>Prioritization</a></li><li><a href=/compiler-team/working-groups/rfc-2229/>rfc-2229</a></li><li><a href=/compiler-team/working-groups/rls-2.0/>rls-2.0</a></li><li><a href=/compiler-team/working-groups/self-profile/>Self Profile</a></li><li><a href=/compiler-team/working-groups/traits/>Traits</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/compiler-team/svg/menu.svg alt=Menu>
</label><strong>T Compiler Meeting Agenda 2023 06 08</strong></header><article class=markdown><h1 id=t-compiler-meeting-agenda-2023-06-08>T-compiler Meeting Agenda 2023-06-08</h1><h2 id=announcements>Announcements</h2><ul><li><a href="https://www.google.com/calendar/event?eid=N211N3RrYzVqcnVvNnBycGFrcW9mcjNocTNfMjAyMzA2MDhUMTYwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">wg-async reading club: Iterator, Generator</a> at <a href=time:2023-06-08T12:00:00-04:00>time:2023-06-08T12:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=MTg3MDhpdTc3YXBqMGMzbnNxanUwdWZnazhfMjAyMzA2MTJUMTQwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Types team meeting</a> at <a href=time:2023-06-12T10:00:00-04:00>time:2023-06-12T10:00:00-04:00</a></li><li>Types Team retro survey: <a href=https://forms.gle/tyiquzq7Kwnz4H2G7>https://forms.gle/tyiquzq7Kwnz4H2G7</a> (cc: @<strong>Jack Huey</strong>)</li><li>Reminder: if you see a PR/issue that seems like there might be legal implications due to copyright/IP/etc, please let the Core team know (or at least message @<em><strong>pnkfelix</strong> or @</em><strong>Wesley Wiser</strong> so we can pass it along).<ul><li>PR #112235 nominated for T-compiler meeting</li></ul></li></ul><h3 id=other-wg-meetings-calendar-linkhttpscalendargooglecomcalendarembedsrc6u5rrtce6lrtv07pfi3damgjus40groupcalendargooglecom>Other WG meetings (<a href="https://calendar.google.com/calendar/embed?src=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com">calendar link</a>)</h3><ul><li><a href="https://www.google.com/calendar/event?eid=MXJnbzBscDExNHJjNmVsdGhsaW8xcDljMmdfMjAyMzA2MTJUMTUwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">wg-rls-2.0 weekly sync-up</a> at <a href=time:2023-06-12T11:00:00-04:00>time:2023-06-12T11:00:00-04:00</a></li></ul><h2 id=mcpsfcps>MCPs/FCPs</h2><ul><li>New MCPs (take a look, see if you like them!)<ul><li>&ldquo;Simplify and improve explicitness of the check-cfg syntax&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/636>compiler-team#636</a></li></ul></li><li>Old MCPs (stale MCP might be closed as per <a href=https://forge.rust-lang.org/compiler/mcp.html#when-should-major-change-proposals-be-closed>MCP procedure</a>)<ul><li>None at this time</li></ul></li><li>Old MCPs (not seconded, take a look)<ul><li>&ldquo;Disallow incoherent cfgs&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/610>compiler-team#610</a> (last review activity: about 53 days ago)</li><li>&ldquo;2024: Decrease debuginfo generated by <code>-Cdebuginfo=1</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/613>compiler-team#613</a> (last review activity: about 46 days ago)</li><li>&ldquo;Cell Broadband Engine SPU support&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/614>compiler-team#614</a> (last review activity: about 53 days ago)</li><li>&ldquo;Revise error code documentation standard&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/615>compiler-team#615</a> (last review activity: about 46 days ago)</li><li>&ldquo;Runtime checks for occupied niches&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/624>compiler-team#624</a> (last review activity: about 11 days ago)</li><li>&ldquo;Add support for Zephyr OS&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/629>compiler-team#629</a> (last review activity: about 11 days ago)</li><li>&ldquo;Add <code>mips64r6</code> option to <code>target_arch</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/632>compiler-team#632</a> (last review activity: about 11 days ago)</li><li>&ldquo;Consistently use &ldquo;region&rdquo; terminology in later stages of the compiler&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/634>compiler-team#634</a> (last review activity: about 11 days ago)</li><li>&ldquo;Add a new <code>--build-id</code> flag to rustc&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/635>compiler-team#635</a> (last review activity: about 11 days ago)</li></ul></li><li>Pending FCP requests (check your boxes!)<ul><li>No pending FCP requests this time.</li></ul></li><li>Things in FCP (make sure you&rsquo;re good with it)<ul><li>&ldquo;Take MIR <code>Analysis</code> by <code>&amp;mut</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/598>compiler-team#598</a></li><li>&ldquo;Add a blanket flag to enable/disable codegen UB checks&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/625>compiler-team#625</a></li><li>&ldquo;Report all lints, even if other errors already occurred.&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/633>compiler-team#633</a></li></ul></li><li>Accepted MCPs<ul><li>&ldquo;Tier 3 target proposal: bare-metal loongarch64&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/628>compiler-team#628</a></li></ul></li><li>Finalized FCPs (disposition merge)<ul><li>&ldquo;Make pointer_structural_match normal and warn&rdquo; <a href=https://github.com/rust-lang/rust/pull/110166>rust#110166</a></li><li>&ldquo;rustdoc: Add search result item types after their name&rdquo; <a href=https://github.com/rust-lang/rust/pull/110688>rust#110688</a></li><li>&ldquo;[mir-opt] SimplifyLocals should also clean up debuginfo&rdquo; <a href=https://github.com/rust-lang/rust/pull/110702>rust#110702</a></li><li>&ldquo;Stabilize inline asm for LoongArch64&rdquo; <a href=https://github.com/rust-lang/rust/pull/111235>rust#111235</a></li><li>&ldquo;Uplift <code>clippy::undropped_manually_drops</code> lint&rdquo; <a href=https://github.com/rust-lang/rust/pull/111530>rust#111530</a></li><li>&ldquo;Uplift <code>clippy::invalid_utf8_in_unchecked</code> lint&rdquo; <a href=https://github.com/rust-lang/rust/pull/111543>rust#111543</a></li><li>&ldquo;Uplift <code>clippy::cast_ref_to_mut</code> lint&rdquo; <a href=https://github.com/rust-lang/rust/pull/111567>rust#111567</a></li><li>&ldquo;Uplift <code>clippy::fn_null_check</code> lint&rdquo; <a href=https://github.com/rust-lang/rust/pull/111717>rust#111717</a></li><li>&ldquo;Uplift <code>clippy::cmp_nan</code> lint&rdquo; <a href=https://github.com/rust-lang/rust/pull/111818>rust#111818</a></li></ul></li></ul><h3 id=wg-checkins>WG checkins</h3><ul><li><p>@_<em>WG-polymorphization</em> by @<strong>davidtwco</strong> (<a href=https://hackmd.io/Yzsoivx9RrCD-uf2o_LIIw#WG-checkins>previous checkin</a>):</p><blockquote><p>Checkin text</p></blockquote></li><li><p>@_<em>WG-rls2.0</em> by @<strong>Lukas Wirth</strong> (<a href=https://hackmd.io/KZoEURJsQPaQtTg0gyHnIg#WG-checkins>previous checkin</a>):</p><blockquote><p>We actually noticed an interesting issue. rust-analyzer now depends on the rustc_abi crate for layout calculations (required for const eval and as well as some IDE features). It is important for this crate as our dependency to be in sync with the current toolchain such that we don&rsquo;t analysize things incorrectly depending on the layout that would mismatch what the current rustc thinks. The problem here is, that upstream rust-analyzer usually targets the latest stable rust for which we can be in sync manually on the master branch, but the problem arises when considering the rustup component now. Our subtree syncs target the latest rust-analyzer master branch which targets the latest released stable, and as such any beta branches (and therefore future stable releases) will sometimes be guruanteed to mismatch. We aren&rsquo;t sure how to tackle this problem yet unfortunately (this is very similar to the proc-macro abi problems we had in the past intersetingly enough), related tracking issue <a href=https://github.com/rust-lang/rust-analyzer/issues/14846>https://github.com/rust-lang/rust-analyzer/issues/14846</a></p></blockquote></li></ul><h2 id=backport-nominations>Backport nominations</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-compiler">T-compiler stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-compiler">T-compiler beta</a></p><ul><li>:beta: [1.71.0] &ldquo;Make struct layout not depend on unsizeable tail&rdquo; <a href=https://github.com/rust-lang/rust/pull/112062>rust#112062</a><ul><li><a href=https://rust-lang.zulipchat.com/#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202023-06-01/near/362772106>discussed last week</a>, waiting to have it on nightly</li></ul></li><li>:beta: [1.71.0] &ldquo;Fix type-inference regression in #112225&rdquo; <a href=https://github.com/rust-lang/rust/pull/112266>rust#112266</a><ul><li>nominated by @<strong>Michael Goulet (compiler-errors)</strong></li><li>Fixes #11225 (P-high), issue with type inference affecting a few crates in production</li></ul></li></ul><ul><li>:stable: [1.70.0] &ldquo;Fix type-inference regression in #112225&rdquo; <a href=https://github.com/rust-lang/rust/pull/112266>rust#112266</a></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-rustdoc">T-rustdoc stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-rustdoc">T-rustdoc beta</a></p><ul><li>No beta nominations for <code>T-rustdoc</code> this time.</li><li>No stable nominations for <code>T-rustdoc</code> this time.</li></ul><p>:back: / :shrug: / :hand:</p><h2 id=prs-s-waiting-on-team>PRs S-waiting-on-team</h2><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p><ul><li>Issues <a href=https://hackmd.io/XYr1BrOWSiqCrl8RCWXRaQ>in progress or waiting on other teams</a></li></ul><h3 id=oldest-prs-waiting-for-review>Oldest PRs waiting for review</h3><ul><li>&ldquo;feat: split <code>unsafe_code</code> lint into lint group&rdquo; <a href=https://github.com/rust-lang/rust/pull/108975>rust#108975</a><ul><li>review is assigned to Niko, re-roll?</li></ul></li><li>&ldquo;Take MIR dataflow analyses by mutable reference&rdquo; <a href=https://github.com/rust-lang/rust/pull/108293>rust#108293</a><ul><li>cc: @<strong>eholk</strong></li></ul></li><li>&ldquo;Fixes LTO + build-std + Oz failed to resolve undefined symbols&rdquo; <a href=https://github.com/rust-lang/rust/pull/109821>rust#109821</a> (last review activity: 2 months ago)<ul><li>07-06-2023 cc: @<strong>oli</strong></li></ul></li><li>&ldquo;Validate fluent variable references in tests&rdquo; <a href=https://github.com/rust-lang/rust/pull/111269>rust#111269</a> (last review activity: about 31 days ago)<ul><li>cc @<strong>davidtwco</strong></li></ul></li><li>&ldquo;Implement a global value numbering MIR optimization&rdquo; <a href=https://github.com/rust-lang/rust/pull/109597>rust#109597</a> (last review activity: about 22 days ago)<ul><li>cc: @<strong>Jak{e,ob} Degen</strong> maybe also @<strong>RalfJ</strong> (since participant in the review)</li></ul></li></ul><h2 id=issues-of-note>Issues of Note</h2><h3 id=short-summary>Short Summary</h3><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical">0 T-compiler P-critical issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical+no%3Aassignee">0 of those are unassigned</a></li></ul></li><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high">61 T-compiler P-high issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high+no%3Aassignee">28 of those are unassigned</a></li></ul></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-beta>0 P-critical, 2 P-high, 0 P-medium, 0 P-low regression-from-stable-to-beta</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-nightly>1 P-critical, 0 P-high, 1 P-medium, 2 P-low regression-from-stable-to-nightly</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-stable>0 P-critical, 34 P-high, 97 P-medium, 18 P-low regression-from-stable-to-stable</a></li></ul><h3 id=p-critical>P-critical</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-compiler">T-compiler</a></p><ul><li>No <code>P-critical</code> issues for <code>T-compiler</code> at this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-types">T-types</a></p><ul><li>No <code>P-critical</code> issues for <code>T-types</code> at this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-rustdoc">T-rustdoc</a></p><ul><li>No <code>P-critical</code> issues for <code>T-rustdoc</code> at this time.</li></ul><h3 id=p-high-regressions>P-high regressions</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-beta+label%3AP-high+-label%3AT-infra+-label%3AT-libs+-label%3AT-libs-api+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">P-high beta regressions</a></p><ul><li>no new p-high regressions</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-nightly+label%3AP-high+no%3Aassignee+-label%3AT-infra+-label%3AT-libs+-label%3AT-libs-api+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">Unassigned P-high nightly regressions</a></p><ul><li>No unassigned <code>P-high</code> nightly regressions this time.</li></ul><h2 id=performance-logs>Performance logs</h2><blockquote><p><a href=https://github.com/rust-lang/rustc-perf/blob/b4217101b6ac70a1b68817236217c7ca45fa4da1/triage/2023-06-06.md>triage logs for 2023-06-06</a></p></blockquote><p>This week was a bunch of improvements, largely driven by cutting std debuginfo
in <a href=https://github.com/rust-lang/rust/pull/110221>#110221</a> and a few MIR or codegen optimizations. No pure regressions landed
this week!</p><p>Triage done by <strong>@simulacrum</strong>.
Revision range: <a href="https://perf.rust-lang.org/?start=1221e43bdf413f7c405e9b17ef19d76c88222098&amp;end=adc719d7147d5e2578ce08e0b4504be44650256e&amp;absolute=false&amp;stat=instructions%3Au">1221e43bdf413f7c405e9b17ef19d76c88222098..adc719d7147d5e2578ce08e0b4504be44650256e</a></p><p><strong>Summary</strong>:</p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>[0.3%, 2.0%]</td><td style=text-align:center>11</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>[0.3%, 1.0%]</td><td style=text-align:center>9</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-1.9%</td><td style=text-align:center>[-17.4%, -0.2%]</td><td style=text-align:center>103</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-5.2%</td><td style=text-align:center>[-17.4%, -0.2%]</td><td style=text-align:center>116</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-1.7%</td><td style=text-align:center>[-17.4%, 2.0%]</td><td style=text-align:center>114</td></tr></tbody></table><p>0 Regressions, 1 Improvements, 12 Mixed; 2 of them in rollups
79 artifact comparisons made in total</p><h4 id=regressions>Regressions</h4><p>No regressions this week.</p><h4 id=improvements>Improvements</h4><p>Greatly decrease the size of <code>rustc_driver.so</code> when debuginfo is enabled <a href=https://github.com/rust-lang/rust/pull/110221>#110221</a> <a href="https://perf.rust-lang.org/compare.html?start=51f714c8c5021fe25442e46798b1cbef2f2249ed&amp;end=42f28f9eb41adb7a197697e5e2d6535d00fd0f4a&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-8.8%</td><td style=text-align:center>[-17.6%, -0.5%]</td><td style=text-align:center>17</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-7.5%</td><td style=text-align:center>[-17.2%, -0.2%]</td><td style=text-align:center>72</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-8.8%</td><td style=text-align:center>[-17.6%, -0.5%]</td><td style=text-align:center>17</td></tr></tbody></table><p>This PR compresses and cuts some debuginfo from the shipped std library,
somewhat unintentionally. This might be something we roll back if we get
regression reports about it - not clear whether this changes behavior in a
meaningful way for anyone.</p><h4 id=mixed>Mixed</h4><p>Rollup of 6 pull requests <a href=https://github.com/rust-lang/rust/pull/112016>#112016</a> <a href="https://perf.rust-lang.org/compare.html?start=786178b2ab79ae471c5efc4e1faa0c83b9151703&amp;end=82b311b4189cce2bde455f3e091ae662a382d592&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>[0.2%, 1.0%]</td><td style=text-align:center>14</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.3%, 0.5%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.7%</td><td style=text-align:center>[-1.1%, -0.3%]</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-0.5%, -0.5%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[-1.1%, 1.0%]</td><td style=text-align:center>16</td></tr></tbody></table><p>Roughly scattered changes, many of which are in high-variance benchmarks.</p><p>Enable MatchBranchSimplification <a href=https://github.com/rust-lang/rust/pull/112001>#112001</a> <a href="https://perf.rust-lang.org/compare.html?start=ddad0576caf8d0515ed453e04b468977c7d3dfc1&amp;end=f59d577838fb0449a2b59ec3525a7fa91509e861&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>[0.3%, 0.7%]</td><td style=text-align:center>5</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>[0.2%, 0.8%]</td><td style=text-align:center>10</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.4%, -0.2%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.3%, -0.3%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[-0.4%, 0.7%]</td><td style=text-align:center>9</td></tr></tbody></table><p>Scattered changes, mostly a wash. Optimization targets particular code patterns
which don&rsquo;t occur that often in rustc most likely.</p><p>MIR: opt-in normalization of <code>BasicBlock</code> and <code>Local</code> numbering <a href=https://github.com/rust-lang/rust/pull/111813>#111813</a> <a href="https://perf.rust-lang.org/compare.html?start=1c53407e8c7cc922d718bde61ca34f47b6d2120f&amp;end=089677eb32af83318467325edbef9b64053df532&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.3%, 0.3%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.3%, 1.2%]</td><td style=text-align:center>8</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-1.0%</td><td style=text-align:center>[-1.5%, -0.3%]</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.3%, 0.3%]</td><td style=text-align:center>1</td></tr></tbody></table><p>Mostly noise, probably. The new normalization is off by default.</p><p>Inline derived <code>hash</code> <a href=https://github.com/rust-lang/rust/pull/111963>#111963</a> <a href="https://perf.rust-lang.org/compare.html?start=089677eb32af83318467325edbef9b64053df532&amp;end=f8447b963893b410f1dbce2cd752a898dc3ed8d4&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.3%, 0.3%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>[0.2%, 0.6%]</td><td style=text-align:center>15</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.6%, -0.2%]</td><td style=text-align:center>16</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.7%</td><td style=text-align:center>[-1.4%, -0.3%]</td><td style=text-align:center>21</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.2%</td><td style=text-align:center>[-0.6%, 0.3%]</td><td style=text-align:center>17</td></tr></tbody></table><p>Improvements outweigh regressions.</p><p>Use <code>Cow</code> in <code>{D,Subd}iagnosticMessage</code>. <a href=https://github.com/rust-lang/rust/pull/111748>#111748</a> <a href="https://perf.rust-lang.org/compare.html?start=dc0943d2eebf139e7e509882b803f77bfd25656d&amp;end=70e04bd88d85cab8ed110ace5a278fab106d0ef5&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.6%, 0.8%]</td><td style=text-align:center>5</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-0.8%, -0.3%]</td><td style=text-align:center>10</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr></tbody></table><p>Regressions limited to secondary benchmarks, and a good portion of them are
bimodal benchmarks. No further investigation warranted.</p><p>Make <code>TrustedStep</code> require <code>Copy</code> <a href=https://github.com/rust-lang/rust/pull/112083>#112083</a> <a href="https://perf.rust-lang.org/compare.html?start=45eec0fe931e02932b43b79c51f90050c973c690&amp;end=578bcbc2b42191556c4438b80ba37fafa4193e82&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[0.2%, 0.2%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>[0.2%, 0.7%]</td><td style=text-align:center>5</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-1.1%</td><td style=text-align:center>[-1.1%, -1.1%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-1.2%</td><td style=text-align:center>[-3.5%, -0.4%]</td><td style=text-align:center>13</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-1.1%, 0.2%]</td><td style=text-align:center>2</td></tr></tbody></table><p>Improvements clearly outweigh regressions.</p><p>move <code>super_relate_consts</code> hack to <code>normalize_param_env_or_error</code> <a href=https://github.com/rust-lang/rust/pull/111623>#111623</a> <a href="https://perf.rust-lang.org/compare.html?start=617d3d6d722c432cdcbf210e6db55c3bdeafe381&amp;end=e29821ff85a2a3000d226f99f62f89464028d5d6&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.2%, 0.6%]</td><td style=text-align:center>8</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.3%, -0.2%]</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-2.0%</td><td style=text-align:center>[-2.2%, -2.0%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[-0.3%, 0.6%]</td><td style=text-align:center>10</td></tr></tbody></table><p>Most likely inlining or other codegen changes; roughly neutral change overall.</p><p>Enable ScalarReplacementOfAggregates in optimized builds <a href=https://github.com/rust-lang/rust/pull/112002>#112002</a> <a href="https://perf.rust-lang.org/compare.html?start=fabf9298633ca64450fa2af535252dc44a3b1080&amp;end=642c92e63008ffb49f6ad8344e07bfa7d5b0d9bb&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>[0.2%, 0.9%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.8%</td><td style=text-align:center>[0.3%, 2.3%]</td><td style=text-align:center>15</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.9%, -0.2%]</td><td style=text-align:center>13</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-1.2%</td><td style=text-align:center>[-2.9%, -0.3%]</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.1%</td><td style=text-align:center>[-0.9%, 0.9%]</td><td style=text-align:center>19</td></tr></tbody></table><p>SROA benefits cranelift codegen and has no significant impact on runtimes, so
enabling by default makes sense. It also helps with MatchBranchSimplification,
enabled in a separate PR.</p><p>Enable ConstGoto and SeparateConstSwitch passes by default <a href=https://github.com/rust-lang/rust/pull/112040>#112040</a> <a href="https://perf.rust-lang.org/compare.html?start=642c92e63008ffb49f6ad8344e07bfa7d5b0d9bb&amp;end=789dd0b2a2cd68c129ba9b0aa1008939209adcfd&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>2.6%</td><td style=text-align:center>[2.6%, 2.6%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[0.2%, 0.2%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-1.1%, -0.2%]</td><td style=text-align:center>72</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.8%</td><td style=text-align:center>[-2.0%, -0.2%]</td><td style=text-align:center>33</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-1.1%, 2.6%]</td><td style=text-align:center>73</td></tr></tbody></table><p>More MIR opt enablement &ndash; some regressions here, but improvements are much
more wide-ranging than the regressions.</p><p>Rollup of 7 pull requests <a href=https://github.com/rust-lang/rust/pull/112253>#112253</a> <a href="https://perf.rust-lang.org/compare.html?start=2f5e6bb817c115c067ff47453eb9aa89a0a31358&amp;end=398fa2187c88de46c13c142f600064483a563c86&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>[0.4%, 0.6%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.9%</td><td style=text-align:center>[0.4%, 1.3%]</td><td style=text-align:center>9</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.4%, -0.4%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.4%, -0.2%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>[-0.4%, 0.6%]</td><td style=text-align:center>7</td></tr></tbody></table><p>Possibly just noise/bimodality given benchmarks and lack of significant PRs in
this rollup. Not investigating further.</p><p>Only check inlining counter after recursing. <a href=https://github.com/rust-lang/rust/pull/112240>#112240</a> <a href="https://perf.rust-lang.org/compare.html?start=d8095acb5f8134cbff59b2cc8c8b7f5cec364280&amp;end=9eee230cd0a56bfba3ce65121798d9f9f4341cdd&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[0.1%, 0.3%]</td><td style=text-align:center>5</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.5%, -0.2%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-1.0%, -0.3%]</td><td style=text-align:center>11</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.5%, -0.2%]</td><td style=text-align:center>6</td></tr></tbody></table><p>Changes in inlining, overall a positive despite a few regressions.</p><p>Use <code>load</code>+<code>store</code> instead of <code>memcpy</code> for small integer arrays <a href=https://github.com/rust-lang/rust/pull/111999>#111999</a> <a href="https://perf.rust-lang.org/compare.html?start=adc719d7147d5e2578ce08e0b4504be44650256e&amp;end=fd9bf594366e73efb1a26a023e0b4de8eff82b94&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>2.2%</td><td style=text-align:center>[0.1%, 5.7%]</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.3%, -0.3%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr></tbody></table><p>No clear impact on rustc workloads, but may benefit others.</p><h2 id=nominated-issues>Nominated Issues</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-compiler-nominated">T-compiler</a></p><ul><li>&ldquo;<code>-C split-debuginfo=packed</code> generates duplicate .dwp files for shared objects&rdquo; <a href=https://github.com/rust-lang/rust/issues/109309>rust#109309</a><ul><li>nominated by @<strong>jyn</strong> <a href=https://github.com/rust-lang/rust/issues/109309#issuecomment-1580472504>in comment</a></li></ul></li><li>&ldquo;Port PGO/LTO/BOLT optimized build pipeline to Rust&rdquo; <a href=https://github.com/rust-lang/rust/pull/112235>rust#112235</a><ul><li>nominated by @<strong>pnkfelix</strong> <a href=https://github.com/rust-lang/rust/pull/112235#issuecomment-1579358522>in comment</a></li><li>Zulip discussion <a href=https://rust-lang.zulipchat.com/#narrow/stream/247081-t-compiler.2Fperformance/topic/PGO.2FBOLT.20proposed.20rewrite/near/364034379>at link</a></li></ul></li></ul><p><a href="https://github.com/rust-lang/rfcs/issues?q=is%3Aopen+label%3AI-compiler-nominated">RFC</a></p><ul><li>No I-compiler-nominated RFCs this time.</li></ul><h2 id=next-weeks-wg-checkins>Next week&rsquo;s WG checkins</h2><ul><li>@_<em>WG-self-profile</em> by @<strong>mw</strong> and @<strong>Wesley Wiser</strong></li></ul><p>Agenda draft: <a href=https://hackmd.io/pdK-8nD2TySu6dw2N7cbgw>https://hackmd.io/pdK-8nD2TySu6dw2N7cbgw</a></p></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#announcements>Announcements</a><ul><li><a href=#other-wg-meetings-calendar-linkhttpscalendargooglecomcalendarembedsrc6u5rrtce6lrtv07pfi3damgjus40groupcalendargooglecom>Other WG meetings (<a href="https://calendar.google.com/calendar/embed?src=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com">calendar link</a>)</a></li></ul></li><li><a href=#mcpsfcps>MCPs/FCPs</a><ul><li><a href=#wg-checkins>WG checkins</a></li></ul></li><li><a href=#backport-nominations>Backport nominations</a></li><li><a href=#prs-s-waiting-on-team>PRs S-waiting-on-team</a><ul><li><a href=#oldest-prs-waiting-for-review>Oldest PRs waiting for review</a></li></ul></li><li><a href=#issues-of-note>Issues of Note</a><ul><li><a href=#short-summary>Short Summary</a></li><li><a href=#p-critical>P-critical</a></li><li><a href=#p-high-regressions>P-high regressions</a></li></ul></li><li><a href=#performance-logs>Performance logs</a><ul><li></li></ul></li><li><a href=#nominated-issues>Nominated Issues</a></li><li><a href=#next-weeks-wg-checkins>Next week&rsquo;s WG checkins</a></li></ul></nav></aside></main></body></html>