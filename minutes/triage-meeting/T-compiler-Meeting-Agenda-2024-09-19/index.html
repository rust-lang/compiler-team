<!doctype html><html lang=en><head><meta http-equiv=refresh content="0; url=https://forge.rust-lang.org/compiler/index.html"></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://rust-lang.github.io/compiler-team/>Rust Lang - Compiler Team</a></h2><style>nav ul a[href$=\2f compiler-team\2fminutes\2ftriage-meeting\2fT-compiler-Meeting-Agenda-2024-09-19\2f ]{color:#004ed0}</style><ul><li><p><strong>About</strong></p><ul><li><a href=/compiler-team/about/CODE_OF_CONDUCT/>Code of Conduct</a></li><li><a href=/compiler-team/about/chat-platform/>Chat Platform</a></li><li><a href=/compiler-team/about/steering-meeting/>Steering Meeting</a></li><li><a href=/compiler-team/about/triage-meeting/>Triage Meeting</a></li></ul></li><li><p><strong>Minutes</strong></p><ul><li><a href=/compiler-team/minutes/design-meeting/>Design Meetings</a></li><li><a href=/compiler-team/minutes/steering-meeting/>Steering Meetings</a></li><li><a href=/compiler-team/minutes/triage-meeting/>Triage Meetings</a></li></ul></li><li><p><strong>Procedures</strong></p><ul><li><a href=/compiler-team/procedures/>Documentation</a></li><li><a href=/compiler-team/procedures/crates/>Crates</a></li><li><a href=/compiler-team/procedures/call-for-participation/>Call for participation</a></li><li><a href=/compiler-team/procedures/form-new-working-group/>Form new working group</a></li></ul></li><li><p><a href=/compiler-team/working-groups/><strong>Working Groups</strong></a></p><ul><li><a href=/compiler-team/working-groups/async-await/>Async Await</a></li><li><a href=/compiler-team/working-groups/debugging/>Debugging</a></li><li><a href=/compiler-team/working-groups/diagnostics/>Diagnostics</a></li><li><a href=/compiler-team/working-groups/rustc-dev-guide/>Rustc Dev Guide</a></li><li><a href=/compiler-team/working-groups/llvm/>LLVM</a></li><li><a href=/compiler-team/working-groups/meta/>Meta</a></li><li><a href=/compiler-team/working-groups/mir-opt/>MIR-opt</a></li><li><a href=/compiler-team/working-groups/nll/>NLL</a></li><li><a href=/compiler-team/working-groups/parallel-rustc/>parallel rustc</a></li><li><a href=/compiler-team/working-groups/pgo/>PGO</a></li><li><a href=/compiler-team/working-groups/pipelining/>pipelining</a></li><li><a href=/compiler-team/working-groups/polonius/>polonius</a></li><li><a href=/compiler-team/working-groups/polymorphization/>polymorphization</a></li><li><a href=/compiler-team/working-groups/prioritization/>Prioritization</a></li><li><a href=/compiler-team/working-groups/rfc-2229/>rfc-2229</a></li><li><a href=/compiler-team/working-groups/rls-2.0/>rls-2.0</a></li><li><a href=/compiler-team/working-groups/self-profile/>Self Profile</a></li><li><a href=/compiler-team/working-groups/traits/>Traits</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/compiler-team/svg/menu.svg alt=Menu>
</label><strong>T Compiler Meeting Agenda 2024 09 19</strong></header><article class=markdown><h1 id=t-compiler-meeting-agenda-2024-09-19>T-compiler Meeting Agenda 2024-09-19</h1><h2 id=announcements>Announcements</h2><ul><li>Reminder: if you see a PR/issue that seems like there might be legal implications due to copyright/IP/etc, please let us know (or at least message @<em><strong>davidtwco</strong> or @</em><strong>Wesley Wiser</strong> so we can pass it along).</li></ul><h3 id=other-wg-meetings>Other WG meetings</h3><ul><li>Types Team: ITE (Impl Trait Everywhere) Triage <a href=time:2024-09-19T22:00:00+01:00>time:2024-09-19T22:00:00+01:00</a></li><li>wg-rust-analyzer steering meeting on Zulip (<a href=https://rust-lang.zulipchat.com/#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/Steering.20meeting>https://rust-lang.zulipchat.com/#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/Steering.20meeting</a>) <a href=time:2024-09-20T17:00:00+01:00>time:2024-09-20T17:00:00+01:00</a></li><li>wg-macros triage meeting Zulip (<a href=https://rust-lang.zulipchat.com/#narrow/stream/410876-wg-macros.2Ftriage>https://rust-lang.zulipchat.com/#narrow/stream/410876-wg-macros.2Ftriage</a>) <a href=time:2024-09-20T18:00:00+01:00>time:2024-09-20T18:00:00+01:00</a></li></ul><h2 id=mcpsfcps>MCPs/FCPs</h2><ul><li>New MCPs (take a look, see if you like them!)<ul><li>&ldquo;Make the test cfg a userspace check-cfg&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/785>compiler-team#785</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Make.20the.20test.20cfg.20a.20userspace.20check-cfg.20compiler-team.23785>Zulip</a>)</li></ul></li><li>Old MCPs (not seconded, take a look)<ul><li>&ldquo;Add hygiene attributes to compile expanded source code&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/692>compiler-team#692</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20option.20to.20compile.20expanded.20ASTs.20for.20h.E2.80.A6.20compiler-team.23692>Zulip</a>) (last review activity: about 13 days ago)</li><li>&ldquo;Target families for executable format&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/716>compiler-team#716</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Target.20families.20for.20executable.20format.20compiler-team.23716>Zulip</a>) (last review activity: 7 months ago)</li><li>&ldquo;Add Hotpatch flag&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/745>compiler-team#745</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20Hotpatch.20flag.20compiler-team.23745>Zulip</a>) (last review activity: about 13 days ago)</li><li>&ldquo;Opt-in flag for absolute paths in diagnostics&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/770>compiler-team#770</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Opt-in.20flag.20for.20absolute.20paths.20in.20diagnos.E2.80.A6.20compiler-team.23770>Zulip</a>) (last review activity: about 34 days ago)</li><li>&ldquo;Add <code>evex512</code> target feature for AVX10&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/778>compiler-team#778</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20.60evex512.60.20target.20feature.20for.20AVX10.20compiler-team.23778>Zulip</a>) (last review activity: about 13 days ago)</li></ul></li><li>Pending FCP requests (check your boxes!)<ul><li>&ldquo;Add a new <code>--orchestrator-id</code> flag to rustc&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/635>compiler-team#635</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20new.20.60--build-id.60.20flag.20to.20rustc.20compiler-team.23635>Zulip</a>)</li><li>&ldquo;sanitizers: Stabilize AddressSanitizer and LeakSanitizer for the Tier 1 targets&rdquo; <a href=https://github.com/rust-lang/rust/pull/123617>rust#123617</a></li><li>&ldquo;Add <code>--print host-triple</code> to print host target triple&rdquo; <a href=https://github.com/rust-lang/rust/pull/125579>rust#125579</a></li><li>&ldquo;make unsupported_calling_conventions a hard error&rdquo; <a href=https://github.com/rust-lang/rust/pull/129935>rust#129935</a></li></ul></li><li>Things in FCP (make sure you&rsquo;re good with it)<ul><li>&ldquo;-Z default-visibility option&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/782>compiler-team#782</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/-Z.20default-visibility.20option.20compiler-team.23782>Zulip</a>)</li><li>&ldquo;mark some target features as &lsquo;forbidden&rsquo; so they cannot be (un)set with -Ctarget-feature&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/780>compiler-team#780</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/mark.20some.20target.20features.20as.20.27forbidden.27.20.E2.80.A6.20compiler-team.23780>Zulip</a>)</li><li>&ldquo;Test rule annotations&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/783>compiler-team#783</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Test.20rule.20annotations.20compiler-team.23783>Zulip</a>)</li><li>&ldquo;New Tier-3 target for OpenHarmony on LoongArch64&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/784>compiler-team#784</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/New.20Tier-3.20target.20for.20OpenHarmony.20on.20Loon.E2.80.A6.20compiler-team.23784>Zulip</a>)</li></ul></li><li>Accepted MCPs<ul><li>&ldquo;Don&rsquo;t track <code>--emit=</code> options as part of crate SVH&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/769>compiler-team#769</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Don.27t.20track.20.60--emit.3D.60.20options.20as.20part.20of.20.E2.80.A6.20compiler-team.23769>Zulip</a>)</li><li>&ldquo;<code>--hint-msrv=version</code> option so the compiler can take MSRV into account when linting&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/772>compiler-team#772</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/.60-C.20msrv.3Dversion.60.20option.20so.20the.20compiler.20.E2.80.A6.20compiler-team.23772>Zulip</a>)</li></ul></li><li>MCPs blocked on unresolved concerns<ul><li>&ldquo;Retire the mailing list and make all decisions on zulip&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/649>compiler-team#649</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Retire.20the.20mailing.20list.20and.20make.20all.20deci.E2.80.A6.20compiler-team.23649>Zulip</a>)<ul><li>concern: <a href=https://github.com/rust-lang/compiler-team/issues/649#issuecomment-1618902660>automatic-sync</a></li></ul></li></ul></li><li>Finalized FCPs (disposition merge)<ul><li>&ldquo;Check WF of source type&rsquo;s signature on fn pointer cast&rdquo; <a href=https://github.com/rust-lang/rust/pull/129021>rust#129021</a></li><li>&ldquo;Relate receiver invariantly in method probe for <code>Mode::Path</code>&rdquo; <a href=https://github.com/rust-lang/rust/pull/129073>rust#129073</a></li><li>&ldquo;(Anti-)regression between Rust 1.78.0 and Rust 1.79.0 with struct containing <code>Cow&lt;[Self]></code>&rdquo; <a href=https://github.com/rust-lang/rust/issues/129541>rust#129541</a></li></ul></li><li>Other teams finalized FCPs<ul><li>&ldquo;Proposal: stabilize <code>const_refs_to_static</code>&rdquo; <a href=https://github.com/rust-lang/rust/issues/128183>rust#128183</a></li><li>&ldquo;Check WF of source type&rsquo;s signature on fn pointer cast&rdquo; <a href=https://github.com/rust-lang/rust/pull/129021>rust#129021</a></li><li>&ldquo;Relate receiver invariantly in method probe for <code>Mode::Path</code>&rdquo; <a href=https://github.com/rust-lang/rust/pull/129073>rust#129073</a></li><li>&ldquo;Stabilize <code>&amp;mut</code> (and <code>*mut</code>) as well as <code>&amp;Cell</code> (and <code>*const Cell</code>) in const&rdquo; <a href=https://github.com/rust-lang/rust/pull/129195>rust#129195</a></li><li>&ldquo;(Anti-)regression between Rust 1.78.0 and Rust 1.79.0 with struct containing <code>Cow&lt;[Self]></code>&rdquo; <a href=https://github.com/rust-lang/rust/issues/129541>rust#129541</a></li><li>&ldquo;Make destructors on <code>extern "C"</code> frames to be executed&rdquo; <a href=https://github.com/rust-lang/rust/pull/129582>rust#129582</a></li><li>&ldquo;stabilize <code>const_extern_fn</code>&rdquo; <a href=https://github.com/rust-lang/rust/pull/129753>rust#129753</a></li></ul></li></ul><h3 id=wg-checkins>WG checkins</h3><p>None</p><h2 id=backport-nominations>Backport nominations</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-compiler">T-compiler beta</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-compiler">T-compiler stable</a></p><ul><li>:beta: &ldquo;Update LLVM to 19 327ca6c&rdquo; <a href=https://github.com/rust-lang/rust/pull/130212>rust#130212</a><ul><li>Authored by DianQK</li><li>will fix #129887, a P-high crash on compiling on aarch64</li></ul></li></ul><ul><li>:beta: &ldquo;Revert #129749 to fix segfault in LLVM&rdquo; <a href=https://github.com/rust-lang/rust/pull/130477>rust#130477</a><ul><li>Authored by tmandry</li><li>reverts some LLVM breaking changes (see <a href=https://github.com/rust-lang/rust/pull/129749#issuecomment-2354417960>comment</a>). Also fixes #130333</li></ul></li></ul><ul><li>:beta: &ldquo;Check params for unsafety in THIR&rdquo; <a href=https://github.com/rust-lang/rust/pull/130531>rust#130531</a><ul><li>Authored by compiler-errors</li><li>Fixes p-critical unsoundness #130528</li></ul></li></ul><ul><li>No stable nominations for <code>T-compiler</code> this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-types">T-types stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-types">T-types beta</a></p><ul><li>No beta nominations for <code>T-types</code> this time.</li><li>No stable nominations for <code>T-types</code> this time.</li></ul><h2 id=prs-s-waiting-on-team>PRs S-waiting-on-team</h2><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p><ul><li><a href=https://hackmd.io/XYr1BrOWSiqCrl8RCWXRaQ>Issues in progress or waiting on other teams</a></li></ul><h2 id=issues-of-note>Issues of Note</h2><h3 id=short-summary>Short Summary</h3><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical">1 T-compiler P-critical issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical+no%3Aassignee">0 of those are unassigned</a></li></ul></li><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high">67 T-compiler P-high issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high+no%3Aassignee">39 of those are unassigned</a></li></ul></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-beta>0 P-critical, 1 P-high, 3 P-medium, 0 P-low regression-from-stable-to-beta</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-nightly>0 P-critical, 0 P-high, 6 P-medium, 3 P-low regression-from-stable-to-nightly</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-stable>1 P-critical, 36 P-high, 100 P-medium, 17 P-low regression-from-stable-to-stable</a></li></ul><h3 id=p-critical>P-critical</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;Unsoundness: Patterns in function parameters are not checked for union access&rdquo; <a href=https://github.com/rust-lang/rust/issues/130528>rust#130528</a><ul><li>fixed by #130531</li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-types">T-types</a></p><ul><li>No <code>P-critical</code> issues for <code>T-types</code> this time.</li></ul><h3 id=p-high-regressions>P-high regressions</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-beta+label%3AP-high+-label%3AT-infra+-label%3AT-libs+-label%3AT-libs-api+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">P-high beta regressions</a></p><ul><li>&ldquo;regression: overflow evaluating the requirement&rdquo; <a href=https://github.com/rust-lang/rust/issues/128887>rust#128887</a><ul><li>likely fixed by #129073. In any case on the radar of @_<em>lcnr</em></li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-nightly+label%3AP-high+no%3Aassignee+-label%3AT-infra+-label%3AT-libs+-label%3AT-libs-api+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core+">Unassigned P-high nightly regressions</a></p><ul><li>No unassigned <code>P-high</code> nightly regressions this time.</li></ul><h2 id=performance-logs>Performance logs</h2><blockquote><p><a href=https://github.com/rust-lang/rustc-perf/blob/master/triage/2024-09-16.md>triage logs for 2024-09-16</a></p></blockquote><p>A relatively quiet week, with overall neutral performance across our set of key
metrics (instructions, cycles, memory).</p><p>Triage done by <strong>@simulacrum</strong>.
Revision range: <a href="https://perf.rust-lang.org/?start=263a3aeeb8f2d0e9cc85eee61774d1f5f23dc3f5&amp;end=170d6cb845c8c3f0dcec5cdd4210df9ecf990244&amp;absolute=false&amp;stat=instructions%3Au">263a3aee..170d6cb8</a></p><p><strong>Summary</strong>:</p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions ❌ (primary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.2%, 4.0%]</td><td style=text-align:center>52</td></tr><tr><td style=text-align:center>Regressions ❌ (secondary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.2%, 1.4%]</td><td style=text-align:center>48</td></tr><tr><td style=text-align:center>Improvements ✅ (primary)</td><td style=text-align:center>-0.8%</td><td style=text-align:center>[-2.6%, -0.2%]</td><td style=text-align:center>46</td></tr><tr><td style=text-align:center>Improvements ✅ (secondary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-1.1%, -0.1%]</td><td style=text-align:center>25</td></tr><tr><td style=text-align:center>All ❌✅ (primary)</td><td style=text-align:center>0.0%</td><td style=text-align:center>[-2.6%, 4.0%]</td><td style=text-align:center>98</td></tr></tbody></table><p>2 Regressions, 3 Improvements, 4 Mixed; 2 of them in rollups
54 artifact comparisons made in total</p><h4 id=regressions>Regressions</h4><p>interpret: make typed copies lossy wrt provenance and padding <a href=https://github.com/rust-lang/rust/pull/129778>#129778</a> <a href="https://perf.rust-lang.org/compare.html?start=712463de61c65033a6f333f0a14fbb65e34efc50&amp;end=304b7f801bab31233680879ca4fb6eb294706a59&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions ❌ (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions ❌ (secondary)</td><td style=text-align:center>2.1%</td><td style=text-align:center>[0.2%, 4.7%]</td><td style=text-align:center>13</td></tr><tr><td style=text-align:center>Improvements ✅ (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements ✅ (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All ❌✅ (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr></tbody></table><p>Most of the performance is recovered in <a href=https://github.com/rust-lang/rust/pull/130197>https://github.com/rust-lang/rust/pull/130197</a>.</p><p>generalize: track relevant info in cache key <a href=https://github.com/rust-lang/rust/pull/130194>#130194</a> <a href="https://perf.rust-lang.org/compare.html?start=4c5fc2c334f1cc305eea79ed0b8fdb276342d101&amp;end=5a2dd7d4f3210629e65879aeecbe643ba3b86bb4&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions ❌ (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions ❌ (secondary)</td><td style=text-align:center>1.0%</td><td style=text-align:center>[0.4%, 1.3%]</td><td style=text-align:center>16</td></tr><tr><td style=text-align:center>Improvements ✅ (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements ✅ (secondary)</td><td style=text-align:center>-0.2%</td><td style=text-align:center>[-0.2%, -0.2%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>All ❌✅ (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr></tbody></table><p>Soundness fix and regressions only in secondary benchmarks.</p><h4 id=improvements>Improvements</h4><p>rustdoc: use strategic boxing to shrink <code>clean::Item</code> <a href=https://github.com/rust-lang/rust/pull/129789>#129789</a> <a href="https://perf.rust-lang.org/compare.html?start=c2f74c3f928aeb503f15b4e9ef5778e77f3058b8&amp;end=712463de61c65033a6f333f0a14fbb65e34efc50&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions ❌ (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions ❌ (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements ✅ (primary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-1.0%, -0.2%]</td><td style=text-align:center>15</td></tr><tr><td style=text-align:center>Improvements ✅ (secondary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-0.6%, -0.3%]</td><td style=text-align:center>19</td></tr><tr><td style=text-align:center>All ❌✅ (primary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-1.0%, -0.2%]</td><td style=text-align:center>15</td></tr></tbody></table><p>rustdoc: unify the short-circuit on all lints <a href=https://github.com/rust-lang/rust/pull/129975>#129975</a> <a href="https://perf.rust-lang.org/compare.html?start=6f7229c4da0471f1470bb1f86071848cba3a23d9&amp;end=a9fb00bfa4b3038c855b2097b54e05e8c198c183&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions ❌ (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions ❌ (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements ✅ (primary)</td><td style=text-align:center>-0.7%</td><td style=text-align:center>[-2.0%, -0.2%]</td><td style=text-align:center>10</td></tr><tr><td style=text-align:center>Improvements ✅ (secondary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.4%, -0.4%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>All ❌✅ (primary)</td><td style=text-align:center>-0.7%</td><td style=text-align:center>[-2.0%, -0.2%]</td><td style=text-align:center>10</td></tr></tbody></table><p>Rollup of 10 pull requests <a href=https://github.com/rust-lang/rust/pull/130253>#130253</a> <a href="https://perf.rust-lang.org/compare.html?start=8d6b88b168e45ee1624699c19443c49665322a91&amp;end=3afb2bb76ce56e860e45d8858ef5b5f00059e1b1&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions ❌ (primary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[0.2%, 0.2%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Regressions ❌ (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements ✅ (primary)</td><td style=text-align:center>-0.8%</td><td style=text-align:center>[-1.5%, -0.2%]</td><td style=text-align:center>13</td></tr><tr><td style=text-align:center>Improvements ✅ (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All ❌✅ (primary)</td><td style=text-align:center>-0.7%</td><td style=text-align:center>[-1.5%, 0.2%]</td><td style=text-align:center>14</td></tr></tbody></table><h4 id=mixed>Mixed</h4><p>Revert &ldquo;Stabilize <code>-Znext-solver=coherence</code>&rdquo; <a href=https://github.com/rust-lang/rust/pull/130249>#130249</a> <a href="https://perf.rust-lang.org/compare.html?start=7c7372b6a1b9a8d6b787a3e5a10e4f8325b1fdfc&amp;end=f753bc769b16ca9673f11a4cc06e5cc681efd84e&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions ❌ (primary)</td><td style=text-align:center>3.7%</td><td style=text-align:center>[2.9%, 4.5%]</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>Regressions ❌ (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements ✅ (primary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-0.9%, -0.2%]</td><td style=text-align:center>13</td></tr><tr><td style=text-align:center>Improvements ✅ (secondary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-0.7%, -0.1%]</td><td style=text-align:center>9</td></tr><tr><td style=text-align:center>All ❌✅ (primary)</td><td style=text-align:center>1.0%</td><td style=text-align:center>[-0.9%, 4.5%]</td><td style=text-align:center>20</td></tr></tbody></table><p>Largely resets to the previous state on a couple benchmarks. Expected given the revert.</p><p>Rollup of 5 pull requests <a href=https://github.com/rust-lang/rust/pull/130281>#130281</a> <a href="https://perf.rust-lang.org/compare.html?start=8c0ec05f7dc9ef185eea9f36c5638e74e43935bf&amp;end=2e8db5e9e39c2bf7729113b3041ef4011d90ac5a&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions ❌ (primary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>[0.6%, 0.6%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Regressions ❌ (secondary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[0.2%, 0.2%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements ✅ (primary)</td><td style=text-align:center>-0.2%</td><td style=text-align:center>[-0.2%, -0.2%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements ✅ (secondary)</td><td style=text-align:center>-1.8%</td><td style=text-align:center>[-2.0%, -1.6%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>All ❌✅ (primary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[-0.2%, 0.6%]</td><td style=text-align:center>2</td></tr></tbody></table><p>Regressions are minor enough that given the rollup and lack of obviously
relevant PRs I&rsquo;m just marking as triaged. The primary regressed benchmark is
webrender and only in full LLVM builds which doesn&rsquo;t seem like it maps well
onto the contained PRs.</p><p>Rescope temp lifetime in if-let into IfElse with migration lint <a href=https://github.com/rust-lang/rust/pull/107251>#107251</a> <a href="https://perf.rust-lang.org/compare.html?start=d3a8524e80244d66968ab4522d31145ccba610f4&amp;end=a5efa01895e82fa705146507d15311b29c715450&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions ❌ (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions ❌ (secondary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>[0.2%, 1.3%]</td><td style=text-align:center>19</td></tr><tr><td style=text-align:center>Improvements ✅ (primary)</td><td style=text-align:center>-0.2%</td><td style=text-align:center>[-0.2%, -0.2%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements ✅ (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All ❌✅ (primary)</td><td style=text-align:center>-0.2%</td><td style=text-align:center>[-0.2%, -0.2%]</td><td style=text-align:center>1</td></tr></tbody></table><p>Seems like the regression is primarily looking like a revert of #127313&mldr;
@cjgillot do you have thoughts on what the delta here might be? I don&rsquo;t see a
very obvious cause here. Regressions are minor enough that I&rsquo;m not worried, but
just checking if there&rsquo;s an easy explanation.</p><p>Simplify the canonical clone method and the copy-like forms to copy <a href=https://github.com/rust-lang/rust/pull/128299>#128299</a> <a href="https://perf.rust-lang.org/compare.html?start=02b1be16c65e5716ade771afde7116ebdfbf9b4a&amp;end=e7386b361dda8c2222bee7a1ae79faba7e9a0351&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions ❌ (primary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>[0.2%, 0.8%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>Regressions ❌ (secondary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>[0.2%, 2.1%]</td><td style=text-align:center>16</td></tr><tr><td style=text-align:center>Improvements ✅ (primary)</td><td style=text-align:center>-0.8%</td><td style=text-align:center>[-1.7%, -0.3%]</td><td style=text-align:center>12</td></tr><tr><td style=text-align:center>Improvements ✅ (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All ❌✅ (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-1.7%, 0.8%]</td><td style=text-align:center>18</td></tr></tbody></table><p>Likely expected regressions from direct changes to codegen, possibly giving
LLVM more freedom to optimize:</p><blockquote><p>This pass improves performance by reducing the amount of MIR. The generated
copies will get merged/expanded/whatever by LLVM, with a completely different
heuristic.</p></blockquote><p>(<a href=https://github.com/rust-lang/rust/pull/128299#pullrequestreview-2217057820>https://github.com/rust-lang/rust/pull/128299#pullrequestreview-2217057820</a>)</p><h2 id=nominated-issues>Nominated Issues</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-compiler-nominated">T-compiler</a></p><ul><li>&ldquo;Linking error with aws_lc_rs&rdquo; <a href=https://github.com/rust-lang/rustc_codegen_cranelift/issues/1520>rustc_codegen_cranelift#1520</a><ul><li>An AWS cryptographic crate fails linking using cranelift, relevant code snippet from the crate (<a href=https://github.com/aws/aws-lc-rs/blob/5799bee7d145181276d9db805da019dabbccbf2c/aws-lc-sys/src/x86_64_unknown_linux_gnu_crypto.rs#L4350>link</a>):<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>AES_KEY</span> <span style=color:#f92672>=</span> aes_key_st;
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#e6db74>&#34;C&#34;</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>#[link_name = </span><span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\u{1}</span><span style=color:#e6db74>aws_lc_0_20_0_AES_set_encrypt_key&#34;</span><span style=color:#75715e>]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>AES_set_encrypt_key</span>(
</span></span><span style=display:flex><span>        key: <span style=color:#f92672>*</span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>u8</span>,
</span></span><span style=display:flex><span>        bits: ::std::os::raw::c_uint,
</span></span><span style=display:flex><span>        aeskey: <span style=color:#f92672>*</span><span style=color:#66d9ef>mut</span> <span style=color:#66d9ef>AES_KEY</span>,
</span></span><span style=display:flex><span>    ) -&gt; ::std::os::raw::c_int;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li>From the <a href=https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/.5Cx01.20in.20symbol.20names/near/454506090>Zulip thread</a>:<blockquote><p>C compilers are expected to mangle symbol names on several platforms. For example for Mach-O exported functions are expected to start with an _, while on Windows a suffix like @4 may get added in some cases. To disable this mangling LLVM supports prefixing the symbol name with \x01. No other backend implements this right now afaik. As it turns out rust-bindgen started unconditionally using this 7 years ago.</p></blockquote></li><li>@<strong>bjorn3</strong> asks: do we want to guarantee that it will remain working and implement it in all existing codegen backends, or is this considered something that shouldn&rsquo;t be used on stable code at all and should rust-bindgen stop using it when not strictly necessary, like is the case most of the time?</li><li>This is where bindgen does this (<a href=https://github.com/rust-lang/rust-bindgen/blob/f518815cc14a7f8c292964bb37179a1070d7e18a/bindgen/codegen/helpers.rs#L71>link</a>)</li></ul></li></ul><p><a href="https://github.com/rust-lang/rfcs/issues?q=is%3Aopen+label%3AI-compiler-nominated">RFC</a></p><ul><li>No I-compiler-nominated RFCs this time.</li></ul><h3 id=oldest-prs-waiting-for-review>Oldest PRs waiting for review</h3><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-asc+label%3AS-waiting-on-review+draft%3Afalse+label%3AT-compiler">T-compiler</a></p><ul><li>TODO</li></ul><h2 id=next-weeks-wg-checkins>Next week&rsquo;s WG checkins</h2><p>None</p><p>Next meetings&rsquo; agenda draft: <a href=https://hackmd.io/obtoz1e-RaeOnDoycHTgEQ>hackmd link</a></p></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#announcements>Announcements</a><ul><li><a href=#other-wg-meetings>Other WG meetings</a></li></ul></li><li><a href=#mcpsfcps>MCPs/FCPs</a><ul><li><a href=#wg-checkins>WG checkins</a></li></ul></li><li><a href=#backport-nominations>Backport nominations</a></li><li><a href=#prs-s-waiting-on-team>PRs S-waiting-on-team</a></li><li><a href=#issues-of-note>Issues of Note</a><ul><li><a href=#short-summary>Short Summary</a></li><li><a href=#p-critical>P-critical</a></li><li><a href=#p-high-regressions>P-high regressions</a></li></ul></li><li><a href=#performance-logs>Performance logs</a><ul><li></li></ul></li><li><a href=#nominated-issues>Nominated Issues</a><ul><li><a href=#oldest-prs-waiting-for-review>Oldest PRs waiting for review</a></li></ul></li><li><a href=#next-weeks-wg-checkins>Next week&rsquo;s WG checkins</a></li></ul></nav></aside></main></body></html>