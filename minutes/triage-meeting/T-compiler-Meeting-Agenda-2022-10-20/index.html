<!doctype html><html lang=en><head><meta http-equiv=refresh content="0; url=https://forge.rust-lang.org/compiler/index.html"></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://rust-lang.github.io/compiler-team/>Rust Lang - Compiler Team</a></h2><style>nav ul a[href$=\2f compiler-team\2fminutes\2ftriage-meeting\2fT-compiler-Meeting-Agenda-2022-10-20\2f ]{color:#004ed0}</style><ul><li><p><strong>About</strong></p><ul><li><a href=/compiler-team/about/CODE_OF_CONDUCT/>Code of Conduct</a></li><li><a href=/compiler-team/about/chat-platform/>Chat Platform</a></li><li><a href=/compiler-team/about/steering-meeting/>Steering Meeting</a></li><li><a href=/compiler-team/about/triage-meeting/>Triage Meeting</a></li></ul></li><li><p><strong>Minutes</strong></p><ul><li><a href=/compiler-team/minutes/design-meeting/>Design Meetings</a></li><li><a href=/compiler-team/minutes/steering-meeting/>Steering Meetings</a></li><li><a href=/compiler-team/minutes/triage-meeting/>Triage Meetings</a></li></ul></li><li><p><strong>Procedures</strong></p><ul><li><a href=/compiler-team/procedures/>Documentation</a></li><li><a href=/compiler-team/procedures/crates/>Crates</a></li><li><a href=/compiler-team/procedures/call-for-participation/>Call for participation</a></li><li><a href=/compiler-team/procedures/form-new-working-group/>Form new working group</a></li></ul></li><li><p><a href=/compiler-team/working-groups/><strong>Working Groups</strong></a></p><ul><li><a href=/compiler-team/working-groups/async-await/>Async Await</a></li><li><a href=/compiler-team/working-groups/debugging/>Debugging</a></li><li><a href=/compiler-team/working-groups/diagnostics/>Diagnostics</a></li><li><a href=/compiler-team/working-groups/rustc-dev-guide/>Rustc Dev Guide</a></li><li><a href=/compiler-team/working-groups/llvm/>LLVM</a></li><li><a href=/compiler-team/working-groups/meta/>Meta</a></li><li><a href=/compiler-team/working-groups/mir-opt/>MIR-opt</a></li><li><a href=/compiler-team/working-groups/nll/>NLL</a></li><li><a href=/compiler-team/working-groups/parallel-rustc/>parallel rustc</a></li><li><a href=/compiler-team/working-groups/pgo/>PGO</a></li><li><a href=/compiler-team/working-groups/pipelining/>pipelining</a></li><li><a href=/compiler-team/working-groups/polonius/>polonius</a></li><li><a href=/compiler-team/working-groups/polymorphization/>polymorphization</a></li><li><a href=/compiler-team/working-groups/prioritization/>Prioritization</a></li><li><a href=/compiler-team/working-groups/rfc-2229/>rfc-2229</a></li><li><a href=/compiler-team/working-groups/rls-2.0/>rls-2.0</a></li><li><a href=/compiler-team/working-groups/self-profile/>Self Profile</a></li><li><a href=/compiler-team/working-groups/traits/>Traits</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/compiler-team/svg/menu.svg alt=Menu>
</label><strong>T Compiler Meeting Agenda 2022 10 20</strong></header><article class=markdown><h1 id=t-compiler-meeting-agenda-2022-10-20>T-compiler Meeting Agenda 2022-10-20</h1><h2 id=announcements>Announcements</h2><ul><li><a href="https://www.google.com/calendar/event?eid=M3JsYmdkN2F0cjdtYXE0Z2ljYzM4Nm42NTRfMjAyMjEwMjFUMTMwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Types Team: Planning/Deep-Dive meeting</a> at <a href=time:2022-10-21T09:00:00-04:00>time:2022-10-21T09:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=MDJyYnJ1cGFtdWR1c2lnNjFmcHJ2b3JlODFfMjAyMjEwMjFUMTQwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Compiler Team Planning meeting</a> at <a href=time:2022-10-21T10:00:00-04:00>time:2022-10-21T10:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=NThkN2I4YnY2YjlvaHNyc3FtbG04ZmpvaWEgNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw">RustcContributor::explore @compiler-errors session: Return-position impl Trait in traits deep dive</a> at <a href=time:2022-10-20T16:00:00-04:00>time:2022-10-20T16:00:00-04:00</a></li><li>Reminder: if you see a PR/issue that seems like there might be legal implications due to copyright/IP/etc, please let the Core team know (or at least message @<em><strong>pnkfelix</strong> or @</em><strong>Wesley Wiser</strong> so we can pass it along).</li></ul><h3 id=other-wg-meetings>Other WG meetings</h3><ul><li><a href="https://www.google.com/calendar/event?eid=YnUxNDd2cjY3dGkxOWNnMWp1dWFpc2U5dnBfMjAyMjEwMjRUMTQwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">[Types team] Shallow subtyping weekly meeting</a> at <a href=time:2022-10-24T10:00:00-04:00>time:2022-10-24T10:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=cXZ1NGZncDF1dXA1NnVnMnA1M2Mzb2lvdWVfMjAyMjEwMjRUMTUzMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Async WG triage meeting</a> at <a href=time:2022-10-24T11:30:00-04:00>time:2022-10-24T11:30:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=Y3VpY2NkbXBoZTJkMHJmcmZxZmU4MjhodDBfMjAyMjEwMjRUMjAwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">[wg-traits] GATs Sync</a> at <a href=time:2022-10-24T16:00:00-04:00>time:2022-10-24T16:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=NmEzbzBzbTJkYWUwcnN0N2x2dG9ucmYwamEgNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw">Polonius Deep Dive</a> at <a href=time:2022-10-26T09:00:00-04:00>time:2022-10-26T09:00:00-04:00</a></li></ul><h2 id=mcpsfcps>MCPs/FCPs</h2><ul><li>New MCPs (take a look, see if you like them!)<ul><li>No new proposals this time.</li></ul></li><li>Old MCPs (not seconded, take a look)<ul><li>&ldquo;Arbitrary annotations in compiletest&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/513>compiler-team#513</a> (last review activity: 5 months ago)<ul><li>MCP candidate for closing? (seems to not receive any feedback)</li></ul></li><li>&ldquo;Add <code>#[alias]</code> attribute to allow symbol aliasing&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/526>compiler-team#526</a> (last review activity: 2 months ago)</li><li>&ldquo;Use RangeInclusive in SpanData instead of lo/hi&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/534>compiler-team#534</a> (last review activity: about 54 days ago)</li><li>&ldquo;Allow informational -Z flags on stable compiler&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/542>compiler-team#542</a> (last review activity: about 54 days ago)</li><li>" Promote <code>i586-unknown-linux-gnu</code> to Tier 2 with Host Tools " <a href=https://github.com/rust-lang/compiler-team/issues/543>compiler-team#543</a> (last review activity: about 54 days ago)</li><li>&ldquo;Lower baseline expectations for i686 unix-like targets&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/548>compiler-team#548</a> (last review activity: about 40 days ago)</li><li>&ldquo;MCP: Flag to disable extended error info.&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/550>compiler-team#550</a> (last review activity: about 21 days ago)</li><li>&ldquo;New Tier-3 target proposal: powerpc64-ibm-aix&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/553>compiler-team#553</a> (last review activity: about 40 days ago)<ul><li>MCP author pinged for feedback</li></ul></li><li>&ldquo;configurable rustc timeout for compiletest tests&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/554>compiler-team#554</a> (last review activity: about 40 days ago)</li><li>&ldquo;MCP: Raise UEFI Targets to Tier-2&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/555>compiler-team#555</a> (last review activity: about 40 days ago)<ul><li>MCP author pinged for feedback</li></ul></li><li>&ldquo;Raise minimum supported macOS and iOS versions&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/556>compiler-team#556</a> (last review activity: about 40 days ago)</li><li>&ldquo;Rustc Contributor Program Major Change Proposal&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/557>compiler-team#557</a> (last review activity: about 0 days ago)</li><li>&ldquo;Introduce a <code>#[rustc::*]</code> tool attribute namespace and provide a stable <code>#[rustc::on_unimplemented]</code> attribute&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/560>compiler-team#560</a> (last review activity: about 0 days ago)</li><li>&ldquo;<code>-Z instrument-xray</code> option&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/561>compiler-team#561</a> (last review activity: about 0 days ago)<ul><li>Has an implementation PR ready for review (<a href=https://github.com/rust-lang/rust/pull/102963>rust#102963</a>)</li></ul></li></ul></li><li>Pending FCP requests (check your boxes!)<ul><li>&ldquo;Make PROC_MACRO_DERIVE_RESOLUTION_FALLBACK a hard error&rdquo; <a href=https://github.com/rust-lang/rust/pull/84022>rust#84022</a></li></ul></li><li>Things in FCP (make sure you&rsquo;re good with it)<ul><li>&ldquo;Only apply <code>ProceduralMasquerade</code> hack to older versions of <code>rental</code>&rdquo; <a href=https://github.com/rust-lang/rust/pull/94063>rust#94063</a></li></ul></li><li>Accepted MCPs<ul><li>No new accepted proposals this time.</li></ul></li><li>Finalized FCPs (disposition merge)<ul><li>&ldquo;Handle projections as uncovered types during coherence check&rdquo; <a href=https://github.com/rust-lang/rust/pull/100555>rust#100555</a></li><li>&ldquo;Remove save-analysis.&rdquo; <a href=https://github.com/rust-lang/rust/pull/101841>rust#101841</a></li><li>&ldquo;make const_err a hard error&rdquo; <a href=https://github.com/rust-lang/rust/pull/102091>rust#102091</a></li><li>&ldquo;Elaborate supertrait bounds when triggering <code>unused_must_use</code> on <code>impl Trait</code>&rdquo; <a href=https://github.com/rust-lang/rust/pull/102287>rust#102287</a></li><li>&ldquo;make <code>order_dependent_trait_objects</code> show up in future-breakage reports&rdquo; <a href=https://github.com/rust-lang/rust/pull/102635>rust#102635</a></li></ul></li></ul><h3 id=wg-checkins>WG checkins</h3><ul><li><p>@_<em>WG-async-foundations</em> by @<strong>nikomatsakis</strong> and @<strong>tmandry</strong> (<a href=https://hackmd.io/EewyTLZXQpmtfaH633GU-A#WG-checkins>previous checkin</a>):</p><blockquote><p>Checkin text</p></blockquote></li><li><p>Generic Associated Types initiative by @<strong>Jack Huey</strong> (<a href=https://hackmd.io/P5_PrNfwR6Sp89yQ_S3-jg#WG-checkins>previous checkin</a>):</p><blockquote><p>Checkin text</p></blockquote></li></ul><h2 id=backport-nominations>Backport nominations</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-compiler">T-compiler stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-compiler">T-compiler beta</a></p><ul><li>:beta: &ldquo;Ensure enum cast moves&rdquo; <a href=https://github.com/rust-lang/rust/pull/103016>rust#103016</a><ul><li>Fixes #102389, a T-lang <code>P-critical</code> regression</li><li>also nominated for stable backport</li></ul></li><li>:beta: &ldquo;Do anonymous lifetimes remapping correctly for nested rpits&rdquo; <a href=https://github.com/rust-lang/rust/pull/103205>rust#103205</a><ul><li>@<strong>Santiago Pastorino</strong> authored the fix, being reviewed by @<strong>cjgillot</strong></li><li>fixes a <code>P-critical</code> stable regression #103141</li><li>also nominated for stable backport</li></ul></li><li>:beta: &ldquo;Fix <code>TyKind::is_simple_path</code>&rdquo; <a href=https://github.com/rust-lang/rust/pull/103176>rust#103176</a><ul><li>PR authored by @<strong>nnethercote</strong>, fixes a <code>P-high</code> regression <a href=https://github.com/rust-lang/rust/issues/103157>rust#103157</a></li><li>nominated by @<strong>apiraino</strong> after reading this user comment <a href=https://rust-lang.zulipchat.com/#narrow/stream/122651-general/topic/illegal.20Eq.20derive/near/304914199>about a 1.64.1 release</a> for this fix</li><li>(in retrospect I wonder if #103157 was more a <code>P-critical</code>)</li><li>also nominated for stable backport</li></ul></li><li>:beta: &ldquo;linker: Fix weak lang item linking with combination windows-gnu + LLD + LTO&rdquo; <a href=https://github.com/rust-lang/rust/pull/103092>rust#103092</a><ul><li>complements <a href=https://github.com/rust-lang/rust/pull/100404>rust#100404</a></li><li>nominated by @<strong>Vadim Petrochenkov</strong> to fix the beta</li><li>PR open but approved by @<strong>Wesley Wiser</strong></li></ul></li><li>:beta: &ldquo;Add eval hack in <code>super_relate_consts</code> back&rdquo; <a href=https://github.com/rust-lang/rust/pull/103279>rust#103279</a><ul><li>authored by @<strong>Michael Goulet (compiler-errors)</strong>, fixes #103242 and #103243 (both beta regressions emerged in crater runs, thus prioritized as <code>P-critical</code>)</li><li>being reviewed by @<strong>lcnr</strong></li></ul></li><li>:stable: &ldquo;Ensure enum cast moves&rdquo; <a href=https://github.com/rust-lang/rust/pull/103016>rust#103016</a></li><li>:stable: &ldquo;Fix <code>TyKind::is_simple_path</code>&rdquo; <a href=https://github.com/rust-lang/rust/pull/103176>rust#103176</a></li><li>:stable: &ldquo;Do anonymous lifetimes remapping correctly for nested rpits&rdquo; <a href=https://github.com/rust-lang/rust/pull/103205>rust#103205</a></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-rustdoc">T-rustdoc stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-rustdoc">T-rustdoc beta</a></p><ul><li>No beta nominations for <code>T-rustdoc</code> this time.</li><li>No stable nominations for <code>T-rustdoc</code> this time.</li></ul><p>:back: / :shrug: / :hand:</p><h2 id=prs-s-waiting-on-team>PRs S-waiting-on-team</h2><p><a href="https://github.com/rust-lang/rust/pulls?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;Add <code>-Z instrument-xray</code> flag&rdquo; <a href=https://github.com/rust-lang/rust/pull/102963>rust#102963</a><ul><li>Ready now for another review from T-compiler</li><li>MCP <a href=https://github.com/rust-lang/compiler-team/issues/561>compiler-team#561</a> waiting to be seconded</li></ul></li><li>3 other hidden issues in progress or waiting on other teams</li></ul><h2 id=oldest-prs-waiting-for-review>Oldest PRs waiting for review</h2><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-asc+label%3AS-waiting-on-review+draft%3Afalse+label%3AT-compiler+-label%3AT-lang+-label%3AT-infra+-label%3AT-release+-label%3AT-libs+-label%3AT-libs-api">T-compiler</a></p><ul><li>&ldquo;Make PROC_MACRO_DERIVE_RESOLUTION_FALLBACK a hard error&rdquo; <a href=https://github.com/rust-lang/rust/pull/84022>rust#84022</a> (last review activity: 18 months ago)<ul><li>seems the <a href=https://github.com/rust-lang/rust/pull/84022#issuecomment-1272774041>RFC comment</a> needs at least one more tick</li></ul></li><li>&ldquo;Refactor metadata emission to avoid visiting HIR&rdquo; <a href=https://github.com/rust-lang/rust/pull/98867>rust#98867</a> (last review activity: 3 months ago)<ul><li>cc @<strong>cjgillot</strong> (own PR anyway)</li></ul></li><li>&ldquo;Implement <code>std::marker::Tuple</code>, use it in <code>extern "rust-call"</code> and <code>Fn</code>-family traits&rdquo; <a href=https://github.com/rust-lang/rust/pull/99943>rust#99943</a> (last review activity: 2 months ago)<ul><li>cc: @<strong>Jack Huey</strong></li></ul></li><li>&ldquo;Remove <code>box_free</code> lang item&rdquo; <a href=https://github.com/rust-lang/rust/pull/100036>rust#100036</a> (last review activity: about 56 days ago)<ul><li>ready for review of perf. results cc: @<strong>Wesley Wiser</strong></li></ul></li></ul><h2 id=issues-of-note>Issues of Note</h2><h3 id=short-summary>Short Summary</h3><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical">4 T-compiler P-critical issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical+no%3Aassignee">3 of those are unassigned</a></li></ul></li><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high">62 T-compiler P-high issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high+no%3Aassignee">40 of those are unassigned</a></li></ul></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-beta>4 P-critical, 0 P-high, 2 P-medium, 0 P-low regression-from-stable-to-beta</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-nightly>0 P-critical, 2 P-high, 1 P-medium, 0 P-low regression-from-stable-to-nightly</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-stable>1 P-critical, 39 P-high, 85 P-medium, 7 P-low regression-from-stable-to-stable</a></li></ul><h3 id=p-critical>P-critical</h3><p><a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AP-critical+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;ld64.lld: error: too many personalities (4) for compact unwind to encode&rdquo; <a href=https://github.com/rust-lang/rust/issues/102754>rust#102754</a><ul><li>LLD bug will be fixed by <a href=https://reviews.llvm.org/D135728>llvm#D135728</a></li></ul></li><li>&ldquo;regression: associated consts cannot be referenced in patterns&rdquo; <a href=https://github.com/rust-lang/rust/issues/103242>rust#103242</a><ul><li>Will be fixed by <a href=https://github.com/rust-lang/rust/pull/103279>rust#103279</a> (beta nominated)</li></ul></li><li>&ldquo;regression: trait bound not satisfied&rdquo; <a href=https://github.com/rust-lang/rust/issues/103243>rust#103243</a><ul><li>Will be fixed by <a href=https://github.com/rust-lang/rust/pull/103279>rust#103279</a> (beta nominated)</li></ul></li><li>&ldquo;regression: attributes on expressions are experimental&rdquo; <a href=https://github.com/rust-lang/rust/issues/103244>rust#103244</a><ul><li>bisection points to #100232</li><li>@<strong>cjgillot</strong> self-assigned</li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AP-critical+label%3AT-rustdoc">T-rustdoc</a></p><ul><li>No <code>P-critical</code> issues for <code>T-rustdoc</code> this time.</li></ul><h3 id=p-high-regressions>P-high regressions</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-beta+label%3AP-high+-label%3AT-infra+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">P-high beta regressions</a></p><ul><li>No <code>P-high</code> beta regressions this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-nightly+label%3AP-high+no%3Aassignee+-label%3AT-infra+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">Unassigned P-high nightly regressions</a></p><ul><li>No unassigned <code>P-high</code> nightly regressions this time.</li></ul><h2 id=performance-logs>Performance logs</h2><blockquote><p><a href=https://github.com/rust-lang/rustc-perf/blob/260422f9f70ade1d27913fbcb72367e1ea91db4e/triage/2022-10-18.md>triage logs for 2022-10-18</a></p></blockquote><p>Overall a fairly busy week, with many improvements and regressions, though the
net result ends up being a small regression. Pretty busy week in terms of
regressions in rollups as well, which unfortunately mostly were not followed up
on prior to the report being put together, despite the relative ease of running
perf against individual PRs now.</p><p>Triage done by <strong>@simulacrum</strong>.
Revision range: <a href="https://perf.rust-lang.org/?start=1e926f06528ecb2503f026e2fd53cb735d487b10&amp;end=e0f8e60dddfecfc9093ee9d9f42557d8260c0355&amp;absolute=false&amp;stat=instructions%3Au">1e926f06528ecb2503f026e2fd53cb735d487b10..e0f8e60dddfecfc9093ee9d9f42557d8260c0355</a></p><p><strong>Summary</strong>:</p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>1.7%</td><td style=text-align:center>[0.2%, 6.3%]</td><td style=text-align:center>46</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>1.6%</td><td style=text-align:center>[0.3%, 5.4%]</td><td style=text-align:center>46</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.6%</td><td style=text-align:center>[-2.3%, -0.2%]</td><td style=text-align:center>45</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-2.0%</td><td style=text-align:center>[-9.2%, -0.2%]</td><td style=text-align:center>32</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>[-2.3%, 6.3%]</td><td style=text-align:center>91</td></tr></tbody></table><p>2 Regressions, 4 Improvements, 4 Mixed; 4 of them in rollups
47 artifact comparisons made in total</p><h4 id=regressions>Regressions</h4><p>Populate effective visibilities in &lsquo;rustc_resolve&rsquo; <a href=https://github.com/rust-lang/rust/pull/102026>#102026</a> <a href="https://perf.rust-lang.org/compare.html?start=bf286a82e236e065c67909657e3a35d1511d1864&amp;end=b8b5caee04116c7383eb1c6470fcf15c437a60d4&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>1.1%</td><td style=text-align:center>[0.2%, 5.6%]</td><td style=text-align:center>65</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.9%</td><td style=text-align:center>[0.2%, 3.7%]</td><td style=text-align:center>32</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>1.1%</td><td style=text-align:center>[0.2%, 5.6%]</td><td style=text-align:center>65</td></tr></tbody></table><p>The compiler is doing more work after this PR, but haven&rsquo;t yet narrowed in on a
fix or exact cause for the regression. @petrochenkov expects that we probably
ought to be able to reduce the impact.</p><p>Rollup of 7 pull requests <a href=https://github.com/rust-lang/rust/pull/102915>#102915</a> <a href="https://perf.rust-lang.org/compare.html?start=1e926f06528ecb2503f026e2fd53cb735d487b10&amp;end=bb93450ec4af83c20e9ba6c8e575aca55423001a&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>[0.2%, 1.1%]</td><td style=text-align:center>12</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.7%</td><td style=text-align:center>[-0.9%, -0.6%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[-0.9%, 1.1%]</td><td style=text-align:center>18</td></tr></tbody></table><p>The improvements here are in diesel, which is noise; the regressions look
plausibly real. Queued an additional perf run for further investigation.</p><h4 id=improvements>Improvements</h4><p>Rollup of 11 pull requests <a href=https://github.com/rust-lang/rust/pull/102926>#102926</a> <a href="https://perf.rust-lang.org/compare.html?start=cde693cf962f0f606e33eb21242f6bcd2d8d8b7a&amp;end=db0597f5619d5ed93feca28e61226d3581cc7867&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.2%</td><td style=text-align:center>[0.2%, 0.2%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-1.0%, -0.2%]</td><td style=text-align:center>20</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-0.6%, -0.3%]</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-1.0%, -0.2%]</td><td style=text-align:center>20</td></tr></tbody></table><p>This may not be as much of an improvement as it looks; the diesel-related
changes are all spurious (we are seeing an uptick in noise there).</p><p>Remove <code>TokenStreamBuilder</code> <a href=https://github.com/rust-lang/rust/pull/102692>#102692</a> <a href="https://perf.rust-lang.org/compare.html?start=7e8d64e792543fedb8574ac0a27522dbab66aa52&amp;end=2b91cbe2d4ce90d30520674876e9d700cf7a561b&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-0.6%, -0.3%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-4.1%</td><td style=text-align:center>[-9.5%, -1.2%]</td><td style=text-align:center>9</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-0.6%, -0.3%]</td><td style=text-align:center>4</td></tr></tbody></table><p>remove type traversal for mir constants <a href=https://github.com/rust-lang/rust/pull/102355>#102355</a> <a href="https://perf.rust-lang.org/compare.html?start=abd77441010d74430be5c34a2e62002e578fa165&amp;end=a9d1cafa878ecc04a4aa7aaa7df0414a29a2bd0b&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.8%, -0.2%]</td><td style=text-align:center>36</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-1.3%</td><td style=text-align:center>[-3.7%, -0.2%]</td><td style=text-align:center>37</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.8%, -0.2%]</td><td style=text-align:center>36</td></tr></tbody></table><p>Rollup of 7 pull requests <a href=https://github.com/rust-lang/rust/pull/103026>#103026</a> <a href="https://perf.rust-lang.org/compare.html?start=60bd3f96779dbe6bd206dae09395e9af7d580552&amp;end=edabf59ca4646b3fc1a961c26431215001043f6a&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.9%</td><td style=text-align:center>[0.7%, 1.1%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>[0.4%, 0.4%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-1.5%, -0.3%]</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.9%</td><td style=text-align:center>[0.7%, 1.1%]</td><td style=text-align:center>6</td></tr></tbody></table><p>Regressions are essentially all in diesel, which are spurious.</p><h4 id=mixed>Mixed</h4><p>Rollup of 7 pull requests <a href=https://github.com/rust-lang/rust/pull/102975>#102975</a> <a href="https://perf.rust-lang.org/compare.html?start=538f118da1409759ba198acc0ff62070bc6d2dce&amp;end=c0983a9aac889d16722a12602ac678051e62c3fb&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>[0.2%, 1.0%]</td><td style=text-align:center>19</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>1.3%</td><td style=text-align:center>[0.2%, 3.8%]</td><td style=text-align:center>41</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.9%</td><td style=text-align:center>[-1.7%, -0.4%]</td><td style=text-align:center>14</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.0%</td><td style=text-align:center>[-1.7%, 1.0%]</td><td style=text-align:center>33</td></tr></tbody></table><p>Check hidden types in dead code <a href=https://github.com/rust-lang/rust/pull/102700>#102700</a> <a href="https://perf.rust-lang.org/compare.html?start=6b3ede3f7bc502eba7bbd202b4b9312d812adcd7&amp;end=60bd3f96779dbe6bd206dae09395e9af7d580552&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>1.2%</td><td style=text-align:center>[1.0%, 1.3%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.4%, -0.2%]</td><td style=text-align:center>13</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.6%</td><td style=text-align:center>[-0.7%, -0.5%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.4%, -0.2%]</td><td style=text-align:center>13</td></tr></tbody></table><p>Get rid of <code>rustc_query_description!</code> <a href=https://github.com/rust-lang/rust/pull/102895>#102895</a> <a href="https://perf.rust-lang.org/compare.html?start=c93ef33700e4e4f84fd85690df71b14c1d2b0aa3&amp;end=b8c35ca26b191bb9a9ac669a4b3f4d3d52d97fb1&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.2%, 0.5%]</td><td style=text-align:center>9</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>[0.3%, 0.8%]</td><td style=text-align:center>5</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.7%</td><td style=text-align:center>[-1.2%, -0.2%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.2%, 0.5%]</td><td style=text-align:center>9</td></tr></tbody></table><p>Make <code>overlapping_impls</code> not generic <a href=https://github.com/rust-lang/rust/pull/102931>#102931</a> <a href="https://perf.rust-lang.org/compare.html?start=ddc7fd983736bef0e610e02f5ef08955ecd562bb&amp;end=75dbd5b8c3e3e3e7673caa890422e654d39b815e&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>[0.5%, 0.5%]</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-1.6%</td><td style=text-align:center>[-2.3%, -1.1%]</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-1.6%</td><td style=text-align:center>[-2.3%, -1.1%]</td><td style=text-align:center>7</td></tr></tbody></table><h2 id=nominated-issues>Nominated Issues</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-compiler-nominated+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;Massive performance regression between nightly-2022-08-12 and nightly-2022-08-13&rdquo; <a href=https://github.com/rust-lang/rust/issues/102952>rust#102952</a><ul><li>issue reporter points out that LLVM upgrades sometimes causes substancial perf. regression in the <code>wasmi</code> WASM interpreter, also points to a previous case in <a href=https://github.com/rust-lang/rust/issues/95409>rust#95409</a>)</li><li><a href=https://github.com/rust-lang/rust/issues/102952#issuecomment-1279708220>Instructions to reproduce</a></li><li>Suggests a possible idea for these regressions: &ldquo;Due to missing guaranteed tail calls in Rust wasmi relies heavily on a non-guaranteed optimization for a loop-switch based interpreter hot path&rdquo;</li><li>@<strong>The 8472|330154</strong> add some context in <a href=https://github.com/rust-lang/rust/issues/102952#issuecomment-1279725639>comment</a></li><li>possibly <code>P-high</code> or above, should an upstream LLVM issue be reported?</li></ul></li></ul><p><a href="https://github.com/rust-lang/rfcs/issues?q=is%3Aopen+label%3AI-compiler-nominated+label%3AT-compiler">RFC</a></p><ul><li>No nominated RFCs for <code>T-compiler</code> this time.</li></ul><h2 id=next-weeks-wg-checkins>Next week&rsquo;s WG checkins</h2><ul><li>@_<em>WG-diagnostics</em> by @<strong>Esteban Küber</strong> and @<strong>oli</strong></li><li>@_<em>WG-rustc-dev-guide</em> by @<strong>Santiago Pastorino</strong> and @<strong>Yuki Okushi|217081</strong></li></ul></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#announcements>Announcements</a><ul><li><a href=#other-wg-meetings>Other WG meetings</a></li></ul></li><li><a href=#mcpsfcps>MCPs/FCPs</a><ul><li><a href=#wg-checkins>WG checkins</a></li></ul></li><li><a href=#backport-nominations>Backport nominations</a></li><li><a href=#prs-s-waiting-on-team>PRs S-waiting-on-team</a></li><li><a href=#oldest-prs-waiting-for-review>Oldest PRs waiting for review</a></li><li><a href=#issues-of-note>Issues of Note</a><ul><li><a href=#short-summary>Short Summary</a></li><li><a href=#p-critical>P-critical</a></li><li><a href=#p-high-regressions>P-high regressions</a></li></ul></li><li><a href=#performance-logs>Performance logs</a><ul><li></li></ul></li><li><a href=#nominated-issues>Nominated Issues</a></li><li><a href=#next-weeks-wg-checkins>Next week&rsquo;s WG checkins</a></li></ul></nav></aside></main></body></html>