<!doctype html><html lang=en><head><meta http-equiv=refresh content="0; url=https://forge.rust-lang.org/compiler/index.html"></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://rust-lang.github.io/compiler-team/>Rust Lang - Compiler Team</a></h2><style>nav ul a[href$=\2f compiler-team\2fminutes\2ftriage-meeting\2fT-compiler-Meeting-Agenda-2023-09-14\2f ]{color:#004ed0}</style><ul><li><p><strong>About</strong></p><ul><li><a href=/compiler-team/about/CODE_OF_CONDUCT/>Code of Conduct</a></li><li><a href=/compiler-team/about/chat-platform/>Chat Platform</a></li><li><a href=/compiler-team/about/steering-meeting/>Steering Meeting</a></li><li><a href=/compiler-team/about/triage-meeting/>Triage Meeting</a></li></ul></li><li><p><strong>Minutes</strong></p><ul><li><a href=/compiler-team/minutes/design-meeting/>Design Meetings</a></li><li><a href=/compiler-team/minutes/steering-meeting/>Steering Meetings</a></li><li><a href=/compiler-team/minutes/triage-meeting/>Triage Meetings</a></li></ul></li><li><p><strong>Procedures</strong></p><ul><li><a href=/compiler-team/procedures/>Documentation</a></li><li><a href=/compiler-team/procedures/crates/>Crates</a></li><li><a href=/compiler-team/procedures/call-for-participation/>Call for participation</a></li><li><a href=/compiler-team/procedures/form-new-working-group/>Form new working group</a></li></ul></li><li><p><a href=/compiler-team/working-groups/><strong>Working Groups</strong></a></p><ul><li><a href=/compiler-team/working-groups/async-await/>Async Await</a></li><li><a href=/compiler-team/working-groups/debugging/>Debugging</a></li><li><a href=/compiler-team/working-groups/diagnostics/>Diagnostics</a></li><li><a href=/compiler-team/working-groups/rustc-dev-guide/>Rustc Dev Guide</a></li><li><a href=/compiler-team/working-groups/llvm/>LLVM</a></li><li><a href=/compiler-team/working-groups/meta/>Meta</a></li><li><a href=/compiler-team/working-groups/mir-opt/>MIR-opt</a></li><li><a href=/compiler-team/working-groups/nll/>NLL</a></li><li><a href=/compiler-team/working-groups/parallel-rustc/>parallel rustc</a></li><li><a href=/compiler-team/working-groups/pgo/>PGO</a></li><li><a href=/compiler-team/working-groups/pipelining/>pipelining</a></li><li><a href=/compiler-team/working-groups/polonius/>polonius</a></li><li><a href=/compiler-team/working-groups/polymorphization/>polymorphization</a></li><li><a href=/compiler-team/working-groups/prioritization/>Prioritization</a></li><li><a href=/compiler-team/working-groups/rfc-2229/>rfc-2229</a></li><li><a href=/compiler-team/working-groups/rls-2.0/>rls-2.0</a></li><li><a href=/compiler-team/working-groups/self-profile/>Self Profile</a></li><li><a href=/compiler-team/working-groups/traits/>Traits</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/compiler-team/svg/menu.svg alt=Menu>
</label><strong>T Compiler Meeting Agenda 2023 09 14</strong></header><article class=markdown><h1 id=t-compiler-meeting-agenda-2023-09-14>T-compiler Meeting Agenda 2023-09-14</h1><h2 id=announcements>Announcements</h2><ul><li>Rust stable dot release 1.72.1 will likely be postponed to next week (<a href=https://rust-lang.zulipchat.com/#narrow/stream/241545-t-release/topic/1.2E72.2E1.20.3F/near/390810337>Zulip comment</a> in #t-release)</li><li><a href="https://www.google.com/calendar/event?eid=MTg3MDhpdTc3YXBqMGMzbnNxanUwdWZnazhfMjAyMzA5MThUMTQwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Types team meeting: backlog bonanza</a> at <a href=time:2023-09-18T10:00:00-04:00>time:2023-09-18T10:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=N29vMXZqbGZ1MDIxbzllMDI3dGhocWhhZmNfMjAyMzA5MThUMTUwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Types team meeting: Rotating new solver / formality / polonius deep dive</a> at <a href=time:2023-09-18T11:00:00-04:00>time:2023-09-18T11:00:00-04:00</a></li><li>Reminder: if you see a PR/issue that seems like there might be legal implications due to copyright/IP/etc, please let the council know (or at least message @<em><strong>davidtwco</strong> or @</em><strong>Wesley Wiser</strong> so we can pass it along).</li></ul><h3 id=other-wg-meetings-calendar-linkhttpscalendargooglecomcalendarembedsrc6u5rrtce6lrtv07pfi3damgjus40groupcalendargooglecom>Other WG meetings (<a href="https://calendar.google.com/calendar/embed?src=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com">calendar link</a>)</h3><ul><li><a href="https://www.google.com/calendar/event?eid=ajVtNGowYjlzdDNhM2VwZG9vNjg4OTlzNDBfMjAyMzA5MTRUMTYwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">wg-async weekly</a> at <a href=time:2023-09-14T12:00:00-04:00>time:2023-09-14T12:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=N2VsaWszdm9rY3NhdDF1MjdyMjVqajNpcWVfMjAyMzA5MTRUMjAwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">AFIT/RPITIT Impl Triage</a> at <a href=time:2023-09-14T16:00:00-04:00>time:2023-09-14T16:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=NjAwbDEwNzNmMzVsNDZucnFsdDdwbGJrdDRfMjAyMzA5MThUMTQwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">wg-debugging triage meeting</a> at <a href=time:2023-09-18T10:00:00-04:00>time:2023-09-18T10:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=MXJnbzBscDExNHJjNmVsdGhsaW8xcDljMmdfMjAyMzA5MThUMTUwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">wg-rls-2.0 weekly sync-up</a> at <a href=time:2023-09-18T11:00:00-04:00>time:2023-09-18T11:00:00-04:00</a></li></ul><h2 id=mcpsfcps>MCPs/FCPs</h2><ul><li>New MCPs (take a look, see if you like them!)<ul><li>No new proposals this time.</li></ul></li><li>Old MCPs (stale MCP might be closed as per <a href=https://forge.rust-lang.org/compiler/mcp.html#when-should-major-change-proposals-be-closed>MCP procedure</a>)<ul><li>None at this time</li></ul></li><li>Old MCPs (not seconded, take a look)<ul><li>&ldquo;Consistently use "region" terminology in later stages of the compiler&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/634>compiler_team#634</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Consistently.20use.20.22region.22.20terminology.20in.20.E2.80.A6.20compiler-team.23634>Zulip</a>) (last review activity: 3 months ago)</li><li>&ldquo;Add a new <code>--build-id</code> flag to rustc&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/635>compiler_team#635</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20new.20.60--build-id.60.20flag.20to.20rustc.20compiler-team.23635>Zulip</a>)) (last review activity: 3 months ago)</li><li>&ldquo;Simplify and improve explicitness of the check-cfg syntax&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/636>compiler_team#636</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Simplify.20and.20improve.20explicitness.20of.20the.20.E2.80.A6.20compiler-team.23636>Zulip</a>) (last review activity: 3 months ago)</li><li>&ldquo;Add support for visionOS targets&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/642>compiler_team#642</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20support.20for.20visionOS.20targets.20compiler-team.23642>Zulip</a>) (last review activity: about 12 days ago)</li><li>&ldquo;Add illumos Tier3 targets&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/644>compiler_team#644</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20illumos.20Tier3.20targets.20compiler-team.23644>Zulip</a>) (last review activity: about 51 days ago)</li><li>&ldquo;Match the behavior of <code>strip</code> and <code>split-debuginfo</code> across platforms&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/669>compiler_team#669</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Match.20the.20behavior.20of.20.60strip.60.20and.20.60split-.E2.80.A6.20compiler-team.23669>Zulip</a>) (last review activity: about 9 days ago)</li><li>&ldquo;Allow overriding default codegen backend on a per-target basis&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/670>compiler_team#670</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Allow.20overriding.20default.20codegen.20backend.20.E2.80.A6.20compiler-team.23670>Zulip</a>) (last review activity: about 6 days ago)</li><li>&ldquo;Add infrastructure to "compute the ABI of a Rust type, described as a C type"&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/672>compiler_team#672</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20infrastructure.20to.20.22compute.20the.20ABI.20of.E2.80.A6.20compiler-team.23672>Zulip</a>) (last review activity: about 6 days ago)</li></ul></li><li>Pending FCP requests (check your boxes!)<ul><li>&ldquo;Retire the mailing list and make all decisions on zulip&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/649>compiler_team#649</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Retire.20the.20mailing.20list.20and.20make.20all.20deci.E2.80.A6.20compiler-team.23649>Zulip</a>)</li><li>" Add <code>type</code> field to distinguish json diagnostic outputs" <a href=https://github.com/rust-lang/compiler-team/issues/673>compiler_team#673</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Retire.20the.20mailing.20list.20and.20make.20all.20deci.E2.80.A6.20compiler-team.23649>Zulip</a>)</li><li>&ldquo;Tracking issue for dyn upcasting coercion&rdquo; <a href=https://github.com/rust-lang/rust/issues/65991>rust#65991</a></li><li>&ldquo;Add allow-by-default lint for unit bindings&rdquo; <a href=https://github.com/rust-lang/rust/pull/112380>rust#112380</a></li><li>&ldquo;stabilize combining +bundle and +whole-archive link modifiers&rdquo; <a href=https://github.com/rust-lang/rust/pull/113301>rust#113301</a></li><li>&ldquo;Support overriding <code>warnings</code> level for a specific lint via command line&rdquo; <a href=https://github.com/rust-lang/rust/pull/113307>rust#113307</a></li></ul></li><li>Things in FCP (make sure you&rsquo;re good with it)<ul><li>&ldquo;Add a blanket flag to enable/disable codegen UB checks&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/625>compiler_team#625</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20blanket.20flag.20to.20enable.2Fdisable.20code.E2.80.A6.20compiler-team.23625>Zulip</a>)</li><li>&ldquo;Add support for Zephyr OS&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/629>compiler_team#629</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20blanket.20flag.20to.20enable.2Fdisable.20code.E2.80.A6.20compiler-team.23625>Zulip</a>)</li><li>&ldquo;Report all lints, even if other errors already occurred.&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/633>compiler_team#633</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20blanket.20flag.20to.20enable.2Fdisable.20code.E2.80.A6.20compiler-team.23625>Zulip</a>)</li><li>&ldquo;Add option to pass environment variables&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/653>compiler_team#653</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20blanket.20flag.20to.20enable.2Fdisable.20code.E2.80.A6.20compiler-team.23625>Zulip</a>)</li><li>&ldquo;Add tidy rule against <code>issue-[0-9]+.rs</code> tests&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/658>compiler_team#658</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20blanket.20flag.20to.20enable.2Fdisable.20code.E2.80.A6.20compiler-team.23625>Zulip</a>)</li><li>&ldquo;Add <code>builtin:$path</code> option to the <code>-L</code> flag&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/659>compiler_team#659</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20blanket.20flag.20to.20enable.2Fdisable.20code.E2.80.A6.20compiler-team.23625>Zulip</a>)</li><li>&ldquo;Promote loongarch64-unknown-none* to Tier 2&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/664>compiler_team#664</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Promote.20loongarch64-unknown-none.2A.20to.20Tier.E2.80.A6.20compiler-team.23664>Zulip</a>)</li><li>&ldquo;Support larger sizes in rmeta tables and incr comp alloc offsets&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/666>compiler_team#666</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Promote.20loongarch64-unknown-none.2A.20to.20Tier.E2.80.A6.20compiler-team.23664>Zulip</a>)</li><li>&ldquo;Condemn <code>asmjs-unknown-emscripten</code> to push a boulder up a hill for eternity&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/668>compiler_team#668</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Promote.20loongarch64-unknown-none.2A.20to.20Tier.E2.80.A6.20compiler-team.23664>Zulip</a>)</li><li>&ldquo;Create a binary-size working group&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/671>compiler_team#671</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Promote.20loongarch64-unknown-none.2A.20to.20Tier.E2.80.A6.20compiler-team.23664>Zulip</a>)</li><li>&ldquo;Stabilize <code>--json=unused-externs(-silent)</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/674>compiler_team#674</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Promote.20loongarch64-unknown-none.2A.20to.20Tier.E2.80.A6.20compiler-team.23664>Zulip</a>)</li><li>&ldquo;Change how closure and generator types are printed to avoid clash with slice types&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/675>compiler_team#675</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Promote.20loongarch64-unknown-none.2A.20to.20Tier.E2.80.A6.20compiler-team.23664>Zulip</a>)</li></ul></li><li>Accepted MCPs<ul><li>&ldquo;Make unknown/renamed/removed lints passed via command line respect lint levels&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/667>compiler-team#667</a></li></ul></li><li>Finalized FCPs (disposition merge)<ul><li>None</li></ul></li></ul><h3 id=wg-checkins>WG checkins</h3><ul><li>T-types checkin by @<strong>Jack Huey</strong> (<a href=https://hackmd.io/1S12RB_hQQ24jzNcdman4w>HackMD link</a>)<blockquote><ul><li>General team things<ul><li>We have an in-person meetup in Brussels next month prior to EuroRust<ul><li>Let us know if there&rsquo;s anything you&rsquo;d like us to discuss</li></ul></li></ul></li><li>Planning to open a stabilization report &ldquo;any day now&rdquo; for AFIT/RPITIT</li><li>#114740, #115008, #114933 all open to try to fix unsoundness w.r.t TAITs</li><li>Ongoing work to generate a-mir-formality code via SMIR</li><li>Work on new trait solver: overflow handling and provisional cache</li><li>There&rsquo;s a WIP stabilization report for trait upcasting</li><li>Open FCP for negative impls</li><li>@<strong>lqd</strong> has prepared a PR that reimplements the existing borrow-check in a polonius style</li></ul></blockquote></li></ul><h2 id=backport-nominations>Backport nominations</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-compiler">T-compiler stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-compiler">T-compiler beta</a></p><ul><li>:beta: [1.73] &ldquo;MCP661: Move wasm32-wasi-preview1-threads target to Tier 2&rdquo; <a href=https://github.com/rust-lang/rust/pull/115345>rust#115345</a><ul><li>(previously Tier 3)</li><li>nominated by @<strong>Wesley Wiser</strong> (<a href=https://github.com/rust-lang/rust/pull/115345#issuecomment-1716258534>comment</a>): PR author recommends backport as this PR bumps the version of wasi-libc we use which fixes some issues with the target. The target is now Tier 2 in 1.73 so backporting the fix will improve the state of the target in its first Tier 2 release.</li></ul></li></ul><ul><li>:beta: [1.73] &ldquo;fix(resolve): update def if binding is warning ambiguity&rdquo; <a href=https://github.com/rust-lang/rust/pull/115389>rust#115389</a><ul><li>Fixes beta regression #115774 from the latest crater run, hitting a few crates (so potentially annoying?)</li></ul></li></ul><ul><li>:beta: [1.73] &ldquo;Don&rsquo;t require <code>Drop</code> for <code>[PhantomData&lt;T>; N]</code> where <code>N</code> and <code>T</code> are generic, if <code>T</code> requires <code>Drop</code>&rdquo; <a href=https://github.com/rust-lang/rust/pull/115527>rust#115527</a><ul><li>authored by @<strong>oli</strong></li><li>Closes fixes #115403 and #115410 (also raised an error in the latest crater run, see <a href=https://github.com/rust-lang/rust/pull/115527#issuecomment-1715747550>comment</a>)</li></ul></li></ul><ul><li>:beta: [1.73] &ldquo;Only suggest turbofish in patterns if we may recover&rdquo; <a href=https://github.com/rust-lang/rust/pull/115785>rust#115785</a><ul><li>authored by @<strong>fmease</strong></li><li>closes #115780 a perhaps P-high regression (produces an error falsely suggesting to use the <code>::</code> operator)</li></ul></li></ul><ul><li>:beta: [1.73] &ldquo;Expose try_destructure_mir_constant_for_diagnostics directly to clippy&rdquo; <a href=https://github.com/rust-lang/rust/pull/115819>rust#115819</a><ul><li>fresh from @<strong>oli</strong></li><li>hopefully squashing #83085: avoid clippy trying to use the query in ways that incremental caching will inevitably cause problems with</li></ul></li></ul><ul><li>No stable nominations for <code>T-compiler</code> this time.</li></ul><h2 id=prs-s-waiting-on-team>PRs S-waiting-on-team</h2><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p><ul><li>Other issues <a href=https://hackmd.io/XYr1BrOWSiqCrl8RCWXRaQ>in progress or waiting on other teams</a></li></ul><h2 id=issues-of-note>Issues of Note</h2><h3 id=short-summary>Short Summary</h3><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical">2 T-compiler P-critical issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical+no%3Aassignee">2 of those are unassigned</a></li></ul></li><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high">62 T-compiler P-high issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high+no%3Aassignee">34 of those are unassigned</a></li></ul></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-beta>1 P-critical, 2 P-high, 1 P-medium, 1 P-low regression-from-stable-to-beta</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-nightly>0 P-critical, 1 P-high, 2 P-medium, 2 P-low regression-from-stable-to-nightly</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-stable>3 P-critical, 38 P-high, 100 P-medium, 18 P-low regression-from-stable-to-stable</a></li></ul><h3 id=p-critical>P-critical</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;ICE: unexpected initial operand type.&rdquo; <a href=https://github.com/rust-lang/rust/issues/114858>rust#114858</a><ul><li>partially fixed in <a href=https://github.com/rust-lang/rust/pull/115215>rust#115215</a>, needs more work though (<a href=https://github.com/rust-lang/rust/pull/115215#issuecomment-1710401747>comment</a>)</li></ul></li><li>&ldquo;Miscompile with <code>-Copt-level=1</code> after update to LLVM 17&rdquo; <a href=https://github.com/rust-lang/rust/issues/115681>rust#115681</a><ul><li>Upstream fix in progress at <a href=https://github.com/llvm/llvm-project/pull/65882>llvm-project#65882</a></li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-types">T-types</a></p><ul><li>&ldquo;RPIT hidden types can be ill-formed&rdquo; <a href=https://github.com/rust-lang/rust/issues/114728>rust#114728</a><ul><li>will be fixed by <a href=https://github.com/rust-lang/rust/pull/114933>rust#114933</a>, authored by @<strong>aliemjay</strong>, being reviewed</li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-rustdoc">T-rustdoc</a></p><ul><li>&ldquo;ICE when building documentation: DefId(20:797 &mldr;) does not have a &ldquo;object_lifetime_default&rdquo;&rdquo; <a href=https://github.com/rust-lang/rust/issues/115179>rust#115179</a><ul><li>fixed by <a href=https://github.com/rust-lang/rust/pull/115276>rust#115276</a> (beta accepted)</li></ul></li></ul><h3 id=p-high-regressions>P-high regressions</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-beta+label%3AP-high+-label%3AT-infra+-label%3AT-libs+-label%3AT-libs-api+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">P-high beta regressions</a></p><ul><li>&ldquo;regression: as_place unwrap None&rdquo; <a href=https://github.com/rust-lang/rust/issues/115778>rust#115778</a><ul><li>@<strong>apiraino</strong> assigned P-high (but unsure about priority), needs bisection and maybe a bit more context. Might be related to #110453</li></ul></li><li>&ldquo;regression: generic args in patterns require the turbofish syntax&rdquo; <a href=https://github.com/rust-lang/rust/issues/115780>rust#115780</a><ul><li>fixed by #115785</li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-nightly+label%3AP-high+no%3Aassignee+-label%3AT-infra+-label%3AT-libs+-label%3AT-libs-api+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core+">Unassigned P-high nightly regressions</a></p><ul><li>No unassigned <code>P-high</code> nightly regressions this time.</li></ul><h2 id=performance-logs>Performance logs</h2><blockquote><p><a href=https://github.com/rust-lang/rustc-perf/blob/master/triage/2023-09-13.md>triage logs for 2023-09-13</a></p></blockquote><p>An interesting week. We saw a massive improvement to instruction-counts across
over a hundred benchmarks, thanks to #110050 an improved encoding scheme for the
dependency graphs that underlie incremental-compilation. However, these
instruction-count improvements did not translate to direct cycle time
improvements. We also saw an improvement to our artifact sizes due to #115306.
Beyond that, we had a scattering of small regressions to instruction-counts that
were justified because they were associated with bug fixes.</p><p>Triage done by <strong>@pnkfelix</strong>.
Revision range: <a href="https://perf.rust-lang.org/?start=15e52b05ca8f63e0da27c808680388717e5b997e&amp;end=7e0261e7ea2085bdc0bc3d0fd6776bf343473858&amp;absolute=false&amp;stat=instructions%3Au">15e52b05..7e0261e7</a></p><p><strong>Summary</strong>:</p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>2.8%</td><td style=text-align:center>[0.7%, 10.2%]</td><td style=text-align:center>11</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>1.5%</td><td style=text-align:center>[0.4%, 7.7%]</td><td style=text-align:center>9</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-1.7%</td><td style=text-align:center>[-5.9%, -0.2%]</td><td style=text-align:center>112</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-1.3%</td><td style=text-align:center>[-2.7%, -0.4%]</td><td style=text-align:center>41</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-1.3%</td><td style=text-align:center>[-5.9%, 10.2%]</td><td style=text-align:center>123</td></tr></tbody></table><p>3 Regressions, 2 Improvements, 5 Mixed; 2 of them in rollups
84 artifact comparisons made in total</p><h4 id=regressions>Regressions</h4><p>Add <code>FreezeLock</code> type and use it to store <code>Definitions</code> <a href=https://github.com/rust-lang/rust/pull/115401>#115401</a> <a href="https://perf.rust-lang.org/compare.html?start=c1d80ba9e28a9248158ab09fe593b0724647e642&amp;end=a0c28cd9dc99d9acb015d06f6b27c640adad3550&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.2%, 0.4%]</td><td style=text-align:center>11</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.3%, 0.3%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.2%, 0.4%]</td><td style=text-align:center>11</td></tr></tbody></table><ul><li>The impact here is <a href=https://github.com/rust-lang/rust/pull/115401#issuecomment-1709461275>hypothesized to be</a> due to serial/parallel trade-off; we benchmark the serial case and observe a small regression, while the parallel case is observing an improvement of roughly the same caliber.</li><li>Marked as triaged</li></ul><p>Rollup of 6 pull requests <a href=https://github.com/rust-lang/rust/pull/115672>#115672</a> <a href="https://perf.rust-lang.org/compare.html?start=cd71a37f320c379df47ff64abd934f3a2da94c26&amp;end=309af3442a1808888e3ceb2eacccbf4140eba1e0&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>4.2%</td><td style=text-align:center>[0.8%, 9.8%]</td><td style=text-align:center>5</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>4.2%</td><td style=text-align:center>[0.8%, 9.8%]</td><td style=text-align:center>5</td></tr></tbody></table><ul><li>already marked as triaged</li><li>all five regressions are to doc benchmarks, due to new feature added in <a href=https://github.com/rust-lang/rust/pull/115201>https://github.com/rust-lang/rust/pull/115201</a></li></ul><p>Use the same DISubprogram for each instance of the same inlined function within a caller <a href=https://github.com/rust-lang/rust/pull/115417>#115417</a> <a href="https://perf.rust-lang.org/compare.html?start=ffc48e3eda36e288f76b4022d72d94321887ebf5&amp;end=62ebe3a2b177d50ec664798d731b8a8d1a9120d1&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>1.0%</td><td style=text-align:center>[0.6%, 1.3%]</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>1.0%</td><td style=text-align:center>[0.6%, 1.3%]</td><td style=text-align:center>3</td></tr></tbody></table><ul><li>already marked as triaged</li><li>regression was expected, though we may be able to claw back performance after resolving rust#115455</li></ul><h4 id=improvements>Improvements</h4><p>Span tweaks <a href=https://github.com/rust-lang/rust/pull/115594>#115594</a> <a href="https://perf.rust-lang.org/compare.html?start=38bbc2ce03a2369d96898d58cc0aa06f1a4b5dcf&amp;end=6cc1898f5f4f3ffec96ce2b7c3be723db558d470&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.4%, -0.4%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.5%, -0.3%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.4%, -0.4%]</td><td style=text-align:center>1</td></tr></tbody></table><p>Disentangle <code>Debug</code> and <code>Display</code> for <code>Ty</code>. <a href=https://github.com/rust-lang/rust/pull/115661>#115661</a> <a href="https://perf.rust-lang.org/compare.html?start=e39976ff89f91b742916349859e8d877a4876783&amp;end=7d1e416d3234bdfed6443dc2e4301f2d6f063525&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.3%, -0.2%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.5%, -0.2%]</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.3%, -0.2%]</td><td style=text-align:center>4</td></tr></tbody></table><h4 id=mixed>Mixed</h4><p>Represent MIR composite debuginfo as projections instead of aggregates <a href=https://github.com/rust-lang/rust/pull/115252>#115252</a> <a href="https://perf.rust-lang.org/compare.html?start=a0c28cd9dc99d9acb015d06f6b27c640adad3550&amp;end=a5b2ac6906d2b688db4938f842057cde6054449c&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>3.9%</td><td style=text-align:center>[3.9%, 3.9%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.3%, -0.3%]</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.4%, -0.3%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>1.1%</td><td style=text-align:center>[-0.3%, 3.9%]</td><td style=text-align:center>3</td></tr></tbody></table><ul><li>The single regression is to exa-0.10.1-opt-full</li><li>However, nnethercote noted that this PR introduced broad (if small)
regressions to linked artifact (aka binary) sizes (in both opt and debug settings)</li><li>not marking as triaged</li></ul><p>Use a specialized varint + bitpacking scheme for DepGraph encoding <a href=https://github.com/rust-lang/rust/pull/110050>#110050</a> <a href="https://perf.rust-lang.org/compare.html?start=4e5b31c2b0023dba53a1b2827f4b7ac42aaaa18f&amp;end=f00c1399987c60b4e884afc42f4aa6226855e9ae&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>[0.3%, 0.8%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-1.7%</td><td style=text-align:center>[-5.8%, -0.3%]</td><td style=text-align:center>104</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-1.4%</td><td style=text-align:center>[-2.9%, -0.5%]</td><td style=text-align:center>32</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-1.7%</td><td style=text-align:center>[-5.8%, -0.3%]</td><td style=text-align:center>104</td></tr></tbody></table><ul><li>on its surface, the improvements to instruction counts here clearly outweigh the regressions</li><li>it is worth noting that the cycle counts did not see the same trends;
there were zero improvements and 7 primary regressions to cycle counts.</li><li>still, marking as triaged; this PR has gone through enough performance evaluation already.</li></ul><p>Rollup of 7 pull requests <a href=https://github.com/rust-lang/rust/pull/115665>#115665</a> <a href="https://perf.rust-lang.org/compare.html?start=3d249706aa8b0167dd49efa1b3ce7cc0e9cbba08&amp;end=de4cba3a98a15a891ad708a049c7fb5682083d97&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.6%, 0.7%]</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>[0.5%, 0.7%]</td><td style=text-align:center>5</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.3%, -0.3%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.6%, 0.7%]</td><td style=text-align:center>2</td></tr></tbody></table><ul><li>primary regressions were helloworld-check (incr-unchanged and incr-patched:println)</li><li>marking as triaged; not worth investigating a rollup for that benchmark.</li></ul><p>Avoid a <code>source_span</code> query when encoding Spans into query results <a href=https://github.com/rust-lang/rust/pull/115657>#115657</a> <a href="https://perf.rust-lang.org/compare.html?start=5ede9408945b46ab183dd228253297bdf62304f7&amp;end=38bbc2ce03a2369d96898d58cc0aa06f1a4b5dcf&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>[0.3%, 0.4%]</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.4%, 1.0%]</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>[-0.4%, -0.4%]</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-0.6%, -0.4%]</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.0%</td><td style=text-align:center>[-0.4%, 0.4%]</td><td style=text-align:center>4</td></tr></tbody></table><ul><li>primary regressions are to diesel-check (full and incr-full).</li><li>This is fixing a soundness issue with the dep-graph maintenance; therefore, these regressions seem tolerable.</li><li>Marking as triaged</li></ul><p>Encode only MIR reachable from other crates <a href=https://github.com/rust-lang/rust/pull/115306>#115306</a> <a href="https://perf.rust-lang.org/compare.html?start=8e37c509fda1f7387895e33783cba94ea3960a29&amp;end=7418413a7fad1c4e8b82f970bd78af030e5f813e&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.8%</td><td style=text-align:center>[0.3%, 2.4%]</td><td style=text-align:center>15</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>1.9%</td><td style=text-align:center>[0.3%, 9.1%]</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-1.3%</td><td style=text-align:center>[-2.7%, -0.4%]</td><td style=text-align:center>12</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.9%</td><td style=text-align:center>[-1.2%, -0.7%]</td><td style=text-align:center>5</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.1%</td><td style=text-align:center>[-2.7%, 2.4%]</td><td style=text-align:center>27</td></tr></tbody></table><ul><li>the big (>1%) primary regressions were to three check-incr-unchanged cases: cranelift-codegen-0.82.1, html5ever-0.26.0, and hyper-0.14.18</li><li>the regressions seem unfortunate, but tolerable given the improvement to linked artifact sizes</li><li>marking as triaged</li></ul><h2 id=nominated-issues>Nominated Issues</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-compiler-nominated">T-compiler</a></p><ul><li>None</li></ul><p><a href="https://github.com/rust-lang/rfcs/issues?q=is%3Aopen+label%3AI-compiler-nominated">RFC</a></p><ul><li>No I-compiler-nominated RFCs this time.</li></ul><h3 id=oldest-prs-waiting-for-review>Oldest PRs waiting for review</h3><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-asc+label%3AS-waiting-on-review+draft%3Afalse+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;Fix ICE when trying to convert <code>ConstKind::Error</code> to usize&rdquo; <a href=https://github.com/rust-lang/rust/pull/113712>rust#113712</a>(last review activity: about 46 days ago)<ul><li>cc: @<strong>uwu</strong></li></ul></li><li>&ldquo;Pretty-print argument-position impl trait to name it.&rdquo; <a href=https://github.com/rust-lang/rust/pull/113955>rust#113955</a>(last review activity: about 31 days ago)<ul><li>cc @<strong>Waffle Lapkin</strong></li></ul></li></ul><h2 id=next-weeks-wg-checkins>Next week&rsquo;s WG checkins</h2><ul><li>@_<em>WG-mir-opt</em> by @<strong>oli</strong></li><li>@_<em>T-rust-analyzer</em> by @<strong>Lukas Wirth</strong></li></ul><p>Next meetings&rsquo; agenda draft: <a href=https://hackmd.io/CG_A-TBVTBqsH_mfID3Fvg>https://hackmd.io/CG_A-TBVTBqsH_mfID3Fvg</a></p></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#announcements>Announcements</a><ul><li><a href=#other-wg-meetings-calendar-linkhttpscalendargooglecomcalendarembedsrc6u5rrtce6lrtv07pfi3damgjus40groupcalendargooglecom>Other WG meetings (<a href="https://calendar.google.com/calendar/embed?src=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com">calendar link</a>)</a></li></ul></li><li><a href=#mcpsfcps>MCPs/FCPs</a><ul><li><a href=#wg-checkins>WG checkins</a></li></ul></li><li><a href=#backport-nominations>Backport nominations</a></li><li><a href=#prs-s-waiting-on-team>PRs S-waiting-on-team</a></li><li><a href=#issues-of-note>Issues of Note</a><ul><li><a href=#short-summary>Short Summary</a></li><li><a href=#p-critical>P-critical</a></li><li><a href=#p-high-regressions>P-high regressions</a></li></ul></li><li><a href=#performance-logs>Performance logs</a><ul><li></li></ul></li><li><a href=#nominated-issues>Nominated Issues</a><ul><li><a href=#oldest-prs-waiting-for-review>Oldest PRs waiting for review</a></li></ul></li><li><a href=#next-weeks-wg-checkins>Next week&rsquo;s WG checkins</a></li></ul></nav></aside></main></body></html>