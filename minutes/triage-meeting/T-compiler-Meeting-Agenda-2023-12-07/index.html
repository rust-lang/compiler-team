<!doctype html><html lang=en><head><meta http-equiv=refresh content="0; url=https://forge.rust-lang.org/compiler/index.html"></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://rust-lang.github.io/compiler-team/>Rust Lang - Compiler Team</a></h2><style>nav ul a[href$=\2f compiler-team\2fminutes\2ftriage-meeting\2fT-compiler-Meeting-Agenda-2023-12-07\2f ]{color:#004ed0}</style><ul><li><p><strong>About</strong></p><ul><li><a href=/compiler-team/about/CODE_OF_CONDUCT/>Code of Conduct</a></li><li><a href=/compiler-team/about/chat-platform/>Chat Platform</a></li><li><a href=/compiler-team/about/steering-meeting/>Steering Meeting</a></li><li><a href=/compiler-team/about/triage-meeting/>Triage Meeting</a></li></ul></li><li><p><strong>Minutes</strong></p><ul><li><a href=/compiler-team/minutes/design-meeting/>Design Meetings</a></li><li><a href=/compiler-team/minutes/steering-meeting/>Steering Meetings</a></li><li><a href=/compiler-team/minutes/triage-meeting/>Triage Meetings</a></li></ul></li><li><p><strong>Procedures</strong></p><ul><li><a href=/compiler-team/procedures/>Documentation</a></li><li><a href=/compiler-team/procedures/crates/>Crates</a></li><li><a href=/compiler-team/procedures/call-for-participation/>Call for participation</a></li><li><a href=/compiler-team/procedures/form-new-working-group/>Form new working group</a></li></ul></li><li><p><a href=/compiler-team/working-groups/><strong>Working Groups</strong></a></p><ul><li><a href=/compiler-team/working-groups/async-await/>Async Await</a></li><li><a href=/compiler-team/working-groups/debugging/>Debugging</a></li><li><a href=/compiler-team/working-groups/diagnostics/>Diagnostics</a></li><li><a href=/compiler-team/working-groups/rustc-dev-guide/>Rustc Dev Guide</a></li><li><a href=/compiler-team/working-groups/llvm/>LLVM</a></li><li><a href=/compiler-team/working-groups/meta/>Meta</a></li><li><a href=/compiler-team/working-groups/mir-opt/>MIR-opt</a></li><li><a href=/compiler-team/working-groups/nll/>NLL</a></li><li><a href=/compiler-team/working-groups/parallel-rustc/>parallel rustc</a></li><li><a href=/compiler-team/working-groups/pgo/>PGO</a></li><li><a href=/compiler-team/working-groups/pipelining/>pipelining</a></li><li><a href=/compiler-team/working-groups/polonius/>polonius</a></li><li><a href=/compiler-team/working-groups/polymorphization/>polymorphization</a></li><li><a href=/compiler-team/working-groups/prioritization/>Prioritization</a></li><li><a href=/compiler-team/working-groups/rfc-2229/>rfc-2229</a></li><li><a href=/compiler-team/working-groups/rls-2.0/>rls-2.0</a></li><li><a href=/compiler-team/working-groups/self-profile/>Self Profile</a></li><li><a href=/compiler-team/working-groups/traits/>Traits</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/compiler-team/svg/menu.svg alt=Menu>
</label><strong>T Compiler Meeting Agenda 2023 12 07</strong></header><article class=markdown><h1 id=t-compiler-meeting-agenda-2023-12-07>T-compiler Meeting Agenda 2023-12-07</h1><h2 id=announcements>Announcements</h2><ul><li>1.74.1 is released (<a href=https://rust-lang.zulipchat.com/#narrow/stream/241545-t-release/topic/1.2E74.2E1>Zulip</a>) and <a href=https://blog.rust-lang.org/2023/12/07/Rust-1.74.1.html>blog post</a><ul><li>With some P-high/critical regression were fixed (a big thanks to those that helped debugging and fixing)</li></ul></li><li>Reminder: if you see a PR/issue that seems like there might be legal implications due to copyright/IP/etc, please let us know (or at least message @<em><strong>davidtwco</strong> or @</em><strong>Wesley Wiser</strong> so we can pass it along).</li></ul><h3 id=other-wg-meetings-calendar-linkhttpscalendargooglecomcalendarembedsrc6u5rrtce6lrtv07pfi3damgjus40groupcalendargooglecom>Other WG meetings (<a href="https://calendar.google.com/calendar/embed?src=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com">calendar link</a>)</h3><ul><li><a href="https://www.google.com/calendar/event?eid=N2VsaWszdm9rY3NhdDF1MjdyMjVqajNpcWVfMjAyMzEyMDdUMjEwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">AFIT/RPITIT Impl Triage</a> at <a href=time:2023-12-07T16:00:00-05:00>time:2023-12-07T16:00:00-05:00</a></li><li><a href="https://www.google.com/calendar/event?eid=MTg3MDhpdTc3YXBqMGMzbnNxanUwdWZnazhfMjAyMzEyMTFUMTUwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Types team meeting</a> at <a href=time:2023-12-11T10:00:00-05:00>time:2023-12-11T10:00:00-05:00</a></li><li><a href="https://www.google.com/calendar/event?eid=N29vMXZqbGZ1MDIxbzllMDI3dGhocWhhZmNfMjAyMzEyMTFUMTYwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">[Types] Rotating new solver / formality / polonius deep dive</a> at <a href=time:2023-12-11T11:00:00-05:00>time:2023-12-11T11:00:00-05:00</a></li></ul><h2 id=mcpsfcps>MCPs/FCPs</h2><ul><li>New MCPs (take a look, see if you like them!)<ul><li>&ldquo;Require <code>--known-broken-llvm</code> flag for x.py to skip codegen tests on old LLVM&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/687>compiler-team#687</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Require.20.60--known-broken-llvm.60.20flag.20for.20x.2E.E2.80.A6.20compiler-team.23687>Zulip</a>)<ul><li>concern <a href=https://github.com/rust-lang/compiler-team/issues/687#issuecomment-1809869102>codegen-tests-are-for-new-optimizations</a></li></ul></li><li>&ldquo;Semantics of <code>-Cinstrument-coverage=all</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/690>compiler-team#690</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Semantics.20of.20.60-Cinstrument-coverage.3Dall.60.20compiler-team.23690>Zulip</a>)</li><li>&ldquo;Add hygiene attributes to compile expanded source code&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/692>compiler-team#692</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20option.20to.20compile.20expanded.20ASTs.20for.20h.E2.80.A6.20compiler-team.23692>Zulip</a>)<ul><li>concern: <a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Add.20hygiene.20attributes.20to.20compile.20expande.E2.80.A6.20compiler-team.23692/near/403245433>added-complexity-to-frontend</a></li></ul></li><li>&ldquo;New Tier-3 target: <code>wasm32-wasi-preview2</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/694>compiler-team#694</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/New.20Tier-3.20target.3A.20.60wasm32-wasi-preview2.60.20compiler-team.23694>Zulip</a>)</li><li>&ldquo;Smooth the renaming transition of <code>wasm32-wasi</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/695>compiler-team#695</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Smooth.20the.20renaming.20transition.20of.20.60wasm32.E2.80.A6.20compiler-team.23695>Zulip</a>)</li></ul></li><li>Old MCPs (not seconded, take a look)<ul><li>&ldquo;De-llvm some integer intrinsics that on the Rust side always use <code>u32</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/693>compiler-team#693</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/De-llvm.20some.20integer.20intrinsics.20that.20on.20t.E2.80.A6.20compiler-team.23693>Zulip</a>) (last review activity: about 10 days ago)</li></ul></li><li>Pending FCP requests (check your boxes!)<ul><li>&ldquo;Add a new <code>--build-id</code> flag to rustc&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/635>compiler-team#635</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20new.20.60--build-id.60.20flag.20to.20rustc.20compiler-team.23635>Zulip</a>)<ul><li>concern <a href=https://github.com/rust-lang/compiler-team/issues/635#issuecomment-1777545767>option-name</a></li><li>concern <a href=https://github.com/rust-lang/compiler-team/issues/635#issuecomment-1777545767>other-existing-options</a></li></ul></li><li>&ldquo;Retire the mailing list and make all decisions on zulip&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/649>compiler-team#649</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Retire.20the.20mailing.20list.20and.20make.20all.20deci.E2.80.A6.20compiler-team.23649>Zulip</a>)<ul><li>concern <a href=https://github.com/rust-lang/compiler-team/issues/649#issuecomment-1618781780>automatic-sync</a></li><li>concern <a href=https://github.com/rust-lang/compiler-team/issues/649#issuecomment-1618781780>single-point-of-failure-via-stream-archival</a></li></ul></li><li>&ldquo;Stabilize <code>--json=unused-externs(-silent)</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/674>compiler-team#674</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Stabilize.20.60--json.3Dunused-externs.28-silent.29.60.20compiler-team.23674>Zulip</a>)<ul><li>concern <a href=https://github.com/rust-lang/compiler-team/issues/674#issuecomment-1746696850>lint-interactions</a></li></ul></li><li>&ldquo;Support overriding <code>warnings</code> level for a specific lint via command line&rdquo; <a href=https://github.com/rust-lang/rust/pull/113307>rust#113307</a><ul><li>concern <a href=https://github.com/rust-lang/rust/pull/113307#issuecomment-1621305927>nesting</a></li></ul></li><li>&ldquo;Update Windows platform support&rdquo; <a href=https://github.com/rust-lang/rust/pull/115141>rust#115141</a><ul><li>concern <a href=https://github.com/rust-lang/rust/pull/115141#issuecomment-1740089459>needs blog post</a></li></ul></li><li>&ldquo;make soft_unstable show up in future breakage reports&rdquo; <a href=https://github.com/rust-lang/rust/pull/116274>rust#116274</a></li><li>&ldquo;Stabilize Wasm target features that are in phase 4 and 5&rdquo; <a href=https://github.com/rust-lang/rust/pull/117457>rust#117457</a></li><li>&ldquo;static mut: allow mutable reference to arbitrary types, not just slices and arrays&rdquo; <a href=https://github.com/rust-lang/rust/pull/117614>rust#117614</a></li></ul></li><li>Things in FCP (make sure you&rsquo;re good with it)<ul><li>&ldquo;Promote tier 3 riscv32 bare metal targets to tier 2&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/701>compiler-team#701</a></li><li>&ldquo;Add a stable flag to enable/disable codegen UB checks&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/625>compiler-team#625</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20a.20blanket.20flag.20to.20enable.2Fdisable.20code.E2.80.A6.20compiler-team.23625>Zulip</a>)<ul><li>concern <a href=https://github.com/rust-lang/compiler-team/issues/625#issuecomment-1672919695>needs-fcp</a></li></ul></li><li>&ldquo;Report all lints, even if other errors already occurred.&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/633>compiler-team#633</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Report.20all.20lints.2C.20even.20if.20other.20errors.20al.E2.80.A6.20compiler-team.23633>Zulip</a>)<ul><li>concern <a href=https://github.com/rust-lang/compiler-team/issues/633#issuecomment-1545905322>errors-inherently-higher-priority</a></li></ul></li><li>&ldquo;Add infrastructure to &ldquo;compute the ABI of a Rust type, described as a C type&rdquo;&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/672>compiler-team#672</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20infrastructure.20to.20.22compute.20the.20ABI.20of.E2.80.A6.20compiler-team.23672>Zulip</a>)</li><li>&ldquo;Stabilize <code>--json=unused-externs(-silent)</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/674>compiler-team#674</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Stabilize.20.60--json.3Dunused-externs.28-silent.29.60.20compiler-team.23674>Zulip</a>)</li><li>&ldquo;Support response files generated by ninja with <code>@ninja:path</code> syntax&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/684>compiler-team#684</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Use.20shell.20parsing.20for.20response.20files.20compiler-team.23684>Zulip</a>)</li><li>&ldquo;Add <code>-Zexperimental-target</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/685>compiler-team#685</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20.60-Zexperimental-target.60.20compiler-team.23685>Zulip</a>)<ul><li>concern <a href=https://github.com/rust-lang/compiler-team/issues/685#issuecomment-1804693114>doesn-t-justify-the-maintenance</a></li></ul></li><li>&ldquo;Consistent <code>Handler</code> naming&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/699>compiler-team#699</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Consistent.20.60Handler.60.20naming.20compiler-team.23699>Zulip</a>)</li><li>&ldquo;Stabilize THIR unsafeck&rdquo; <a href=https://github.com/rust-lang/rust/pull/117673>rust#117673</a></li><li>&ldquo;guarantee that char and u32 are ABI-compatible&rdquo; <a href=https://github.com/rust-lang/rust/pull/118032>rust#118032</a></li><li>&ldquo;Propose rules for team repo maintenance&rdquo; <a href=https://github.com/rust-lang/rust-forge/pull/707>rust-forge#707</a></li></ul></li><li>Accepted MCPs<ul><li>&ldquo;Add -Z small-data-threshold&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/689>compiler-team#689</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Add.20-Z.20small-data-threshold.20compiler-team.23689>Zulip</a>)</li><li>&ldquo;Add <code>$message_type</code> field to distinguish json diagnostic outputs&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/673>compiler-team#673</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/.20Add.20.60type.60.20field.20to.20json.20diagnostic.20outp.E2.80.A6.20compiler-team.23673>Zulip</a>)</li><li>&ldquo;Set alignment of <code>i128</code> to 128 bits for x86&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/683>compiler-team#683</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Set.20alignment.20of.20.60i128.60.20to.20128.20bits.20compiler-team.23683>Zulip</a>)</li><li>&ldquo;Stop emitting less useful debug sections: <code>.debug_pubnames</code> and <code>.debug_pubtypes</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/688>compiler-team#688</a> (<a href=https://rust-lang.zulipchat.com/#narrow/stream/233931-xxx/topic/Flag.20to.20stop.20emitting.20less.20useful.20debug.20s.E2.80.A6.20compiler-team.23688>Zulip</a>)</li></ul></li><li>Finalized FCPs (disposition merge)<ul><li>&ldquo;Tracking issue for dyn upcasting coercion&rdquo; <a href=https://github.com/rust-lang/rust/issues/65991>rust#65991</a></li><li>&ldquo;TAIT defining scope options&rdquo; <a href=https://github.com/rust-lang/rust/issues/107645>rust#107645</a><ul><li>Note: seems there is disagreement about the status of this proposal. See this <a href=https://github.com/rust-lang/rust/issues/107645#issuecomment-1819331287>comment</a> and also @<strong>Jack Huey</strong> <a href=https://github.com/rust-lang/rust/issues/107645#issuecomment-1789947052>comment</a></li></ul></li><li>&ldquo;[style edition 2024] Combine all delimited exprs as last argument&rdquo; <a href=https://github.com/rust-lang/rust/pull/114764>rust#114764</a></li><li>&ldquo;generalize: handle occurs check failure in aliases&rdquo; <a href=https://github.com/rust-lang/rust/pull/117088>rust#117088</a></li><li>&ldquo;dropck_outlives check whether generator witness needs_drop&rdquo; <a href=https://github.com/rust-lang/rust/pull/117134>rust#117134</a></li><li>&ldquo;Stabilize C string literals&rdquo; <a href=https://github.com/rust-lang/rust/pull/117472>rust#117472</a></li><li>&ldquo;generator layout: ignore fake borrows&rdquo; <a href=https://github.com/rust-lang/rust/pull/117712>rust#117712</a></li></ul></li></ul><h3 id=wg-checkins>WG checkins</h3><ul><li>@_<em>T-rust-analyzer</em> checkin by @<strong>Lukas Wirth</strong> (<a href=https://hackmd.io/CG_A-TBVTBqsH_mfID3Fvg#WG-checkins>previous checkin</a>):<blockquote><p>Big things happened! rust-analyzer now uses proper spans for associating things from macro inputs to expansions (although not quite what rustc uses, as rustc&rsquo;s spans are the opposite of being incremental), they are roughly <code>(FileId, AstId, TextRangeRelativeToAstId, SyntaxContextId)</code>, <a href=https://github.com/rust-lang/rust-analyzer/pull/15959>https://github.com/rust-lang/rust-analyzer/pull/15959</a>. That PR also switched our <code>$crate</code> resolution over to the marking <code>SyntaxContext</code> approach that rustc uses meaning we can now start making all of r-a&rsquo;s name resolution hygienic. Finally, support for implicit format args in almost all IDE features has landed, <a href=https://github.com/rust-lang/rust-analyzer/pull/16027>https://github.com/rust-lang/rust-analyzer/pull/16027</a></p></blockquote></li></ul><h2 id=backport-nominations>Backport nominations</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-compiler">T-compiler stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-compiler">T-compiler beta</a></p><ul><li>No beta nominations for <code>T-compiler</code> this time.</li><li>:stable: &ldquo;Make subtyping explicit in MIR&rdquo; <a href=https://github.com/rust-lang/rust/pull/115025>rust#115025</a><ul><li>This is a dependency of #116415 (stable backport approved <a href=https://github.com/rust-lang/rust/pull/116415#issuecomment-1822543299>2 weeks ago</a>, fixes a number of regressions and ICEs)</li><li>it probably /needs/ to be backported into 1.74.1 as well (<a href=https://github.com/rust-lang/rust/pull/115025#issuecomment-1838841143>comment</a>)</li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-types">T-types stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-types">T-types beta</a></p><ul><li>No beta nominations for <code>T-types</code> this time.</li><li>No stable nominations for <code>T-types</code> this time.</li></ul><h2 id=prs-s-waiting-on-team>PRs S-waiting-on-team</h2><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p><ul><li>Other issues <a href=https://hackmd.io/XYr1BrOWSiqCrl8RCWXRaQ>in progress or waiting on other teams</a></li></ul><h2 id=issues-of-note>Issues of Note</h2><h3 id=short-summary>Short Summary</h3><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical">2 T-compiler P-critical issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical+no%3Aassignee">1 of those are unassigned</a></li></ul></li><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high">60 T-compiler P-high issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high+no%3Aassignee">33 of those are unassigned</a></li></ul></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-beta>1 P-critical, 2 P-high, 4 P-medium, 0 P-low regression-from-stable-to-beta</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-nightly>0 P-critical, 2 P-high, 3 P-medium, 2 P-low regression-from-stable-to-nightly</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-stable>1 P-critical, 39 P-high, 100 P-medium, 18 P-low regression-from-stable-to-stable</a></li></ul><h3 id=p-critical>P-critical</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;Miscompilation of Bevy (and some wgpu) apps resulting in segfault on macOS.&rdquo; <a href=https://github.com/rust-lang/rust/issues/117902>rust#117902</a><ul><li>long and painful reduction (thanks @<strong>lqd</strong> and @<strong>Ben Kimock (Saethlin)</strong>!)</li><li>finally cornered to an LLVM issue (submitted as <a href=https://github.com/llvm/llvm-project/issues/74680>llvm-project#74680</a>, see <a href=https://github.com/rust-lang/rust/issues/117902#issuecomment-1843945104>comment</a>))</li></ul></li><li>&ldquo;1.74 causes an internal compiler error: broken MIR in Item&rdquo; <a href=https://github.com/rust-lang/rust/issues/117976>rust#117976</a><ul><li>stable backports of #116415 and #115025 into 1.74.1 should fix this</li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AP-critical+label%3AT-types">T-types</a></p><ul><li>No <code>P-critical</code> issues for <code>T-types</code> this time.</li></ul><h3 id=p-high-regressions>P-high regressions</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-beta+label%3AP-high+-label%3AT-infra+-label%3AT-libs+-label%3AT-libs-api+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">P-high beta regressions</a></p><ul><li>&ldquo;regression: new resolution failures in 1.74&rdquo; <a href=hjttps://github.com/rust-lang/rust/issues/117056>rust#117056</a><ul><li>(mentioned last week) these regressions <em>should</em> hopefully be all fixed</li></ul></li><li>&ldquo;Problem running a method on the output of a function that returns an associated type (&ldquo;missing optimized MIR&rdquo;)&rdquo; <a href=https://github.com/rust-lang/rust/issues/117997>rust#117997</a><ul><li>Culprit identified in #117076 cc: @petrochenkov (reviewer)</li><li>Issue prioritization review: really P-high?</li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-nightly+label%3AP-high+no%3Aassignee+-label%3AT-infra+-label%3AT-libs+-label%3AT-libs-api+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core+">Unassigned P-high nightly regressions</a></p><ul><li>No unassigned <code>P-high</code> nightly regressions this time.</li></ul><h2 id=performance-logs>Performance logs</h2><blockquote><p><a href=https://github.com/rust-lang/rustc-perf/blob/master/triage/2023-12-05.md>triage logs for 2023-12-05</a></p></blockquote><p>A small number of perf changes that unfortunately led to quite a few perf regressions. A large chunk of those regressions were in rustdoc and were considered acceptable since rustdoc is now doing strictly more work. Some other regressions have already been fixed and will hopefully soon be merged. The last of the regressions are still under investigation, but hopefully they will be resolved soon.</p><p>Triage done by <strong>@rylev</strong>.
Revision range: <a href="https://perf.rust-lang.org/?start=df0295f07175acc7325ce3ca4152eb05752af1f2&amp;end=9358642e3b8560eee89e6f40aa996c8394a3db31&amp;absolute=false&amp;stat=instructions%3Au">df0295f0..9358642e</a></p><p><strong>Summary</strong>:</p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>3.0%</td><td style=text-align:center>[0.2%, 12.3%]</td><td style=text-align:center>53</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>4.1%</td><td style=text-align:center>[0.2%, 11.6%]</td><td style=text-align:center>102</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.5%, -0.1%]</td><td style=text-align:center>65</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.6%</td><td style=text-align:center>[-1.2%, -0.2%]</td><td style=text-align:center>25</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>1.1%</td><td style=text-align:center>[-0.5%, 12.3%]</td><td style=text-align:center>118</td></tr></tbody></table><p>4 Regressions, 1 Improvements, 1 Mixed; 1 of them in rollups
60 artifact comparisons made in total</p><h4 id=regressions>Regressions</h4><p>Rollup of 5 pull requests <a href=https://github.com/rust-lang/rust/pull/118473>#118473</a> <a href="https://perf.rust-lang.org/compare.html?start=c52b8763bf36027f24baabe1f97cab3d3571c9e5&amp;end=1670ff64bf1ccb2ad71068254b53725631c55864&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>1.4%</td><td style=text-align:center>[1.4%, 1.4%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.1%</td><td style=text-align:center>[0.1%, 0.1%]</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>1.4%</td><td style=text-align:center>[1.4%, 1.4%]</td><td style=text-align:center>1</td></tr></tbody></table><ul><li>Noise</li></ul><p>Restore <code>#![no_builtins]</code> crates participation in LTO. <a href=https://github.com/rust-lang/rust/pull/113923>#113923</a> <a href="https://perf.rust-lang.org/compare.html?start=9cf18e98f82d85fa41141391d54485b8747da46f&amp;end=8c2b57721728233e074db69d93517614de338055&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>6.4%</td><td style=text-align:center>[0.8%, 12.4%]</td><td style=text-align:center>17</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>5.3%</td><td style=text-align:center>[0.5%, 12.2%]</td><td style=text-align:center>72</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>6.4%</td><td style=text-align:center>[0.8%, 12.4%]</td><td style=text-align:center>17</td></tr></tbody></table><ul><li>Builtin function symbols that erroneously do not get GCed</li><li><a href=https://github.com/rust-lang/rust/pull/118568>#118568</a> seems to reverse these perf regressions.</li></ul><p>Portable SIMD subtree update <a href=https://github.com/rust-lang/rust/pull/118077>#118077</a> <a href="https://perf.rust-lang.org/compare.html?start=0908f173fd884ae90584e0b0bca83cb270c23936&amp;end=3f1e30a0a595f1d29fb10d41d9a58811ffdefb6a&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.3%, 2.1%]</td><td style=text-align:center>14</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>1.3%</td><td style=text-align:center>[0.2%, 2.2%]</td><td style=text-align:center>23</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.3%, 2.1%]</td><td style=text-align:center>14</td></tr></tbody></table><ul><li>All doc regressions due to more docs being generated and thus acceptable</li></ul><p>Add an assume that the index is inbounds to slice::get_unchecked <a href=https://github.com/rust-lang/rust/pull/116915>#116915</a> <a href="https://perf.rust-lang.org/compare.html?start=c9808f87028e16d134438787cab3d4cc16d05fe2&amp;end=85a4bd8f5873aa3ec5eb38baf63b89aa9bd21a7b&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>2.5%</td><td style=text-align:center>[0.3%, 4.5%]</td><td style=text-align:center>10</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>[0.3%, 0.6%]</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-0.5%, -0.5%]</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>2.2%</td><td style=text-align:center>[-0.5%, 4.5%]</td><td style=text-align:center>11</td></tr></tbody></table><ul><li>Still under investigation and perhaps a revert is called for</li></ul><h4 id=improvements>Improvements</h4><p>resolve: Feed the <code>def_kind</code> query immediately on <code>DefId</code> creation <a href=https://github.com/rust-lang/rust/pull/118188>#118188</a> <a href="https://perf.rust-lang.org/compare.html?start=df0295f07175acc7325ce3ca4152eb05752af1f2&amp;end=5facb422f8a5a61df515572fe79b02433639d565&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.5%, -0.2%]</td><td style=text-align:center>58</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>[-1.0%, -0.1%]</td><td style=text-align:center>34</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>[-0.5%, -0.2%]</td><td style=text-align:center>58</td></tr></tbody></table><h4 id=mixed>Mixed</h4><p>add track_caller for arith ops <a href=https://github.com/rust-lang/rust/pull/114841>#114841</a> <a href="https://perf.rust-lang.org/compare.html?start=bbefc9837f4157cc09ed60e6d7b21e345d582dd9&amp;end=b1e56deadaf4b08cd591feaa1a1283348298427d&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center>(instructions:u)</th><th style=text-align:center>mean</th><th style=text-align:center>range</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.2%, 0.4%]</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.7%</td><td style=text-align:center>[0.2%, 1.3%]</td><td style=text-align:center>12</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-</td><td style=text-align:center>-</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.2%</td><td style=text-align:center>[-0.3%, -0.2%]</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>[0.2%, 0.4%]</td><td style=text-align:center>6</td></tr></tbody></table><ul><li>Only really affecting rustdoc which is an acceptable tradeoff given the wins in diagnostics</li></ul><h2 id=nominated-issues>Nominated Issues</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-compiler-nominated">T-compiler</a></p><ul><li>No I-compiler-nominated issues this time.</li></ul><p><a href="https://github.com/rust-lang/rfcs/issues?q=is%3Aopen+label%3AI-compiler-nominated">RFC</a></p><ul><li>No I-compiler-nominated RFCs this time.</li></ul><h3 id=oldest-prs-waiting-for-review>Oldest PRs waiting for review</h3><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-asc+label%3AS-waiting-on-review+draft%3Afalse+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;resolve: re-export ambiguity as warning&rdquo; <a href=https://github.com/rust-lang/rust/pull/114682>rust#114682</a> (last review activity: about 55 days ago)<ul><li>cc: <strong>vadim petrochenkov</strong></li></ul></li><li>&ldquo;LLVM 18 x86 data layout update&rdquo; <a href=https://github.com/rust-lang/rust/pull/116672>rust#116672</a> (last review activity: about 49 days ago)<ul><li>cc: @<strong>nikita Popov</strong> (will this be part of the next LLVM 18 upgrade?)</li></ul></li><li>&ldquo;WIP fix unsoundness via adjusting overlap check for some Pin impls&rdquo; <a href=https://github.com/rust-lang/rust/pull/116706>rust#116706</a> (last review activity: about 48 days ago)<ul><li>cc: @<strong>Michael (compiler-errors) Goulet</strong> do you need a review at this time? Also from T-libs?</li></ul></li><li>&ldquo;discard invalid spans in external blocks&rdquo; <a href=https://github.com/rust-lang/rust/pull/116420>rust#116420</a> (last review activity: about 46 days ago)<ul><li>cc: @<strong>nils (Nilstrieb)</strong></li></ul></li><li>&ldquo;large_assignments: Lint on specific large args passed to functions&rdquo; <a href=https://github.com/rust-lang/rust/pull/116520>rust#116520</a> (last review activity: about 43 days ago)<ul><li>latest <a href=https://github.com/rust-lang/rust/pull/116520#issuecomment-1771119477>comment</a> mentions <a href=https://github.com/orgs/rust-lang/teams/wg-compiler-performance>WG-compiler-performance</a> for an opinion. Who can have a look at that?</li></ul></li></ul><h2 id=next-weeks-wg-checkins>Next week&rsquo;s WG checkins</h2><ul><li>@_<em>WG-diagnostics</em> by @<strong>Esteban Küber</strong> and @<strong>oli</strong></li><li>@_<em>WG-rustc-dev-guide</em> by @<strong>Santiago Pastorino</strong> and @<strong>Yuki Okushi|217081</strong></li></ul><p>Next meetings&rsquo; agenda draft: <a href=https://hackmd.io/aNZxRH4vSlqax-QqPc_h-A>hackmd link</a></p></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#announcements>Announcements</a><ul><li><a href=#other-wg-meetings-calendar-linkhttpscalendargooglecomcalendarembedsrc6u5rrtce6lrtv07pfi3damgjus40groupcalendargooglecom>Other WG meetings (<a href="https://calendar.google.com/calendar/embed?src=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com">calendar link</a>)</a></li></ul></li><li><a href=#mcpsfcps>MCPs/FCPs</a><ul><li><a href=#wg-checkins>WG checkins</a></li></ul></li><li><a href=#backport-nominations>Backport nominations</a></li><li><a href=#prs-s-waiting-on-team>PRs S-waiting-on-team</a></li><li><a href=#issues-of-note>Issues of Note</a><ul><li><a href=#short-summary>Short Summary</a></li><li><a href=#p-critical>P-critical</a></li><li><a href=#p-high-regressions>P-high regressions</a></li></ul></li><li><a href=#performance-logs>Performance logs</a><ul><li></li></ul></li><li><a href=#nominated-issues>Nominated Issues</a><ul><li><a href=#oldest-prs-waiting-for-review>Oldest PRs waiting for review</a></li></ul></li><li><a href=#next-weeks-wg-checkins>Next week&rsquo;s WG checkins</a></li></ul></nav></aside></main></body></html>