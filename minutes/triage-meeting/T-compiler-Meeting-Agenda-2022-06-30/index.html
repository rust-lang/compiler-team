<!doctype html><html lang=en><head><meta http-equiv=refresh content="0; url=https://forge.rust-lang.org/compiler/index.html"></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://rust-lang.github.io/compiler-team/>Rust Lang - Compiler Team</a></h2><style>nav ul a[href$=\2f compiler-team\2fminutes\2ftriage-meeting\2fT-compiler-Meeting-Agenda-2022-06-30\2f ]{color:#004ed0}</style><ul><li><p><strong>About</strong></p><ul><li><a href=/compiler-team/about/CODE_OF_CONDUCT/>Code of Conduct</a></li><li><a href=/compiler-team/about/chat-platform/>Chat Platform</a></li><li><a href=/compiler-team/about/steering-meeting/>Steering Meeting</a></li><li><a href=/compiler-team/about/triage-meeting/>Triage Meeting</a></li></ul></li><li><p><strong>Minutes</strong></p><ul><li><a href=/compiler-team/minutes/design-meeting/>Design Meetings</a></li><li><a href=/compiler-team/minutes/steering-meeting/>Steering Meetings</a></li><li><a href=/compiler-team/minutes/triage-meeting/>Triage Meetings</a></li></ul></li><li><p><strong>Procedures</strong></p><ul><li><a href=/compiler-team/procedures/>Documentation</a></li><li><a href=/compiler-team/procedures/crates/>Crates</a></li><li><a href=/compiler-team/procedures/call-for-participation/>Call for participation</a></li><li><a href=/compiler-team/procedures/form-new-working-group/>Form new working group</a></li></ul></li><li><p><a href=/compiler-team/working-groups/><strong>Working Groups</strong></a></p><ul><li><a href=/compiler-team/working-groups/async-await/>Async Await</a></li><li><a href=/compiler-team/working-groups/debugging/>Debugging</a></li><li><a href=/compiler-team/working-groups/diagnostics/>Diagnostics</a></li><li><a href=/compiler-team/working-groups/rustc-dev-guide/>Rustc Dev Guide</a></li><li><a href=/compiler-team/working-groups/llvm/>LLVM</a></li><li><a href=/compiler-team/working-groups/meta/>Meta</a></li><li><a href=/compiler-team/working-groups/mir-opt/>MIR-opt</a></li><li><a href=/compiler-team/working-groups/nll/>NLL</a></li><li><a href=/compiler-team/working-groups/parallel-rustc/>parallel rustc</a></li><li><a href=/compiler-team/working-groups/pgo/>PGO</a></li><li><a href=/compiler-team/working-groups/pipelining/>pipelining</a></li><li><a href=/compiler-team/working-groups/polonius/>polonius</a></li><li><a href=/compiler-team/working-groups/polymorphization/>polymorphization</a></li><li><a href=/compiler-team/working-groups/prioritization/>Prioritization</a></li><li><a href=/compiler-team/working-groups/rfc-2229/>rfc-2229</a></li><li><a href=/compiler-team/working-groups/rls-2.0/>rls-2.0</a></li><li><a href=/compiler-team/working-groups/self-profile/>Self Profile</a></li><li><a href=/compiler-team/working-groups/traits/>Traits</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/compiler-team/svg/menu.svg alt=Menu>
</label><strong>T Compiler Meeting Agenda 2022 06 30</strong></header><article class=markdown><h1 id=t-compiler-meeting-agenda-2022-06-30>T-compiler Meeting Agenda 2022-06-30</h1><h2 id=announcements>Announcements</h2><ul><li><a href="https://www.google.com/calendar/event?eid=M3JsYmdkN2F0cjdtYXE0Z2ljYzM4Nm42NTRfMjAyMjA3MDFUMTMwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Types Team: Planning/Deep-Dive meeting</a> at <a href=time:2022-07-01T09:00:00-04:00>time:2022-07-01T09:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=MDJyYnJ1cGFtdWR1c2lnNjFmcHJ2b3JlODFfMjAyMjA3MDFUMTQwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Compiler Team Planning meeting</a> at <a href=time:2022-07-01T10:00:00-04:00>time:2022-07-01T10:00:00-04:00</a></li><li>Rust stable 1.62 is out: (wip) <a href=https://github.com/rust-lang/blog.rust-lang.org/blob/452900fcdd233c137a94578554f04fa8988e10e6/posts/2022-06-30-Rust-1.62.0.md>blog post</a></li><li>Reminder: if you see a PR/issue that seems like there might be legal implications due to copyright/IP/etc, please let the Core team know (or at least message @<em><strong>pnkfelix</strong> or @</em><strong>Wesley Wiser</strong> so we can pass it along).</li></ul><h3 id=other-wg-meetings>Other WG meetings</h3><ul><li><a href="https://www.google.com/calendar/event?eid=cXZ1NGZncDF1dXA1NnVnMnA1M2Mzb2lvdWVfMjAyMjA3MDRUMTUzMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">Async WG triage meeting</a> at <a href=time:2022-07-04T11:30:00-04:00>time:2022-07-04T11:30:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=MDkxcnJqbGpwNm9sNWVqazB0b3U4azZkN2FfMjAyMjA3MDZUMTMwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">[Types team] Hack session: Advanced subtyping</a> at <a href=time:2022-07-06T09:00:00-04:00>time:2022-07-06T09:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=Y3VpY2NkbXBoZTJkMHJmcmZxZmU4MjhodDBfMjAyMjA3MDRUMjAwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn">[wg-traits] GATs Sync</a> at <a href=time:2022-07-04T16:00:00-04:00>time:2022-07-04T16:00:00-04:00</a></li><li><a href="https://www.google.com/calendar/event?eid=MGplMHAxc2dwMHVsOW5hbmQzZDRvdDJnbjEgNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw">wg-debugging status & design meeting</a> at <a href=time:2022-07-05T12:00:00-04:00>time:2022-07-05T12:00:00-04:00</a></li></ul><h2 id=mcpsfcps>MCPs/FCPs</h2><ul><li>New MCPs (take a look, see if you like them!)<ul><li>No new proposals this time.</li></ul></li><li>Old MCPs (not seconded, take a look)<ul><li>&ldquo;Dealing with type/const ambiguities&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/480>compiler-team#480</a> (last review activity: 5 months ago)</li><li>&ldquo;Removing codegen logic for <code>nvptx-nvidia-cuda</code> (32-bit target)&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/496>compiler-team#496</a> (last review activity: 3 months ago)</li><li>&ldquo;Arbitrary annotations in compiletest&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/513>compiler-team#513</a> (last review activity: about 54 days ago)</li><li>&ldquo;Add support for the LoongArch architecture&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/518>compiler-team#518</a> (last review activity: about 13 days ago)</li></ul></li><li>Pending FCP requests (check your boxes!)<ul><li>&ldquo;Stabilize <code>-Zgcc-ld=lld</code> as <code>-Clink-self-contained=linker -Clinker-flavor=gcc-lld</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/510>compiler-team#510</a></li><li>&ldquo;Increase the minimum linux-gnu versions&rdquo; <a href=https://github.com/rust-lang/rust/pull/95026>rust#95026</a></li><li>&ldquo;session: stabilize split debuginfo on linux&rdquo; <a href=https://github.com/rust-lang/rust/pull/98051>rust#98051</a></li></ul></li><li>Things in FCP (make sure you&rsquo;re good with it)<ul><li>&ldquo;<code>-Dwarnings</code> to cover all warnings&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/473>compiler-team#473</a></li><li>&ldquo;Track licensing metadata with REUSE&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/519>compiler-team#519</a></li><li>&ldquo;Revise how MIR variants are distinguished&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/522>compiler-team#522</a></li></ul></li><li>Accepted MCPs<ul><li>&ldquo;Tier 3 target proposal: riscv64gc-linux-android (Android target for <code>riscv64gc</code>)&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/472>compiler-team#472</a></li><li>&ldquo;Split TypeVisitable out from TypeFoldable&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/520>compiler-team#520</a></li></ul></li><li>Finalized FCPs (disposition merge)<ul><li>&ldquo;Remove migrate borrowck mode&rdquo; <a href=https://github.com/rust-lang/rust/pull/95565>rust#95565</a></li><li>&ldquo;Modify MIR building to drop repeat expressions with length zero&rdquo; <a href=https://github.com/rust-lang/rust/pull/95953>rust#95953</a></li><li>&ldquo;Lang: Stabilize usage of rustc_nonnull_optimization_guaranteed on -1&rdquo; <a href=https://github.com/rust-lang/rust/issues/97122>rust#97122</a></li><li>&ldquo;Remove a back-compat hack on lazy TAIT&rdquo; <a href=https://github.com/rust-lang/rust/pull/97346>rust#97346</a></li><li>&ldquo;make cenum_impl_drop_cast deny-by-default&rdquo; <a href=https://github.com/rust-lang/rust/pull/97652>rust#97652</a></li><li>&ldquo;make const_err show up in future breakage reports&rdquo; <a href=https://github.com/rust-lang/rust/pull/97743>rust#97743</a></li><li>&ldquo;lub: don&rsquo;t bail out due to empty binders&rdquo; <a href=https://github.com/rust-lang/rust/pull/97867>rust#97867</a></li><li>&ldquo;allow unions with mutable references and tuples of allowed types&rdquo; <a href=https://github.com/rust-lang/rust/pull/97995>rust#97995</a></li></ul></li></ul><h3 id=wg-checkins>WG checkins</h3><ul><li>@_<em>WG-traits</em> (Generic associated types initiative) by @<strong>Jack Huey</strong> (<a href=https://hackmd.io/FkajQEA9RXe9dnnKk6SQqQ#WG-checkins>prev checkin</a>)</li></ul><blockquote><p>Still lots of discussion in stabilization PR and zulip. Niko posted a nice <a href=https://github.com/rust-lang/rust/pull/96709#issuecomment-1167220240>comment</a> giving a nice example use case of GATs</p></blockquote><ul><li>@_<em>WG-diagnostics</em> by @<strong>Esteban KÃ¼ber</strong> and @<strong>oli</strong> (<a href=https://hackmd.io/Ual97ehdQ-icEaP9Z0NPxg#WG-checkins>prev checkin</a>)</li></ul><blockquote><p>Biggest announcement is the ongoing work on the translation machinery. There are some HackMD documents with context <a href=https://hackmd.io/@davidtwco/Bk0wTF2u5>here</a> and <a href=https://hackmd.io/@davidtwco/rkXSbLg95>here</a></p></blockquote><h2 id=backport-nominations>Backport nominations</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-compiler">T-compiler stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-compiler">T-compiler beta</a></p><ul><li>No beta nominations for <code>T-compiler</code> this time.</li><li>No stable nominations for <code>T-compiler</code> this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-rustdoc">T-rustdoc stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-rustdoc">T-rustdoc beta</a></p><ul><li>No beta nominations for <code>T-rustdoc</code> this time.</li><li>No stable nominations for <code>T-rustdoc</code> this time.</li></ul><p>:back: / :shrug: / :hand:</p><h2 id=prs-s-waiting-on-team>PRs S-waiting-on-team</h2><p><a href="https://github.com/rust-lang/rust/pulls?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;Enable varargs support for calling conventions other than C or cdecl&rdquo; <a href=https://github.com/rust-lang/rust/pull/97971>rust#97971</a><ul><li>@<strong>Jack Huey</strong> comments this PR could go through a FCP (<a href=https://github.com/rust-lang/rust/pull/97971#issuecomment-1166627241>comment</a>)</li></ul></li><li>&ldquo;TypeId: use a (v0) mangled type to remain sound in the face of hash collisions.&rdquo; <a href=https://github.com/rust-lang/rust/pull/95845>rust#95845</a><ul><li>@<strong>eddyb</strong> nominates for various teams discussions (<a href=https://github.com/rust-lang/rust/pull/95845#issuecomment-1167298830>comment</a>), T-lang contributes to the discussion.</li><li>See also <code>T-compiler</code> nominations</li></ul></li><li>(Omitted 4 PRs in draft or waiting on other teams / RFC process)</li></ul><h2 id=oldest-prs-waiting-for-review>Oldest PRs waiting for review</h2><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-asc+label%3AS-waiting-on-review+draft%3Afalse+label%3AT-compiler+-label%3AT-lang+-label%3AT-infra+-label%3AT-release+-label%3AT-libs+-label%3AT-libs-api">T-compiler</a></p><ul><li>&ldquo;Warn about dead tuple struct fields&rdquo; <a href=https://github.com/rust-lang/rust/pull/95977>rust#95977</a> (last review activity: about 29 days ago)<ul><li>unsure about the status, perhaps need another round of review? cc @<strong>eddyb</strong></li></ul></li><li>&ldquo;Use liballoc&rsquo;s specialised in-place vec collection&rdquo; <a href=https://github.com/rust-lang/rust/pull/97870>rust#97870</a> (last review activity: about 21 days ago)<ul><li>hifive bot autoassigned to @<strong>Wesley Wiser</strong>? re-roll :dice:?</li></ul></li></ul><h2 id=issues-of-note>Issues of Note</h2><h3 id=short-summary>Short Summary</h3><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical">2 T-compiler P-critical issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical+no%3Aassignee">0 of those are unassigned</a></li></ul></li><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high">63 T-compiler P-high issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high+no%3Aassignee">44 of those are unassigned</a></li></ul></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-beta>0 P-critical, 0 P-high, 4 P-medium, 0 P-low regression-from-stable-to-beta</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-nightly>1 P-critical, 0 P-high, 3 P-medium, 0 P-low regression-from-stable-to-nightly</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-stable>1 P-critical, 40 P-high, 80 P-medium, 7 P-low regression-from-stable-to-stable</a></li></ul><h3 id=p-critical>P-critical</h3><p><a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AP-critical+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;Wrong cast of u16 to usize on aarch64&rdquo; <a href=https://github.com/rust-lang/rust/issues/97463>rust#97463</a><ul><li>Issue is being addressed by @__<strong>pnkfelix</strong> in #97800</li><li>previously discussed, pending a downgrade to <code>P-high</code> and perhaps adding more tests to the PR (suggested <a href=https://rust-lang.zulipchat.com/#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202022-06-23/near/287198504>last week</a>)</li></ul></li><li>&ldquo;Wrong optimization&rdquo; <a href=https://github.com/rust-lang/rust/issues/98568>rust#98568</a><ul><li>nikic opened an LLVM bug report <a href=https://github.com/llvm/llvm-project/issues/56242>llvm-project#56242</a></li><li>and submitted a patch <a href=https://reviews.llvm.org/D128640>D128640</a></li></ul></li><li>&ldquo;Function type with opaque return type can be coerced to <code>dyn Fn</code> with arbitrary return type&rdquo; <a href=https://github.com/rust-lang/rust/issues/98608>rust#98608</a><ul><li>@<strong>oli</strong> self-assigned</li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AP-critical+label%3AT-rustdoc">T-rustdoc</a></p><ul><li>No <code>P-critical</code> issues for <code>T-rustdoc</code> this time.</li></ul><h3 id=p-high-regressions>P-high regressions</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-beta+label%3AP-high+-label%3AT-infra+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">P-high beta regressions</a></p><ul><li>No <code>P-high</code> beta regressions this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-nightly+label%3AP-high+no%3Aassignee+-label%3AT-infra+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">Unassigned P-high nightly regressions</a></p><ul><li>No unassigned <code>P-high</code> nightly regressions this time.</li></ul><h2 id=performance-logs>Performance logs</h2><blockquote><p><a href=https://github.com/rust-lang/rustc-perf/blob/master/triage/2022-06-28.md>2022-06-28 Triage Log</a></p></blockquote><p>Overall, a positive week for compiler performance with regressions mainly being relegated to smaller issues. This can be see by the fact that 95 test cases in real world crates were improvements while regressions only happened in 22 test cases. The largest improvement was by @nnethercote where the compilation of <code>#[derive(Debug)]</code> was improved. This led to an average of 1% improvement in compile times across 124 real world crate test cases.</p><p>Triage done by <strong>@rylev</strong>.
Revision range: <a href="https://perf.rust-lang.org/?start=abace0a1f17986d89aedf610819deab2b4afee56&amp;end=baf382e63c023259fa1f9042f8f479f183ca6ed3&amp;absolute=false&amp;stat=instructions%3Au">abace0a1f17986d89aedf610819deab2b4afee56..baf382e63c023259fa1f9042f8f479f183ca6ed3</a></p><p><strong>Summary</strong>:</p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>2.4%</td><td style=text-align:center>22</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>1.0%</td><td style=text-align:center>35</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-1.1%</td><td style=text-align:center>-5.2%</td><td style=text-align:center>95</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-2.3%</td><td style=text-align:center>-10.3%</td><td style=text-align:center>35</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.8%</td><td style=text-align:center>-5.2%</td><td style=text-align:center>117</td></tr></tbody></table><p>3 Regressions, 3 Improvements, 4 Mixed; 5 of them in rollups
34 artifact comparisons made in total</p><h4 id=regressions>Regressions</h4><p>Rollup of 16 pull requests <a href=https://github.com/rust-lang/rust/pull/98438>#98438</a> <a href="https://perf.rust-lang.org/compare.html?start=43347397f7c5ca9a670a3bb3890c7187e24a52ab&amp;end=e605a88441e5f6092194c914912142db635dfe21&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>0.4%</td><td style=text-align:center>37</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>0.6%</td><td style=text-align:center>17</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>-0.5%</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.3%</td><td style=text-align:center>0.4%</td><td style=text-align:center>37</td></tr></tbody></table><ul><li>Given the difficulty of investigation and the relatively small magnitude of the regression, I&rsquo;ve marked this as triaged.</li></ul><p>fix universes in the NLL type tests <a href=https://github.com/rust-lang/rust/pull/98109>#98109</a> <a href="https://perf.rust-lang.org/compare.html?start=fc96600bf6a52f92aeeee60a92a161a82b61c0ef&amp;end=d017d59ed013a4bc2431d023077eb7209fe9c60d&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>1.9%</td><td style=text-align:center>31</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.9%</td><td style=text-align:center>2.0%</td><td style=text-align:center>35</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>1.9%</td><td style=text-align:center>31</td></tr></tbody></table><ul><li>This was a high-priority correctness fix, so the regressions are acceptable at least in the short term.</li><li><a href=https://github.com/rust-lang/rust/pull/98109#issuecomment-1165569316>Oli already commented</a> on possible ideas for fixing the regression.</li></ul><p>Rollup of 9 pull requests <a href=https://github.com/rust-lang/rust/pull/98591>#98591</a> <a href="https://perf.rust-lang.org/compare.html?start=2f3ddd9f594adf9773547aa7cedb43c4ac8ffd2f&amp;end=7f08d04d60d03e1a52dae61ce6aa50996898702b&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>1.2%</td><td style=text-align:center>1.7%</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr></tbody></table><ul><li><a href=https://github.com/rust-lang/rust/pull/98576>#98576</a> is probably the only likely candidate for this regression.</li><li>The cahcegrind didn&rsquo;t reveal anything super interesting though unfortunately.</li><li>Left a comment <a href=https://github.com/rust-lang/rust/pull/98591#issuecomment-1168877399>here</a>.</li></ul><h4 id=improvements>Improvements</h4><p>Rollup of 11 pull requests <a href=https://github.com/rust-lang/rust/pull/98335>#98335</a> <a href="https://perf.rust-lang.org/compare.html?start=a25b1315ee968146a5b206a8f3c670c5b307ebfe&amp;end=72fd41a8b4d3488c97df3c3c75ddd9951aa3c73f&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>1.1%</td><td style=text-align:center>1.1%</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.9%</td><td style=text-align:center>-1.2%</td><td style=text-align:center>8</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.6%</td><td style=text-align:center>-0.7%</td><td style=text-align:center>13</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.9%</td><td style=text-align:center>-1.2%</td><td style=text-align:center>8</td></tr></tbody></table><p>proc_macro/bridge: cache static spans in proc_macro&rsquo;s client thread-local state <a href=https://github.com/rust-lang/rust/pull/98187>#98187</a> <a href="https://perf.rust-lang.org/compare.html?start=c80c4b8fdcf3da69cd483e2fec172c9b1f95842c&amp;end=3b0d4813ab461ec81eab8980bb884691c97c5a35&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>-0.7%</td><td style=text-align:center>12</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.4%</td><td style=text-align:center>-0.7%</td><td style=text-align:center>12</td></tr></tbody></table><p>Only keep a single query for well-formed checking <a href=https://github.com/rust-lang/rust/pull/98222>#98222</a> <a href="https://perf.rust-lang.org/compare.html?start=7f08d04d60d03e1a52dae61ce6aa50996898702b&amp;end=5ffa8f67b75be56cf829bfc9d055082c8382c0cf&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.2%</td><td style=text-align:center>-0.3%</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.2%</td><td style=text-align:center>-0.3%</td><td style=text-align:center>7</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-0.2%</td><td style=text-align:center>-0.3%</td><td style=text-align:center>2</td></tr></tbody></table><h4 id=mixed>Mixed</h4><p>Remove dereferencing of Box from codegen <a href=https://github.com/rust-lang/rust/pull/95576>#95576</a> <a href="https://perf.rust-lang.org/compare.html?start=abace0a1f17986d89aedf610819deab2b4afee56&amp;end=a25b1315ee968146a5b206a8f3c670c5b307ebfe&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.6%</td><td style=text-align:center>1.6%</td><td style=text-align:center>5</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>0.8%</td><td style=text-align:center>17</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.5%</td><td style=text-align:center>-0.5%</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-1.2%</td><td style=text-align:center>-1.7%</td><td style=text-align:center>8</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.4%</td><td style=text-align:center>1.6%</td><td style=text-align:center>6</td></tr></tbody></table><ul><li>Some light investigation from Oli <a href=https://github.com/rust-lang/rust/pull/95576#issuecomment-1161901041>already done</a>.</li><li>Seems like we&rsquo;re spending a bit more time in trait obligation resolution</li><li>Asked Oli whether <a href=https://github.com/rust-lang/rust/pull/95576#issuecomment-1168899350>this is acceptable</a>.</li></ul><p>Rollup of 6 pull requests <a href=https://github.com/rust-lang/rust/pull/98359>#98359</a> <a href="https://perf.rust-lang.org/compare.html?start=dc80ca78b6ec2b6bba02560470347433bcd0bb3c&amp;end=a09c668c965f735f4cd59e7158662b9daa0b71ba&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.8%</td><td style=text-align:center>1.0%</td><td style=text-align:center>6</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>-0.6%</td><td style=text-align:center>14</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>0.0%</td><td style=text-align:center>1.0%</td><td style=text-align:center>20</td></tr></tbody></table><ul><li>By in large, a wash in terms of change to overall performance.</li><li>The regressions are contained to diesel.</li><li>If I had to guess about a place to investigate, it would be <a href=https://github.com/rust-lang/rust/pull/97867>#87867</a>, but it might not be worth the effort.</li></ul><p>Rollup of 9 pull requests <a href=https://github.com/rust-lang/rust/pull/98447>#98447</a> <a href="https://perf.rust-lang.org/compare.html?start=d017d59ed013a4bc2431d023077eb7209fe9c60d&amp;end=7036449c774860a5b348dbbe01c20704c557382e&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>2.1%</td><td style=text-align:center>2.1%</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-0.3%</td><td style=text-align:center>-0.3%</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>2.1%</td><td style=text-align:center>2.1%</td><td style=text-align:center>1</td></tr></tbody></table><ul><li>The regressions are contained to only one test case (regex opt) in codegen related queries.</li><li>I didn&rsquo;t find any PRs that seemed like likely culprits.</li></ul><p>Improve <code>derive(Debug)</code> <a href=https://github.com/rust-lang/rust/pull/98190>#98190</a> <a href="https://perf.rust-lang.org/compare.html?start=7125846d17a549866aa1ed0ea28778537378fca8&amp;end=788ddedb0d88e40db9cd62b6163d5a471813044b&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>mean</th><th style=text-align:center>max</th><th style=text-align:center>count</th></tr></thead><tbody><tr><td style=text-align:center>Regressions (primary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>0.6%</td><td style=text-align:center>4</td></tr><tr><td style=text-align:center>Regressions (secondary)</td><td style=text-align:center>0.5%</td><td style=text-align:center>0.8%</td><td style=text-align:center>13</td></tr><tr><td style=text-align:center>Improvements (primary)</td><td style=text-align:center>-1.0%</td><td style=text-align:center>-5.3%</td><td style=text-align:center>120</td></tr><tr><td style=text-align:center>Improvements (secondary)</td><td style=text-align:center>-1.8%</td><td style=text-align:center>-10.3%</td><td style=text-align:center>69</td></tr><tr><td style=text-align:center>All (primary)</td><td style=text-align:center>-1.0%</td><td style=text-align:center>-5.3%</td><td style=text-align:center>124</td></tr></tbody></table><ul><li>Largely a very positive win.</li></ul><h2 id=nominated-issues>Nominated Issues</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-compiler-nominated+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;TypeId: use a (v0) mangled type to remain sound in the face of hash collisions.&rdquo; <a href=https://github.com/rust-lang/rust/pull/95845>rust#95845</a><ul><li>nominated by @<strong>eddyb</strong> (<a href=https://github.com/rust-lang/rust/pull/95845#issuecomment-1167298830>comment</a>)</li><li>points out the main discussion is whether we need anything other than a larger hash.</li></ul></li><li>&ldquo;pessimistically treat all function items as containing an opaque type&rdquo; <a href=https://github.com/rust-lang/rust/pull/98614>rust#98614</a><ul><li>PR authored by @<strong>oli</strong>, fixes unsound <code>P-critical</code> <a href=https://github.com/rust-lang/rust/issues/98608>#98608</a> and related ICE <a href=https://github.com/rust-lang/rust/issues/98604>#98604</a></li><li><a href=https://github.com/rust-lang/rust/pull/98614#issuecomment-1170612891>perf. results</a> show significant regressions</li><li>nominated by @<strong>oli</strong> to evaluate if the perf. regression is acceptable since this fixes an unsoundness (<a href=https://github.com/rust-lang/rust/pull/98614#issuecomment-1170815790>comment</a>)</li></ul></li><li>&ldquo;<code>for&lt;'a> &'a T: 'a</code> and closures regressed&rdquo; <a href=https://github.com/rust-lang/rust/issues/98437>rust#98437</a><ul><li>@_<strong>apiraino</strong> nominated to get some eyeballs on the general question raised by @<strong>Jack Huey</strong> about reverting some PRs related to the merged NLL (<a href=https://github.com/rust-lang/rust/issues/98437#issuecomment-1165733263>comment</a>)</li></ul></li></ul><p><a href="https://github.com/rust-lang/rfcs/issues?q=is%3Aopen+label%3AI-compiler-nominated+label%3AT-compiler">RFC</a></p><ul><li>No nominated RFCs for <code>T-compiler</code> this time.</li></ul><h2 id=next-weeks-wg-checkins>Next week&rsquo;s WG checkins</h2><ul><li>@_<em>WG-rustc-dev-guide</em> by @<strong>Santiago Pastorino</strong> and @<strong>Yuki Okushi|217081</strong></li><li>@_<em>WG-traits</em> (Impl Trait initiative) by @<strong>oli</strong></li></ul></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#announcements>Announcements</a><ul><li><a href=#other-wg-meetings>Other WG meetings</a></li></ul></li><li><a href=#mcpsfcps>MCPs/FCPs</a><ul><li><a href=#wg-checkins>WG checkins</a></li></ul></li><li><a href=#backport-nominations>Backport nominations</a></li><li><a href=#prs-s-waiting-on-team>PRs S-waiting-on-team</a></li><li><a href=#oldest-prs-waiting-for-review>Oldest PRs waiting for review</a></li><li><a href=#issues-of-note>Issues of Note</a><ul><li><a href=#short-summary>Short Summary</a></li><li><a href=#p-critical>P-critical</a></li><li><a href=#p-high-regressions>P-high regressions</a></li></ul></li><li><a href=#performance-logs>Performance logs</a><ul><li></li></ul></li><li><a href=#nominated-issues>Nominated Issues</a></li><li><a href=#next-weeks-wg-checkins>Next week&rsquo;s WG checkins</a></li></ul></nav></aside></main></body></html>