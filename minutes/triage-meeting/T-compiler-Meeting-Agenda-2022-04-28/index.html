<!doctype html><html lang=en><head><meta http-equiv=refresh content="0; url=https://forge.rust-lang.org/compiler/index.html"></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://rust-lang.github.io/compiler-team/>Rust Lang - Compiler Team</a></h2><style>nav ul a[href$=\2f compiler-team\2fminutes\2ftriage-meeting\2fT-compiler-Meeting-Agenda-2022-04-28\2f ]{color:#004ed0}</style><ul><li><p><strong>About</strong></p><ul><li><a href=/compiler-team/about/CODE_OF_CONDUCT/>Code of Conduct</a></li><li><a href=/compiler-team/about/chat-platform/>Chat Platform</a></li><li><a href=/compiler-team/about/steering-meeting/>Steering Meeting</a></li><li><a href=/compiler-team/about/triage-meeting/>Triage Meeting</a></li></ul></li><li><p><strong>Minutes</strong></p><ul><li><a href=/compiler-team/minutes/design-meeting/>Design Meetings</a></li><li><a href=/compiler-team/minutes/steering-meeting/>Steering Meetings</a></li><li><a href=/compiler-team/minutes/triage-meeting/>Triage Meetings</a></li></ul></li><li><p><strong>Procedures</strong></p><ul><li><a href=/compiler-team/procedures/>Documentation</a></li><li><a href=/compiler-team/procedures/crates/>Crates</a></li><li><a href=/compiler-team/procedures/call-for-participation/>Call for participation</a></li><li><a href=/compiler-team/procedures/form-new-working-group/>Form new working group</a></li></ul></li><li><p><a href=/compiler-team/working-groups/><strong>Working Groups</strong></a></p><ul><li><a href=/compiler-team/working-groups/async-await/>Async Await</a></li><li><a href=/compiler-team/working-groups/debugging/>Debugging</a></li><li><a href=/compiler-team/working-groups/diagnostics/>Diagnostics</a></li><li><a href=/compiler-team/working-groups/rustc-dev-guide/>Rustc Dev Guide</a></li><li><a href=/compiler-team/working-groups/llvm/>LLVM</a></li><li><a href=/compiler-team/working-groups/meta/>Meta</a></li><li><a href=/compiler-team/working-groups/mir-opt/>MIR-opt</a></li><li><a href=/compiler-team/working-groups/nll/>NLL</a></li><li><a href=/compiler-team/working-groups/parallel-rustc/>parallel rustc</a></li><li><a href=/compiler-team/working-groups/pgo/>PGO</a></li><li><a href=/compiler-team/working-groups/pipelining/>pipelining</a></li><li><a href=/compiler-team/working-groups/polonius/>polonius</a></li><li><a href=/compiler-team/working-groups/polymorphization/>polymorphization</a></li><li><a href=/compiler-team/working-groups/prioritization/>Prioritization</a></li><li><a href=/compiler-team/working-groups/rfc-2229/>rfc-2229</a></li><li><a href=/compiler-team/working-groups/rls-2.0/>rls-2.0</a></li><li><a href=/compiler-team/working-groups/self-profile/>Self Profile</a></li><li><a href=/compiler-team/working-groups/traits/>Traits</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/compiler-team/svg/menu.svg alt=Menu>
</label><strong>T Compiler Meeting Agenda 2022 04 28</strong></header><article class=markdown><h1 id=t-compiler-meeting-agenda-2022-04-28>T-compiler Meeting Agenda 2022-04-28</h1><h2 id=announcements>Announcements</h2><ul><li>Tomorrow <a href=time:2022-04-29T13:00:00+02:00>time:2022-04-29T13:00:00+02:00</a> Types Team: Chalkify roadmap <a href="https://calendar.google.com/calendar/event?eid=M3JsYmdkN2F0cjdtYXE0Z2ljYzM4Nm42NTRfMjAyMjA0MjlUMTMwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn&amp;ctz=GMT+02:00">calendar link</a><ul><li>Topic of the meeting: <a href=https://github.com/rust-lang/wg-traits/issues/32>wg-traits#32</a></li></ul></li><li>Tomorrow <a href=time:2022-04-29T15:00:00+02:00>time:2022-04-29T15:00:00+02:00</a> Compiler Team: Incremental Compilation&rsquo;s Future <a href="https://calendar.google.com/calendar/event?eid=MzQxaDlyZ2duazM2MGU4bG85MzQ2ZGFvbHEgNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw&amp;ctz=GMT+02:00">calendar link</a><ul><li>Topic of the meeting: <a href=https://github.com/rust-lang/compiler-team/issues/491>compiler-team#491</a></li></ul></li><li>Reminder: if you see a PR/issue that seems like there might be legal implications due to copyright/IP/etc, please let the Core team know (or at least message @<em><strong>pnkfelix</strong> or @</em><strong>Wesley Wiser</strong> so we can pass it along).</li></ul><h2 id=mcpsfcps>MCPs/FCPs</h2><ul><li>New MCPs (take a look, see if you like them!)<ul><li>No new proposals this time.</li></ul></li><li>Old MCPs (not seconded, take a look)<ul><li>&ldquo;Accept <code>pc</code> in place of <code>unknown</code> and <code>unknown</code> in place of <code>pc</code> for <code>x86_64</code> and <code>i?86</code> targets&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/441>compiler-team#441</a> (last review activity: 10 months ago)</li><li>&ldquo;Make <code>-Z binary-dep-depinfo</code> the default behavior&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/464>compiler-team#464</a> (last review activity: 6 months ago)</li><li>&ldquo;Tier 3 target proposal: riscv64gc-linux-android (Android target for <code>riscv64gc</code>)&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/472>compiler-team#472</a> (last review activity: 4 months ago)</li><li>&ldquo;<code>-Dwarnings</code> to cover all warnings&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/473>compiler-team#473</a> (last review activity: 4 months ago)</li><li>&ldquo;Build-time execution sandboxing&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/475>compiler-team#475</a> (last review activity: 4 months ago)</li><li>&ldquo;Dealing with type/const ambiguities&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/480>compiler-team#480</a> (last review activity: 3 months ago)</li><li>&ldquo;Removing codegen logic for <code>nvptx-nvidia-cuda</code> (32-bit target)&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/496>compiler-team#496</a> (last review activity: about 41 days ago)</li><li>&ldquo;Add attribute to run specific tests in an isolated process&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/508>compiler-team#508</a> (last review activity: about 1 days ago)</li><li>&ldquo;Stabilize <code>-Zgcc-ld=lld</code>&rdquo; <a href=https://github.com/rust-lang/compiler-team/issues/510>compiler-team#510</a> (last review activity: about 1 days ago)</li></ul></li><li>Pending FCP requests (check your boxes!)<ul><li>&ldquo;Tracking issue for Consistent no-prelude attribute (RFC 501)&rdquo; <a href=https://github.com/rust-lang/rust/issues/20561#issuecomment-1059258740>rust#20561</a></li><li>&ldquo;Tracking Issue for <code>-Z terminal-width</code>&rdquo; <a href=https://github.com/rust-lang/rust/issues/84673#issuecomment-1087141663>rust#84673</a></li><li>&ldquo;Increase the minimum linux-gnu versions&rdquo; <a href=https://github.com/rust-lang/rust/pull/95026#issuecomment-1077855006>rust#95026</a></li></ul></li><li>Things in FCP (make sure you&rsquo;re good with it)<ul><li>&ldquo;Remove mutable_borrow_reservation_conflict lint and allow the code pattern&rdquo; <a href=https://github.com/rust-lang/rust/pull/96268>rust#96268</a></li></ul></li><li>Accepted MCPs<ul><li>No new accepted proposals this time.</li></ul></li><li>Finalized FCPs (disposition merge)<ul><li>&ldquo;Stabilize <code>let_chains</code> in Rust 1.62.0&rdquo; <a href=https://github.com/rust-lang/rust/pull/94927>rust#94927</a></li></ul></li></ul><h3 id=wg-checkins>WG checkins</h3><ul><li>@_<em>WG-llvm</em> by @<strong>nagisa</strong> and @<strong>Nikita Popov</strong> (<a href=https://hackmd.io/43XK8_4NROi5sowR1Qb35Q#WG-checkins>previous checkin</a>)</li></ul><blockquote><ul><li>We no longer support the legacy pass manager with LLVM 15 (though I don&rsquo;t think we have any open issues for the NewPM anymore)</li><li>Clang has enabled opaque pointers by default, so we&rsquo;ll do that as well when we update to LLVM 15.</li><li>Upstream patches to support Rust&rsquo;s allocator are slowly moving forward, but haven&rsquo;t fully landed yet.</li><li>LLVM 15 raises the toolchain baseline, though we currently can still work around this using LLVM_TEMPORARILY_ALLOW_OLD_TOOLCHAIN=ON. We need <a href=https://github.com/rust-lang/rust/pull/95026>https://github.com/rust-lang/rust/pull/95026</a> to support building new LLVM versions.</li></ul></blockquote><ul><li>@_<em>WG-traits</em> (generic work of the WG) by @<strong>nikomatsakis</strong> and @<strong>Jack Huey</strong> (<a href=https://hackmd.io/RZWtfiBBQo2dG525CgZ2mQ#WG-checkins>previous checkin</a>)</li></ul><blockquote><p>Types team RFC is posted: <a href=https://github.com/rust-lang/rfcs/pull/3254>https://github.com/rust-lang/rfcs/pull/3254</a>
We have had deep-dive meetings on Fridays</p><ul><li>So far, we&rsquo;ve covered the subtyping and variance nomicon chapter PR, &ldquo;Chalkification&rdquo;, and new subtyping in a-mir-formality</li><li>Tomorrow, we have a deep dive into the new TAIT algorithm
Also went through adding <code>Copy</code> to a-mir-formality: <a href="https://www.youtube.com/watch?v=7ZQ-9yZztKA&amp;t=589s">https://www.youtube.com/watch?v=7ZQ-9yZztKA&amp;t=589s</a></li></ul></blockquote><h2 id=backport-nominations>Backport nominations</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-compiler">T-compiler beta</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-compiler">T-compiler stable</a></p><ul><li><a href=https://github.com/rust-lang/rust/pull/96516>Revert diagnostic duplication and accidental stabilization</a><ul><li>@oli says low-risk, because it&rsquo;s what we had before #94081 (the relevant diff being <a href=https://github.com/rust-lang/rust/pull/94081/files#diff-1d1a5e417e4d67a3158bf9cbbd88332862840de772f1c345385d2ac34dede737>this</a>)</li></ul></li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-rustdoc">T-rustdoc beta</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-rustdoc">T-rustdoc stable</a></p><ul><li>No backport nominations for <code>T-rustdoc</code> this time.</li></ul><p>:back: / :shrug: / :hand:</p><h2 id=prs-s-waiting-on-team>PRs S-waiting-on-team</h2><p><a href="https://github.com/rust-lang/rust/pulls?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p><ul><li>No PRs waiting on <code>T-compiler</code> this time.</li></ul><h2 id=oldest-prs-waiting-for-review>Oldest PRs waiting for review</h2><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-asc+label%3AS-waiting-on-review+draft%3Afalse+label%3AT-compiler+-label%3AT-lang+-label%3AT-infra+-label%3AT-release+-label%3AT-libs+-label%3AT-libs-api">T-compiler</a></p><ul><li>No unreviewed PRs on <code>T-compiler</code> at this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-rustdoc">T-rustdoc stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-rustdoc">T-rustdoc beta</a></p><ul><li>No beta nominations for <code>T-rustdoc</code> this time.</li><li>No stable nominations for <code>T-rustdoc</code> this time.</li></ul><p>:back: / :shrug: / :hand:</p><h2 id=prs-s-waiting-on-team-1>PRs S-waiting-on-team</h2><p><a href="https://github.com/rust-lang/rust/pulls?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p><ul><li>No new PRs waiting on T-compiler</li></ul><h3 id=oldest-prs-waiting-for-review-1>Oldest PRs waiting for review</h3><p><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-asc+label%3AS-waiting-on-review+draft%3Afalse+label%3AT-compiler">T-compiler</a></p><ul><li>&ldquo;AddNicheCases MirPass&rdquo; <a href=https://github.com/rust-lang/rust/pull/95652>rust#95652</a> (last review activity: about 23 days ago)<ul><li>Bot assigned @<strong>Wesley Wiser</strong> as reviewer, reroll?</li></ul></li><li>&ldquo;Support tool lints with the <code>#[expect]</code> attribute (RFC 2383)&rdquo; <a href=https://github.com/rust-lang/rust/pull/95542>rust#95542</a> (last review activity: about 22 days ago)<ul><li>PR author assigned review to @<strong>Wesley Wiser</strong>, reroll?</li></ul></li><li>&ldquo;Add <code>sub_ptr</code> on pointers (the <code>usize</code> version of <code>offset_from</code>)&rdquo; <a href=https://github.com/rust-lang/rust/pull/95837>rust#95837</a> (last review activity: about 17 days ago)<ul><li>previous review from @<strong>RalfJ</strong> (maybe unassign from @<strong>kennytm</strong>? They were bot-assigned)</li></ul></li><li>&ldquo;Remove <code>#[rustc_deprecated]</code>&rdquo; <a href=https://github.com/rust-lang/rust/pull/95960>rust#95960</a> (last review activity: about 16 days ago)<ul><li>assigned review to @<strong>Josh Triplett</strong></li><li>needs additional reviewer for the compiler part?</li></ul></li></ul><h2 id=issues-of-note>Issues of Note</h2><h3 id=short-summary>Short Summary</h3><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical">0 T-compiler P-critical issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical+no%3Aassignee">0 of those are unassigned</a></li></ul></li><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high">59 T-compiler P-high issues</a><ul><li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high+no%3Aassignee">45 of those are unassigned</a></li></ul></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-beta>0 P-critical, 1 P-high, 3 P-medium, 0 P-low regression-from-stable-to-beta</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-nightly>0 P-critical, 0 P-high, 1 P-medium, 0 P-low regression-from-stable-to-nightly</a></li><li><a href=https://github.com/rust-lang/rust/labels/regression-from-stable-to-stable>0 P-critical, 39 P-high, 83 P-medium, 10 P-low regression-from-stable-to-stable</a></li></ul><h3 id=p-critical>P-critical</h3><p><a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AP-critical+label%3AT-compiler">T-compiler</a></p><ul><li>No <code>P-critical</code> issues for <code>T-compiler</code> this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AP-critical+label%3AT-rustdoc">T-rustdoc</a></p><ul><li>No <code>P-critical</code> issues for <code>T-rustdoc</code> this time.</li></ul><h3 id=p-high-regressions>P-high regressions</h3><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-beta+label%3AP-high+-label%3AT-infra+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">P-high beta regressions</a></p><ul><li>No <code>P-high</code> beta regressions this time.</li></ul><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-nightly+label%3AP-high+no%3Aassignee+-label%3AT-infra+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">Unassigned P-high nightly regressions</a></p><ul><li>No unassigned <code>P-high</code> nightly regressions this time.</li></ul><h2 id=performance-logs>Performance logs</h2><blockquote><p><a href=https://github.com/rust-lang/rustc-perf/blob/master/triage/2022-04-26.md>triage logs 2022-04-26</a></p></blockquote><p>This was, in general, a positive week for compiler performance. There were many concentrated efforts on improving rustdoc performance with a lot of real world crates showing ~4-7% improvements in full build times. Additionally, there was further improvement to <code>macro_rules!</code> performance with many real world crates improving performance by as much as 18% in full builds! On the other hand, the regressions were mostly minor and largely relegated to secondary benchmarks.</p><p>Triage done by <strong>@rylev</strong>.
Revision range: <a href="https://perf.rust-lang.org/?start=4ca19e09d302a4cbde14f9cb1bc109179dc824cd&amp;end=1c988cfa0b7f4d3bc5b1cb40dc5002f5adbfb9ad&amp;absolute=false&amp;stat=instructions%3Au">4ca19e09d302a4cbde14f9cb1bc109179dc824cd..1c988cfa0b7f4d3bc5b1cb40dc5002f5adbfb9ad</a></p><p>4 Regressions, 6 Improvements, 3 Mixed; 1 of them in rollups
45 artifact comparisons made in total</p><h4 id=regressions>Regressions</h4><p>Rollup of 5 pull requests <a href=https://github.com/rust-lang/rust/pull/96263>#96263</a> <a href="https://perf.rust-lang.org/compare.html?start=09ccb6c59d026b94edae50ba949b22dfc5d65ed1&amp;end=7be1da0319eb5f381bc0aa8559367bb33dfe90a5&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>Regressions (primary)</th><th style=text-align:center>Regressions (secondary)</th><th style=text-align:center>Improvements (primary)</th><th style=text-align:center>Improvements (secondary)</th><th style=text-align:center>All (primary)</th></tr></thead><tbody><tr><td style=text-align:center>count</td><td style=text-align:center>2</td><td style=text-align:center>6</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>mean</td><td style=text-align:center>2.0%</td><td style=text-align:center>6.3%</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>2.0%</td></tr><tr><td style=text-align:center>max</td><td style=text-align:center>3.2%</td><td style=text-align:center>6.9%</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>3.2%</td></tr></tbody></table><ul><li>The regression in primary benchmarks is dominated by a noisy <code>syn-1.0.89</code> (see <a href=https://github.com/rust-lang/rustc-perf/issues/1301>rustc-perf#1301</a>). However, the regressions in the secondary benchmarks seem real and point towards <a href=https://github.com/rust-lang/rust/pull/96236>#96236</a> as the possible cause.</li><li>I ran cachegrind diff on <code>wg-grammar check full</code> and got <a href=https://gist.github.com/rylev/8dad0b2dc24733908de28ce34a906692>these results</a> which shows <code>&lt;rustc_borrowck::region_infer::Trace as alloc::vec::spec_from_elem::SpecFromElem>::from_elem</code> being called a lot more often after this change.</li><li>The regressions are not <em>huge</em> but they are certainly significant and real. If something obvious stands out to those more familiar with this code, it might be worth poking around.</li></ul><p>rustdoc: Unindent doc fragments on <code>Attributes</code> construction <a href=https://github.com/rust-lang/rust/pull/96282>#96282</a> <a href="https://perf.rust-lang.org/compare.html?start=0b3404b01b251401e6b45cb1c4df8f883dfab2d7&amp;end=8b2393086f4c41007b5fb02ef0579ffa7046bff2&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>Regressions (primary)</th><th style=text-align:center>Regressions (secondary)</th><th style=text-align:center>Improvements (primary)</th><th style=text-align:center>Improvements (secondary)</th><th style=text-align:center>All (primary)</th></tr></thead><tbody><tr><td style=text-align:center>count</td><td style=text-align:center>1</td><td style=text-align:center>10</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>mean</td><td style=text-align:center>0.4%</td><td style=text-align:center>0.4%</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0.4%</td></tr><tr><td style=text-align:center>max</td><td style=text-align:center>0.4%</td><td style=text-align:center>0.5%</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0.4%</td></tr></tbody></table><ul><li>An <a href=https://github.com/rust-lang/rust/issues/96309>issue</a> was opened to investigate whether more work is being done that strictly necessary.</li><li>Since the regressions are relatively minor and only constrained to somewhat &ldquo;artificial&rdquo; crates (i.e., <code>hello-world</code> is the only primary crate impacted), we can <a href=https://github.com/rust-lang/rust/pull/96282#issuecomment-1109535756>mark this as triaged</a>.</li></ul><p>Generate synthetic object file to ensure all exported and used symbols participate in the linking <a href=https://github.com/rust-lang/rust/pull/95604>#95604</a> <a href="https://perf.rust-lang.org/compare.html?start=7417110cefda899a685a77557ac2bd7d7ee07e54&amp;end=18b53cefdf7456bf68937b08e377b7e622a115c2&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>Regressions (primary)</th><th style=text-align:center>Regressions (secondary)</th><th style=text-align:center>Improvements (primary)</th><th style=text-align:center>Improvements (secondary)</th><th style=text-align:center>All (primary)</th></tr></thead><tbody><tr><td style=text-align:center>count</td><td style=text-align:center>3</td><td style=text-align:center>13</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>3</td></tr><tr><td style=text-align:center>mean</td><td style=text-align:center>0.4%</td><td style=text-align:center>0.4%</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0.4%</td></tr><tr><td style=text-align:center>max</td><td style=text-align:center>0.5%</td><td style=text-align:center>0.5%</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>0.5%</td></tr></tbody></table><ul><li>This seems to be regressing a bunch of full doc builds. Given this doesn&rsquo;t touch rustdoc, but does touch metadata encoding/decoding, I would assume that&rsquo;s where the perf hit is coming from.</li><li>I ran cachegrind diff on <code>helloworld doc full</code> and <a href=https://gist.github.com/rylev/772e7dd5e7f133e48bf318a583e44845>got these results</a>. It indeed looks like we&rsquo;re calling decoding functions on certain items (attributes and idents) more than previously (albeit with less decoding of spans).</li><li><a href=https://github.com/rust-lang/rust/pull/95604#issuecomment-1109652483>Left a comment to the author/reviewer</a> to get more clarification.</li></ul><p>Display function path in unsafety violations - E0133 <a href=https://github.com/rust-lang/rust/pull/96294>#96294</a> <a href="https://perf.rust-lang.org/compare.html?start=055bf4ccd521c2c2185166c86951be7be145727c&amp;end=ec8619dca239f57201a3ceb59e93149659c07b58&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>Regressions (primary)</th><th style=text-align:center>Regressions (secondary)</th><th style=text-align:center>Improvements (primary)</th><th style=text-align:center>Improvements (secondary)</th><th style=text-align:center>All (primary)</th></tr></thead><tbody><tr><td style=text-align:center>count</td><td style=text-align:center>44</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>44</td></tr><tr><td style=text-align:center>mean</td><td style=text-align:center>1.3%</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>1.3%</td></tr><tr><td style=text-align:center>max</td><td style=text-align:center>2.9%</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>N/A</td><td style=text-align:center>2.9%</td></tr></tbody></table><ul><li>Performance runs <a href=https://github.com/rust-lang/rust/pull/96294#issuecomment-1106397651>were done</a> on this change before merging and they did not show perf regressions</li><li>Added a <a href=https://github.com/rust-lang/rust/pull/96294#issuecomment-1109540254>comment</a> to ensure the issue doesn&rsquo;t get lost. It seems it might be caused by inclusion of <code>DefId</code>s when they aren&rsquo;t needed.</li></ul><h4 id=improvements>Improvements</h4><ul><li>Inline <code>ty::Const::ty()</code> and <code>ty::Const::val()</code> getters <a href=https://github.com/rust-lang/rust/pull/96022>#96022</a> <a href="https://perf.rust-lang.org/compare.html?start=27af5175497936ea3413bef5816e7c0172514b9c&amp;end=0034bbca260bfa00798d70150970924221688ede&amp;stat=instructions:u">(Comparison Link)</a></li><li>Speed up <code>TokenCursor</code> <a href=https://github.com/rust-lang/rust/pull/96210>#96210</a> <a href="https://perf.rust-lang.org/compare.html?start=1dec35a1b0df406da5d7cae55a7fa8d186a2b028&amp;end=b04c5329e1e145fb2fb46c5a7e775638712b03aa&amp;stat=instructions:u">(Comparison Link)</a></li><li>rustdoc: Optimize IdMap <a href=https://github.com/rust-lang/rust/pull/96260>#96260</a> <a href="https://perf.rust-lang.org/compare.html?start=b04c5329e1e145fb2fb46c5a7e775638712b03aa&amp;end=de1bc0008be096cf7ed67b93402250d3b3e480d0&amp;stat=instructions:u">(Comparison Link)</a></li><li>rustdoc: Resolve some more doc links early <a href=https://github.com/rust-lang/rust/pull/96261>#96261</a> <a href="https://perf.rust-lang.org/compare.html?start=10baaa6ed243c3e026491b1068c44356eaf24069&amp;end=0b3404b01b251401e6b45cb1c4df8f883dfab2d7&amp;stat=instructions:u">(Comparison Link)</a></li><li>rustdoc: make primitive synthetic impls for correct doc module <a href=https://github.com/rust-lang/rust/pull/96301>#96301</a> <a href="https://perf.rust-lang.org/compare.html?start=41ef7678061dde625bf273ab6b036aebd7153a43&amp;end=5ffebc2cb3a089c27a4c7da13d09fd2365c288aa&amp;stat=instructions:u">(Comparison Link)</a></li><li>incr. comp.: Don&rsquo;t export impl_stable_hash_via_hash!() and warn about using it. <a href=https://github.com/rust-lang/rust/pull/96082>#96082</a> <a href="https://perf.rust-lang.org/compare.html?start=a2df8baea6fb7199822d39cfcfddb197604aa8a2&amp;end=27af5175497936ea3413bef5816e7c0172514b9c&amp;stat=instructions:u">(Comparison Link)</a></li></ul><h4 id=mixed>Mixed</h4><p>rustdoc: Optimize and refactor doc link resolution <a href=https://github.com/rust-lang/rust/pull/96135>#96135</a> <a href="https://perf.rust-lang.org/compare.html?start=0034bbca260bfa00798d70150970924221688ede&amp;end=d39864d64e6e0762d418f6beeedb4510942fc828&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>Regressions (primary)</th><th style=text-align:center>Regressions (secondary)</th><th style=text-align:center>Improvements (primary)</th><th style=text-align:center>Improvements (secondary)</th><th style=text-align:center>All (primary)</th></tr></thead><tbody><tr><td style=text-align:center>count</td><td style=text-align:center>6</td><td style=text-align:center>0</td><td style=text-align:center>14</td><td style=text-align:center>20</td><td style=text-align:center>20</td></tr><tr><td style=text-align:center>mean</td><td style=text-align:center>0.3%</td><td style=text-align:center>N/A</td><td style=text-align:center>-1.3%</td><td style=text-align:center>-0.7%</td><td style=text-align:center>-0.9%</td></tr><tr><td style=text-align:center>max</td><td style=text-align:center>0.3%</td><td style=text-align:center>N/A</td><td style=text-align:center>-2.7%</td><td style=text-align:center>-1.0%</td><td style=text-align:center>-2.7%</td></tr></tbody></table><ul><li>The regression in <a href=https://github.com/rust-lang/rust/pull/96135#issuecomment-1101397244>stm32f4 is expected</a> and given this is otherwise a big perf win, we&rsquo;ll take the slight perf hit in one benchmark.</li></ul><p>Remove visibility information from HIR <a href=https://github.com/rust-lang/rust/pull/93970>#93970</a> <a href="https://perf.rust-lang.org/compare.html?start=de1026a67b0a3f5d6b61a1f77093af97d4799376&amp;end=143eaa8d441641251ab41ed73deaba0d8d0cf4a5&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>Regressions (primary)</th><th style=text-align:center>Regressions (secondary)</th><th style=text-align:center>Improvements (primary)</th><th style=text-align:center>Improvements (secondary)</th><th style=text-align:center>All (primary)</th></tr></thead><tbody><tr><td style=text-align:center>count</td><td style=text-align:center>0</td><td style=text-align:center>16</td><td style=text-align:center>2</td><td style=text-align:center>2</td><td style=text-align:center>2</td></tr><tr><td style=text-align:center>mean</td><td style=text-align:center>N/A</td><td style=text-align:center>1.3%</td><td style=text-align:center>-0.2%</td><td style=text-align:center>-0.3%</td><td style=text-align:center>-0.2%</td></tr><tr><td style=text-align:center>max</td><td style=text-align:center>N/A</td><td style=text-align:center>2.2%</td><td style=text-align:center>-0.2%</td><td style=text-align:center>-0.3%</td><td style=text-align:center>-0.2%</td></tr></tbody></table><ul><li>The regression happens in a stress test that is expected to stress the code being changed.</li><li>After this change visibility is now being correctly hashed which is strictly more work but is the &ldquo;correct&rdquo; thing to do. Given this <a href=https://github.com/rust-lang/rust/pull/93970#issuecomment-1107778525>the regressions are worth it</a>.</li></ul><p>Make derefer work everwhere <a href=https://github.com/rust-lang/rust/pull/96116>#96116</a> <a href="https://perf.rust-lang.org/compare.html?start=18b53cefdf7456bf68937b08e377b7e622a115c2&amp;end=055bf4ccd521c2c2185166c86951be7be145727c&amp;stat=instructions:u">(Comparison Link)</a></p><table><thead><tr><th style=text-align:center></th><th style=text-align:center>Regressions (primary)</th><th style=text-align:center>Regressions (secondary)</th><th style=text-align:center>Improvements (primary)</th><th style=text-align:center>Improvements (secondary)</th><th style=text-align:center>All (primary)</th></tr></thead><tbody><tr><td style=text-align:center>count</td><td style=text-align:center>8</td><td style=text-align:center>16</td><td style=text-align:center>1</td><td style=text-align:center>0</td><td style=text-align:center>9</td></tr><tr><td style=text-align:center>mean</td><td style=text-align:center>0.5%</td><td style=text-align:center>1.2%</td><td style=text-align:center>-1.7%</td><td style=text-align:center>N/A</td><td style=text-align:center>0.2%</td></tr><tr><td style=text-align:center>max</td><td style=text-align:center>0.5%</td><td style=text-align:center>2.5%</td><td style=text-align:center>-1.7%</td><td style=text-align:center>N/A</td><td style=text-align:center>-1.7%</td></tr></tbody></table><ul><li>Unfortunate regressions but they are fairly isolated, small, and expected.</li><li>Majority of the regressions come from the introduction of more local variables which LLVM has to work through. This looks like an area we&rsquo;ll want to work through, but we <a href=https://github.com/rust-lang/rust/pull/96116#issuecomment-1109521059>shouldn&rsquo;t block this PR on addressing this</a>.</li></ul><h2 id=nominated-issues>Nominated Issues</h2><p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-compiler-nominated+label%3AT-compiler">T-compiler</a></p><ul><li>No new <code>I-compiler-nominated</code> issues</li></ul><p><a href="https://github.com/rust-lang/rfcs/issues?q=is%3Aopen+label%3AI-compiler-nominated+label%3AT-compiler">RFC</a></p><ul><li>No nominated RFCs for <code>T-compiler</code> this time.</li></ul></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#announcements>Announcements</a></li><li><a href=#mcpsfcps>MCPs/FCPs</a><ul><li><a href=#wg-checkins>WG checkins</a></li></ul></li><li><a href=#backport-nominations>Backport nominations</a></li><li><a href=#prs-s-waiting-on-team>PRs S-waiting-on-team</a></li><li><a href=#oldest-prs-waiting-for-review>Oldest PRs waiting for review</a></li><li><a href=#prs-s-waiting-on-team-1>PRs S-waiting-on-team</a><ul><li><a href=#oldest-prs-waiting-for-review-1>Oldest PRs waiting for review</a></li></ul></li><li><a href=#issues-of-note>Issues of Note</a><ul><li><a href=#short-summary>Short Summary</a></li><li><a href=#p-critical>P-critical</a></li><li><a href=#p-high-regressions>P-high regressions</a></li></ul></li><li><a href=#performance-logs>Performance logs</a><ul><li></li></ul></li><li><a href=#nominated-issues>Nominated Issues</a></li></ul></nav></aside></main></body></html>