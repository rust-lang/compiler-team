<!doctype html><html lang=en><head><meta http-equiv=refresh content="0; url=https://forge.rust-lang.org/compiler/index.html"></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://rust-lang.github.io/compiler-team/>Rust Lang - Compiler Team</a></h2><style>nav ul a[href$=\2f compiler-team\2fminutes\2f design-meeting\2f 2019-10-04-Roadmap-2020-Goals\2f ]{color:#004ed0}</style><ul><li><p><strong>About</strong></p><ul><li><a href=/compiler-team/about/CODE_OF_CONDUCT/>Code of Conduct</a></li><li><a href=/compiler-team/about/chat-platform/>Chat Platform</a></li><li><a href=/compiler-team/about/steering-meeting/>Steering Meeting</a></li><li><a href=/compiler-team/about/triage-meeting/>Triage Meeting</a></li></ul></li><li><p><strong>Minutes</strong></p><ul><li><a href=/compiler-team/minutes/design-meeting/>Design Meetings</a></li><li><a href=/compiler-team/minutes/steering-meeting/>Steering Meetings</a></li><li><a href=/compiler-team/minutes/triage-meeting/>Triage Meetings</a></li></ul></li><li><p><strong>Procedures</strong></p><ul><li><a href=/compiler-team/procedures/>Documentation</a></li><li><a href=/compiler-team/procedures/crates/>Crates</a></li><li><a href=/compiler-team/procedures/call-for-participation/>Call for participation</a></li><li><a href=/compiler-team/procedures/form-new-working-group/>Form new working group</a></li></ul></li><li><p><a href=/compiler-team/working-groups/><strong>Working Groups</strong></a></p><ul><li><a href=/compiler-team/working-groups/async-await/>Async Await</a></li><li><a href=/compiler-team/working-groups/debugging/>Debugging</a></li><li><a href=/compiler-team/working-groups/diagnostics/>Diagnostics</a></li><li><a href=/compiler-team/working-groups/rustc-dev-guide/>Rustc Dev Guide</a></li><li><a href=/compiler-team/working-groups/llvm/>LLVM</a></li><li><a href=/compiler-team/working-groups/meta/>Meta</a></li><li><a href=/compiler-team/working-groups/mir-opt/>MIR-opt</a></li><li><a href=/compiler-team/working-groups/nll/>NLL</a></li><li><a href=/compiler-team/working-groups/parallel-rustc/>parallel rustc</a></li><li><a href=/compiler-team/working-groups/pgo/>PGO</a></li><li><a href=/compiler-team/working-groups/pipelining/>pipelining</a></li><li><a href=/compiler-team/working-groups/polonius/>polonius</a></li><li><a href=/compiler-team/working-groups/polymorphization/>polymorphization</a></li><li><a href=/compiler-team/working-groups/prioritization/>Prioritization</a></li><li><a href=/compiler-team/working-groups/rfc-2229/>rfc-2229</a></li><li><a href=/compiler-team/working-groups/rls-2.0/>rls-2.0</a></li><li><a href=/compiler-team/working-groups/self-profile/>Self Profile</a></li><li><a href=/compiler-team/working-groups/traits/>Traits</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/compiler-team/svg/menu.svg alt=Menu>
</label><strong>Roadmap 2020</strong></header><article class=markdown><h1 id=roadmap-2020-compiler-discussion>Roadmap 2020 Compiler Discussion</h1><p><a href=https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/design.20meeting.202019-10-04>Zulip topic</a></p><h1 id=2019-roadmap-for-reference>2019 roadmap (for reference)</h1><p>The compiler team has five main themes of work for this year:</p><ul><li><strong>Improving &ldquo;core strength&rdquo;</strong> by lowering raw compilation times and also generating better code (which in turn can help with compilation times)</li><li><strong>Improved IDE integration</strong>, including support for typed completions</li><li>Extracting parts of rustc into <strong>libraries</strong>, which are easier to understand and maintain but also help in developing a Rust specification</li><li>Supporting lang team in <strong>key feature development</strong>, such as around <code>async fn</code> support, or improvements to the trait system</li><li>Improving our <strong>documentation</strong> and <strong>organization</strong>, helping to make it clearer what is going on at any given time, and how people can get involved.</li></ul><h1 id=big-challenges-for-rustc-and-compiler-team>Big challenges for rustc and compiler team</h1><p><a href=https://poll.ly/#/P76nbdyb>Poll to vote</a> &ndash; feel free to add your own items to the poll; you can also add notes below with a few lines of elaboration.</p><ul><li>compilation times remain stubbornly high<ul><li>many companies have huge codebases and compilation time can be an existential crisis</li><li>we feel this ourselves with bootstrapping<ul><li>band-aids like &ldquo;factor librustc into finer grain crates&rdquo; might work; cannot be &ldquo;official answer&rdquo;</li></ul></li><li>incremental has helped but it&rsquo;s not like a 1-line change is &lsquo;instantaneous&rsquo;</li><li>this bullet is talking about the time it takes to &ldquo;run tests&rdquo; and do full builds; it does NOT refer to the &ldquo;instantaneous feedback&rdquo; for things like completion, which falls under IDE</li></ul></li><li>tech debt around the trait system<ul><li>blocking a lot of lang team progress (async fn in traits, GATs, specialization)</li><li>&ldquo;lazy normalization&rdquo;<ul><li>also maybe blocking const generics work</li><li>also support for higher-ranked lifetimes etc remains a common place where you can hit ICEs that have no real fix</li></ul></li><li>possibly performance impact</li></ul></li><li>maintenance and triage work<ul><li>we do a decent job of keeping up with work but work burden is unevenly distributed</li><li>non-urgent / non-regression bugs can &ldquo;pile up&rdquo; &ndash; are we making progress on them?</li><li>(note absence of data here; maybe we <em>are</em> keeping up, relative to bug-report rate and/or bugs that actually matter&mldr;)<ul><li>(simulacrum): we are not really keeping up</li><li>long-term trend is up; most current issues are fairly recently triaged,
count has been going up: ~3000 last summer, up to 4900 now. Not all compiler team, but &ldquo;most&rdquo;.</li></ul></li></ul></li><li>IDE story is confusing, we&rsquo;re not focusing our efforts<ul><li>we need a strong IDE story</li></ul></li><li>new features draw in new volunteers more easily than maintenance/paying-down-debt<ul><li>can we make such work more exciting? E.g. via gamification?</li></ul></li><li>documentation and design<ul><li>many parts of the compiler remain undocumented<ul><li>writing mentoring instructions often requires recounting same details over and over</li></ul></li><li>we have a lot of great design ideas but there are often ill-documented</li><li>ambitious rewrites can be hard to review without knowing &rsquo;the plan'<ul><li>also, often it&rsquo;s not clear how much consensus there is <em>on</em> the plan</li></ul></li></ul></li><li>paying for labor<ul><li>we rely on volunteers for vast majority of coding effort</li><li>some of this is coding done while &ldquo;on the clock&rdquo; for some boss, with that boss&rsquo;s blessing</li><li>(there are also contract laborers, financed by companies with specific needs)</li><li>is this model of compensation going to suffice going forward?</li></ul></li><li>team growth<ul><li>Find more people to help out</li><li>Improve the onboarding process</li><li>Mentoring/help</li></ul></li></ul><h1 id=discussion-summaries>Discussion summaries</h1><h2 id=compilation-times>compilation times</h2><ul><li>benchmark vs end-user programs<ul><li>maybe set a strict goal of improving bootstrap times (<a href=https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/design.20meeting.202019-10-04/near/177342591>link</a>)</li><li>rough conclusions<ul><li>bootstrap is worth focusing on</li><li>codegen time is a big deal<ul><li><a href=https://mark.rousskov.org/parallel-compiler-data/master/rustc-compiler-opt-timing.html>measurements suggest</a> librustc is long pole in the tent, also</li></ul></li></ul></li><li>incremental could be improved, e.g. measure/improve the &ldquo;edit comment&rdquo; use case<ul><li>tracked by rust-lang/rust#47389</li><li>eddyb writes:<ul><li>don&rsquo;t do any work past the HIR when only a comment changed (targeted Span improvements may help)</li></ul></li><li>move incremental back so you don&rsquo;t need to spend entire seconds getting to HIR</li></ul></li></ul></li></ul><h2 id=trait-system>trait system</h2><ul><li>made progress this year but not as much as hoped</li><li><a href=https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/design.20meeting.202019-10-04/near/177344654>conclusion</a>:<ul><li>we need most of all a clear roadmap here, and that should be an immediate focus</li><li>good to try and separate out lazy normalization from other goals</li></ul></li></ul><h2 id=heading></h2><h1 id=see-also>See also</h1><ul><li><a href=https://raw.githubusercontent.com/rust-lang/rfcs/master/text/2657-roadmap-2019.md>2019 roadmap</a></li><li><a href=/iHCbm2sWQ-y2KuWFjEpUog>random brainstorming by pnkfelix + nikomatsakis</a></li></ul></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#compilation-times>compilation times</a></li><li><a href=#trait-system>trait system</a></li><li><a href=#heading></a></li></ul></nav></aside></main></body></html>