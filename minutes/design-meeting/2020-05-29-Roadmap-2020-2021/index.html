<!doctype html><html lang=en><head><meta http-equiv=refresh content="0; url=https://forge.rust-lang.org/compiler/index.html"></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://rust-lang.github.io/compiler-team/>Rust Lang - Compiler Team</a></h2><style>nav ul a[href$=\2f compiler-team\2fminutes\2f design-meeting\2f 2020-05-29-Roadmap-2020-2021\2f ]{color:#004ed0}</style><ul><li><p><strong>About</strong></p><ul><li><a href=/compiler-team/about/CODE_OF_CONDUCT/>Code of Conduct</a></li><li><a href=/compiler-team/about/chat-platform/>Chat Platform</a></li><li><a href=/compiler-team/about/steering-meeting/>Steering Meeting</a></li><li><a href=/compiler-team/about/triage-meeting/>Triage Meeting</a></li></ul></li><li><p><strong>Minutes</strong></p><ul><li><a href=/compiler-team/minutes/design-meeting/>Design Meetings</a></li><li><a href=/compiler-team/minutes/steering-meeting/>Steering Meetings</a></li><li><a href=/compiler-team/minutes/triage-meeting/>Triage Meetings</a></li></ul></li><li><p><strong>Procedures</strong></p><ul><li><a href=/compiler-team/procedures/>Documentation</a></li><li><a href=/compiler-team/procedures/crates/>Crates</a></li><li><a href=/compiler-team/procedures/call-for-participation/>Call for participation</a></li><li><a href=/compiler-team/procedures/form-new-working-group/>Form new working group</a></li></ul></li><li><p><a href=/compiler-team/working-groups/><strong>Working Groups</strong></a></p><ul><li><a href=/compiler-team/working-groups/async-await/>Async Await</a></li><li><a href=/compiler-team/working-groups/debugging/>Debugging</a></li><li><a href=/compiler-team/working-groups/diagnostics/>Diagnostics</a></li><li><a href=/compiler-team/working-groups/rustc-dev-guide/>Rustc Dev Guide</a></li><li><a href=/compiler-team/working-groups/llvm/>LLVM</a></li><li><a href=/compiler-team/working-groups/meta/>Meta</a></li><li><a href=/compiler-team/working-groups/mir-opt/>MIR-opt</a></li><li><a href=/compiler-team/working-groups/nll/>NLL</a></li><li><a href=/compiler-team/working-groups/parallel-rustc/>parallel rustc</a></li><li><a href=/compiler-team/working-groups/pgo/>PGO</a></li><li><a href=/compiler-team/working-groups/pipelining/>pipelining</a></li><li><a href=/compiler-team/working-groups/polonius/>polonius</a></li><li><a href=/compiler-team/working-groups/polymorphization/>polymorphization</a></li><li><a href=/compiler-team/working-groups/prioritization/>Prioritization</a></li><li><a href=/compiler-team/working-groups/rfc-2229/>rfc-2229</a></li><li><a href=/compiler-team/working-groups/rls-2.0/>rls-2.0</a></li><li><a href=/compiler-team/working-groups/self-profile/>Self Profile</a></li><li><a href=/compiler-team/working-groups/traits/>Traits</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/compiler-team/svg/menu.svg alt=Menu>
</label><strong>2020-05-29 Roadmap 2020-2021</strong></header><article class=markdown><h1 id=links>Links</h1><ul><li><a href=https://zulip-archive.rust-lang.org/238009tcompilermeetings/94984steeringmeetingroadmap20200529compilerteam287.html>Zulip topic</a></li><li>Meeting proposal: <a href=https://github.com/rust-lang/compiler-team/issues/287>rust-lang/compiler-team#287</a></li></ul><h1 id=key-notes-and-points-from-the-meeting-itself>Key notes and points from the meeting itself</h1><ul><li>Parallel compilation:<ul><li>There was a general consensus to deprioritize parallel compilation
in favor of pursuing better improvements to incremental compilation.</li><li>One interesting use case is CI turnaround times. Parallel
compilation doesn&rsquo;t do much there since most CI systems are not
very beefy. Incremental doesn&rsquo;t either, but it might if you
enabled incremental support (and could trust it well enough).</li><li>We can still land some small PRs etc without it being on the
roadmap necessarily.</li></ul></li><li>Incremental compilation:<ul><li>pnkfelix would like to get an incremental working group up and going.</li><li>simulacrum is interested in working on improving profiling.</li></ul></li><li>impl Trait: we discussed a bit what it would take to finish up impl Trait.</li><li>How to drum up excitement:<ul><li>WesleyWiser raised up the 2018 impl period as a really motivating
and clear way to get involved:<ul><li><a href=https://zulip-archive.rust-lang.org/238009tcompilermeetings/94984steeringmeetingroadmap20200529compilerteam287.html#199164146>&ldquo;I think one of the things I really liked about the 2018 impl
period was that it created a really smooth ramp to get people
involved with making the project goals
happen.&rdquo;</a></li><li>A lot of the people who joined them, it seems, stuck around.</li></ul></li><li>We discussed some of how we might recapture a bit of that spirit, with the thought
that a big part of it<ul><li>breaking down into a list of groups with goals</li><li>a marketing push advertising those rgoups and projects</li><li>identifying people who are happy to taker questons etc</li></ul></li></ul></li><li>We discussed &ldquo;saying no&rdquo; to some of the things on the list, notably
a lot of them are assigned to nikomatsakis.</li></ul><h1 id=initial-proposal>Initial proposal</h1><p>This section contains the proposal that was made up at the start of the meeting.</p><h2 id=general-areas-and-themes>General areas and themes</h2><p>These are not meant to be specific projects, but more categories that justify <em>why</em> we are pursuing specific projects. The categories include a bit of &ldquo;what&rdquo; that clarifies what the category is as well as &ldquo;why&rdquo; indicating why this is a category of work worth pursuing.</p><ul><li>Improving the IDE experience<ul><li><strong>Why?</strong> In survey, a strong IDE experience was one of the top reasons given for &ldquo;why I don&rsquo;t use Rust&rdquo; or &ldquo;what would make me use Rust more often&rdquo;, and the largest one that is directly under compiler team&rsquo;s control.</li></ul></li><li>Improving build times for CI<ul><li><strong>What?</strong> From-scratch batch compilation performance</li><li><strong>What?</strong> Integration with</li><li><strong>Why?</strong> Anecdotal feedback that &ldquo;interactive execution is ok, but CI is painful&rdquo;</li><li><strong>Why?</strong> Persistent complaint when it comes to large codebases especially</li></ul></li><li>Polish and quality assurance<ul><li><strong>What?</strong> Fixing bugs, improving diagnostics</li></ul></li><li>Deliver on long-standing features, finish things up<ul><li><strong>Why?</strong> Rust 2020 roadmap goal</li><li><strong>Why?</strong> Anecdotally, a sense of &ldquo;everything I want to use is always half-finished&rdquo; has come up from numerous surveys (e.g., compiler team survey, a mozilla internal surveys) as well as frequent conversations.</li></ul></li><li>Async polish and performance<ul><li><strong>What?</strong> Improving diagnostics, performance of async-await</li><li><strong>Why?</strong> In survey, servers are the number one application for Rust.</li></ul></li><li>Improving the way we organize ourselves<ul><li><strong>What?</strong> Structural changes to help us engage newcomers and be clearer in our priorities.</li><li><strong>Why?</strong> Acting on the feedback from compiler-team survey that we need more prioritization and ability to communicate what we&rsquo;re doing.</li><li><strong>Why?</strong> Help address the need</li></ul></li><li>Improving incremental compilation<ul><li><strong>What?</strong> Making more source inputs incremental</li><li><strong>Why?</strong> Improve local edit-compile-debug cycle</li><li><strong>What?</strong> Increase test surface (e.g. discover new cases to test)</li><li><strong>Why?</strong> Most incr-comp bugs reported do not have enough info for replication.<ul><li>(An alternative here: Figure out ways to capture needed info automatically)</li></ul></li></ul></li></ul><h2 id=top-goals-for-2021-edition>Top goals for 2021 (Edition)</h2><p>These are actual specific projects. The idea here is to be thinking about &ldquo;things that would be complete by mid 2021&rdquo; &ndash; but really I have in mind &ldquo;what can we get done by 2020&rdquo;, per <a href=https://psychcentral.com/lib/hofstadters-law-and-realistic-planning/>Hofstadter&rsquo;s Law</a>. The list is perhaps too ambitious. It&rsquo;s not meant to be <em>exhaustive</em> necessarily, but it should I think try to identify the major things we think we can realistic accomplish and is meant to help us in driving our efforts. In particular, places where a single person is driving multiple projects are somewhat suspect and we should look carefully at which is the most important thing. It&rsquo;s better to do one thing completely than two things half-way, in other words.</p><p>For each goal, we list the following:</p><ul><li>Motivation: one of the motivations above</li><li>Driver(s): people who are driving this work, if known (typically leads of groups)</li><li>Group(s): groups driving this work, if any</li><li>Goals for 2021: try to enumerate the thing we think we can accomplish in more detail</li></ul><h3 id=goals>Goals</h3><ul><li>Triage work<ul><li>Motivation: Polish and quality assurance, Improving the way we organize ourselves</li><li>Driver(s): pnkfelix, spastorino</li><li>Group(s): wg-prioritization</li><li>Goals for 2021:<ul><li>keep on keepin&rsquo; on?</li><li>Keep the weekly triage meeting focused and on-time?</li></ul></li></ul></li><li>Rust-analyzer transition<ul><li>Motivation: Improving the IDE experience</li><li>Driver(s): matklad, flodiebold</li><li>Groups(s): wg-rls</li><li>Goals for 2021:<ul><li>moving rust-analyzer to be default IDE solution</li></ul></li></ul></li><li>rustc-dev-guide<ul><li>Motivation: Improving the way we organize ourselves</li><li>Driver(s): spastorino</li><li>Group(s): wg-rustc-dev-guide</li><li>Goals for 2021:<ul><li>Reorganized table of contents</li><li>Complete walk through?</li><li>Slowly fill out gaps in useful knowledge</li></ul></li></ul></li><li>Progress towards chalk integration<ul><li>Motivation: Improving the IDE experience</li><li>Driver(s): nikomatsakis, flodiebold, jackh726</li><li>Group(s): wg-rls, wg-traits</li><li>Goal for 2021:<ul><li>rust-analyzer is using chalk, enable it to type-check and manage most projects</li><li>extract a shared library for types usable by rustc, chalk, and rust-analyzer</li><li>integrate experimentally with rustc and get to the point where <code>-Zchalk</code> allows things to largely work</li></ul></li></ul></li><li>MIR Optimizations<ul><li>Driver(s): oli, wesleywiser</li><li>Group(s): wg-mir-opt</li><li>Goal for 2021:<ul><li>Speed up compile-time by removing work llvm has to do</li><li>Speed up runtime by doing optimizations that llvm can&rsquo;t do or doesn&rsquo;t have the (type?) information in order to do.<ul><li>Basically make idiomatic code as fast as handcrafted</li></ul></li></ul></li></ul></li><li>Generic associated types<ul><li>Driver(s): nikomatsakis, matthewjasper perhaps</li><li>Group(s): wg-traits?</li><li>Goal for 2021:<ul><li>Have some form of GATs, including type-generic associated types, usable in rustc under a feature flag</li><li>Fix known soundness bugs</li></ul></li></ul></li><li>Const generics<ul><li>Motivation: Deliver on long-standing features, finish things up</li><li>Driver(s): varkor? who else?</li><li>Group(s): XXX no project group at present</li><li>Why this feature?<ul><li>Commonly cited in the Rust survey as one of the things people are most excited about</li><li>Blocks a number of language improvements, such as SIMD, <code>let x: [u32; _] = ...</code>, etc</li></ul></li><li>Goal for 2021:<ul><li>Correct the bug around the &ldquo;generic parent&rdquo; (blocked on lazy normalization)</li><li>Stabilize? Is that too ambitious? Can we clarify other goals?</li></ul></li></ul></li><li>Const evaluation<ul><li>Motivation: Deliver on long-standing features, finish things up</li><li>Driver(s): oli, ralf, ecstatic-morse</li><li>Group(s): wg-const-eval, miri</li><li>Why this feature?<ul><li>Commonly requested feature for embedded (very important there) and for replacing lazy_static things with compile-time things</li><li>Loads of finished features that need a bit of carrying over the stabilization line.</li></ul></li></ul></li><li>Improve the performance of the trait system<ul><li>Driver(s): eddyb, to a lesser extent nikomatsakis</li><li>Goal:<ul><li>Complete work described in <a href=https://github.com/w3f/General-Grants-Program/pull/261>w3f#261</a></li></ul></li></ul></li><li>Introduce major change proposals (MCP)<ul><li>Motivation: Improving the way we work</li><li>Driver(s): nikomatsakis</li><li>Group(s): wg-meta</li><li>Goal for 2021:<ul><li>See widespread use of MCPs for major changes</li></ul></li></ul></li><li>Introduce groups for major areas in the compiler as well as targets<ul><li>Motivation: Improving the way we work</li><li>Driver(s): nikomatsakis, spastorino</li><li>Groups(s): wg-meta</li><li>Goal:<ul><li>Create clearer folks that</li></ul></li></ul></li><li>RFC 2229 Implementation<ul><li>Motivation: Deliver on long-standing features, finish things up</li><li>Driver(s): nikomatsakis, matthewjasper</li><li>Group(s): wg-rfc-2229</li><li>Goal:<ul><li>Land an initial version of the feature</li></ul></li></ul></li><li>Create a wg-incr-comp to focus on improvements to incremental compilation<ul><li>Motivation:</li><li>Driver(s): pnkfelix, XXX?</li><li>Group(s) wg-incr-comp</li><li>Goal:
*</li></ul></li><li>Improving profiling infrastructure and self-profile<ul><li>Motivation: Enabling other groups to establish metric-driven goals</li><li>Driver(s): simulacrum</li><li>Goals for 2021:<ul><li>Be able to track disk space utilization of incremental, normal compilation</li><li>Track codegen unit splitting</li></ul></li></ul></li><li>impl Trait plan<ul><li>Motivation: Deliver on long-standing features, finish things up</li><li>Driver(s): nikomatsakis, matthewjasper, oli-obk</li><li>Group(s): wg-impl-trait?</li><li>Goal:<ul><li>Have to define the timeline, but basically clean up and deliver on impl Trait in various positions</li><li>Coordinate with lang team to see how much consensus we can get on other niggling questions</li></ul></li></ul></li><li>async-await polish<ul><li>Motivation: Async polish and performance</li><li>Driver(s): tmandry, &mldr;?</li><li>Group(s): wg-async-await</li><li>Goals for 2021:<ul><li>Hard to define concretely, maybe we can?</li></ul></li></ul></li></ul><h2 id=awesome-accomplishments>Awesome accomplishments</h2><p>I&rsquo;d like to also note some of the awesome accomplishments we&rsquo;ve had since Rust 2018. Let&rsquo;s list them out here:</p><ul><li>self-profile and its integration into the perf page</li><li>Cross-lang ThinLTO and PGO (when did this ship?)</li><li>rustc-dev-guide has grown enormously</li><li>Const evaluation has made a ton of progress</li><li>MCP process introduced :tada:</li></ul><h2 id=projects-not-currently-planned-to-move-forward-and-why>Projects not currently planned to move forward and why</h2><p>This is based on the discussion in the meeting.</p><ul><li>Parallelization<ul><li>Motivation: improving build times, but it&rsquo;s not clear which project above this helps (maybe CI)</li><li>Would need a good driver and plan</li><li>But the code does exist and there are real wins to be had here for people&rsquo;s experience, so quite possibly worth pursuing</li><li>Status for 2021:<ul><li>In stasis</li><li>Might be willing to pursue, but it would require a real assessment of the plan and a set of committed people</li></ul></li></ul></li></ul></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#general-areas-and-themes>General areas and themes</a></li><li><a href=#top-goals-for-2021-edition>Top goals for 2021 (Edition)</a><ul><li><a href=#goals>Goals</a></li></ul></li><li><a href=#awesome-accomplishments>Awesome accomplishments</a></li><li><a href=#projects-not-currently-planned-to-move-forward-and-why>Projects not currently planned to move forward and why</a></li></ul></nav></aside></main></body></html>